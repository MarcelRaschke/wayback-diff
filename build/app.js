function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i.apply(this,arguments)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(t,e){return t(e={exports:{}},e.exports),e.exports
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/}var y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;function b(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var w=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=b(t),a=1;a<arguments.length;a++){for(var o in n=Object(arguments[a]))g.call(n,o)&&(i[o]=n[o]);if(y){r=y(n);for(var s=0;s<r.length;s++)_.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},x=v((function(t,e){!function(){var t=w,n=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var i=60109,a=60110,o=60112;e.Suspense=60113;var s=60120,u=60115,l=60116,c=60121,f=60122,h=60117,p=60129,d=60131;if("function"==typeof Symbol&&Symbol.for){var m=Symbol.for;n=m("react.element"),r=m("react.portal"),e.Fragment=m("react.fragment"),e.StrictMode=m("react.strict_mode"),e.Profiler=m("react.profiler"),i=m("react.provider"),a=m("react.context"),o=m("react.forward_ref"),e.Suspense=m("react.suspense"),s=m("react.suspense_list"),u=m("react.memo"),l=m("react.lazy"),c=m("react.block"),f=m("react.server.block"),h=m("react.fundamental"),m("react.scope"),m("react.opaque.id"),p=m("react.debug_trace_mode"),m("react.offscreen"),d=m("react.legacy_hidden")}var v="function"==typeof Symbol&&Symbol.iterator;function y(t){if(null===t||"object"!=typeof t)return null;var e=v&&t[v]||t["@@iterator"];return"function"==typeof e?e:null}var g={current:null},_={current:null},b={},x=null;function E(t){x=t}b.setExtraStackFrame=function(t){x=t},b.getCurrentStack=null,b.getStackAddendum=function(){var t="";x&&(t+=x);var e=b.getCurrentStack;return e&&(t+=e()||""),t};var S={ReactCurrentDispatcher:g,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:t};function k(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T("warn",t,n)}function C(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T("error",t,n)}function T(t,e,n){var r=S.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(e+="%s",n=n.concat([r]));var i=n.map((function(t){return""+t}));i.unshift("Warning: "+e),Function.prototype.apply.call(console[t],console,i)}S.ReactDebugCurrentFrame=b;var j={};function R(t,e){var n=t.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+e;j[i]||(C("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",e,r),j[i]=!0)}var O={isMounted:function(t){return!1},enqueueForceUpdate:function(t,e,n){R(t,"forceUpdate")},enqueueReplaceState:function(t,e,n,r){R(t,"replaceState")},enqueueSetState:function(t,e,n,r){R(t,"setState")}},N={};function A(t,e,n){this.props=t,this.context=e,this.refs=N,this.updater=n||O}Object.freeze(N),A.prototype.isReactComponent={},A.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},A.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};var P={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},M=function(t,e){Object.defineProperty(A.prototype,t,{get:function(){k("%s(...) is deprecated in plain JavaScript React classes. %s",e[0],e[1])}})};for(var D in P)P.hasOwnProperty(D)&&M(D,P[D]);function I(){}function L(t,e,n){this.props=t,this.context=e,this.refs=N,this.updater=n||O}I.prototype=A.prototype;var B=L.prototype=new I;function U(t){return t.displayName||"Context"}function H(t){if(null==t)return null;if("number"==typeof t.tag&&C("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case e.Fragment:return"Fragment";case r:return"Portal";case e.Profiler:return"Profiler";case e.StrictMode:return"StrictMode";case e.Suspense:return"Suspense";case s:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case a:return U(t)+".Consumer";case i:return U(t._context)+".Provider";case o:return p=t,d=t.render,m="ForwardRef",v=d.displayName||d.name||"",p.displayName||(""!==v?m+"("+v+")":m);case u:return H(t.type);case c:return H(t._render);case l:var n=t,f=n._payload,h=n._init;try{return H(h(f))}catch(t){return null}}var p,d,m,v;return null}B.constructor=L,t(B,A.prototype),B.isPureReactComponent=!0;var $,F,z,V=Object.prototype.hasOwnProperty,q={key:!0,ref:!0,__self:!0,__source:!0};function Y(t){if(V.call(t,"ref")){var e=Object.getOwnPropertyDescriptor(t,"ref").get;if(e&&e.isReactWarning)return!1}return void 0!==t.ref}function W(t){if(V.call(t,"key")){var e=Object.getOwnPropertyDescriptor(t,"key").get;if(e&&e.isReactWarning)return!1}return void 0!==t.key}function X(t,e){var n=function(){$||($=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",e))};n.isReactWarning=!0,Object.defineProperty(t,"key",{get:n,configurable:!0})}function G(t,e){var n=function(){F||(F=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",e))};n.isReactWarning=!0,Object.defineProperty(t,"ref",{get:n,configurable:!0})}function J(t){if("string"==typeof t.ref&&_.current&&t.__self&&_.current.stateNode!==t.__self){var e=H(_.current.type);z[e]||(C('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',e,t.ref),z[e]=!0)}}z={};var K=function(t,e,r,i,a,o,s){var u={$$typeof:n,type:t,key:e,ref:r,props:s,_owner:o,_store:{}};return Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function Z(t,e,n){var r,i={},a=null,o=null,s=null,u=null;if(null!=e)for(r in Y(e)&&(o=e.ref,J(e)),W(e)&&(a=""+e.key),s=void 0===e.__self?null:e.__self,u=void 0===e.__source?null:e.__source,e)V.call(e,r)&&!q.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];Object.freeze&&Object.freeze(c),i.children=c}if(t&&t.defaultProps){var h=t.defaultProps;for(r in h)void 0===i[r]&&(i[r]=h[r])}if(a||o){var p="function"==typeof t?t.displayName||t.name||"Unknown":t;a&&X(i,p),o&&G(i,p)}return K(t,a,o,s,u,_.current,i)}function Q(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i,a,o=t({},e.props),s=e.key,u=e.ref,l=e._self,c=e._source,f=e._owner;if(null!=n)for(i in Y(n)&&(u=n.ref,f=_.current),W(n)&&(s=""+n.key),e.type&&e.type.defaultProps&&(a=e.type.defaultProps),n)V.call(n,i)&&!q.hasOwnProperty(i)&&(void 0===n[i]&&void 0!==a?o[i]=a[i]:o[i]=n[i]);var h=arguments.length-2;if(1===h)o.children=r;else if(h>1){for(var p=Array(h),d=0;d<h;d++)p[d]=arguments[d+2];o.children=p}return K(e.type,s,u,l,c,f,o)}function tt(t){return"object"==typeof t&&null!==t&&t.$$typeof===n}var et=!1,nt=/\/+/g;function rt(t){return t.replace(nt,"$&/")}function it(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function at(t,e,i,a,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u,l,c,f=!1;if(null===t)f=!0;else switch(s){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case n:case r:f=!0}}if(f){var h=t,p=o(h),d=""===a?"."+it(h,0):a;if(Array.isArray(p)){var m="";null!=d&&(m=rt(d)+"/"),at(p,e,m,"",(function(t){return t}))}else null!=p&&(tt(p)&&(u=p,l=i+(!p.key||h&&h.key===p.key?"":rt(""+p.key)+"/")+d,p=K(u.type,l,u.ref,u._self,u._source,u._owner,u.props)),e.push(p));return 1}var v=0,g=""===a?".":a+":";if(Array.isArray(t))for(var _=0;_<t.length;_++)v+=at(c=t[_],e,i,g+it(c,_),o);else{var b=y(t);if("function"==typeof b){var w=t;b===w.entries&&(et||k("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),et=!0);for(var x,E=b.call(w),S=0;!(x=E.next()).done;)v+=at(c=x.value,e,i,g+it(c,S++),o)}else if("object"===s){var C=""+t;throw Error("Objects are not valid as a React child (found: "+("[object Object]"===C?"object with keys {"+Object.keys(t).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}}return v}function ot(t,e,n){if(null==t)return t;var r=[],i=0;return at(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function st(t){if(-1===t._status){var e=(0,t._result)(),n=t;n._status=0,n._result=e,e.then((function(e){if(0===t._status){var n=e.default;void 0===n&&C("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",e);var r=t;r._status=1,r._result=n}}),(function(e){if(0===t._status){var n=t;n._status=2,n._result=e}}))}if(1===t._status)return t._result;throw t._result}function ut(t){return"string"==typeof t||"function"==typeof t||(t===e.Fragment||t===e.Profiler||t===p||t===e.StrictMode||t===e.Suspense||t===s||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===l||t.$$typeof===u||t.$$typeof===i||t.$$typeof===a||t.$$typeof===o||t.$$typeof===h||t.$$typeof===c||t[0]===f))}function lt(){var t=g.current;if(null===t)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");return t}var ct,ft,ht,pt,dt,mt,vt,yt=0;function gt(){}gt.__reactDisabledLog=!0;var _t,bt=S.ReactCurrentDispatcher;function wt(t,e,n){if(void 0===_t)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);_t=r&&r[1]||""}return"\n"+_t+t}var xt,Et=!1,St="function"==typeof WeakMap?WeakMap:Map;function kt(e,n){if(!e||Et)return"";var r,i=xt.get(e);if(void 0!==i)return i;Et=!0;var a,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,a=bt.current,bt.current=null,function(){if(0===yt){ct=console.log,ft=console.info,ht=console.warn,pt=console.error,dt=console.group,mt=console.groupCollapsed,vt=console.groupEnd;var t={configurable:!0,enumerable:!0,value:gt,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}yt++}();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(t){r=t}Reflect.construct(e,[],s)}else{try{s.call()}catch(t){r=t}e.call(s.prototype)}}else{try{throw Error()}catch(t){r=t}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var u=t.stack.split("\n"),l=r.stack.split("\n"),c=u.length-1,f=l.length-1;c>=1&&f>=0&&u[c]!==l[f];)f--;for(;c>=1&&f>=0;c--,f--)if(u[c]!==l[f]){if(1!==c||1!==f)do{if(c--,--f<0||u[c]!==l[f]){var h="\n"+u[c].replace(" at new "," at ");return"function"==typeof e&&xt.set(e,h),h}}while(c>=1&&f>=0);break}}}finally{Et=!1,bt.current=a,function(){if(0==--yt){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:t({},e,{value:ct}),info:t({},e,{value:ft}),warn:t({},e,{value:ht}),error:t({},e,{value:pt}),group:t({},e,{value:dt}),groupCollapsed:t({},e,{value:mt}),groupEnd:t({},e,{value:vt})})}yt<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=o}var p=e?e.displayName||e.name:"",d=p?wt(p):"";return"function"==typeof e&&xt.set(e,d),d}function Ct(t,e,n){return kt(t,!1)}function Tt(t,n,r){if(null==t)return"";if("function"==typeof t)return kt(t,function(t){var e=t.prototype;return!(!e||!e.isReactComponent)}(t));if("string"==typeof t)return wt(t);switch(t){case e.Suspense:return wt("Suspense");case s:return wt("SuspenseList")}if("object"==typeof t)switch(t.$$typeof){case o:return Ct(t.render);case u:return Tt(t.type,n,r);case c:return Ct(t._render);case l:var i=t,a=i._payload,f=i._init;try{return Tt(f(a),n,r)}catch(t){}}return""}xt=new St;var jt,Rt={},Ot=S.ReactDebugCurrentFrame;function Nt(t){if(t){var e=t._owner,n=Tt(t.type,t._source,e?e.type:null);Ot.setExtraStackFrame(n)}else Ot.setExtraStackFrame(null)}function At(t){if(t){var e=t._owner;E(Tt(t.type,t._source,e?e.type:null))}else E(null)}function Pt(){if(_.current){var t=H(_.current.type);if(t)return"\n\nCheck the render method of `"+t+"`."}return""}function Mt(t){return null!=t&&void 0!==(e=t.__source)?"\n\nCheck your code at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+".":"";var e}jt=!1;var Dt={};function It(t,e){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;var n=function(t){var e=Pt();if(!e){var n="string"==typeof t?t:t.displayName||t.name;n&&(e="\n\nCheck the top-level render call using <"+n+">.")}return e}(e);if(!Dt[n]){Dt[n]=!0;var r="";t&&t._owner&&t._owner!==_.current&&(r=" It was passed a child from "+H(t._owner.type)+"."),At(t),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),At(null)}}}function Lt(t,e){if("object"==typeof t)if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];tt(r)&&It(r,e)}else if(tt(t))t._store&&(t._store.validated=!0);else if(t){var i=y(t);if("function"==typeof i&&i!==t.entries)for(var a,o=i.call(t);!(a=o.next()).done;)tt(a.value)&&It(a.value,e)}}function Bt(t){var e,n=t.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)e=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==o&&n.$$typeof!==u)return;e=n.propTypes}if(e){var r=H(n);!function(t,e,n,r,i){var a=Function.call.bind(Object.prototype.hasOwnProperty);for(var o in t)if(a(t,o)){var s=void 0;try{if("function"!=typeof t[o]){var u=Error((r||"React class")+": "+n+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw u.name="Invariant Violation",u}s=t[o](e,o,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(t){s=t}!s||s instanceof Error||(Nt(i),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof s),Nt(null)),s instanceof Error&&!(s.message in Rt)&&(Rt[s.message]=!0,Nt(i),C("Failed %s type: %s",n,s.message),Nt(null))}}(e,t.props,"prop",r,t)}else if(void 0!==n.PropTypes&&!jt){jt=!0,C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",H(n)||"Unknown")}"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ut(t){for(var e=Object.keys(t.props),n=0;n<e.length;n++){var r=e[n];if("children"!==r&&"key"!==r){At(t),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),At(null);break}}null!==t.ref&&(At(t),C("Invalid attribute `ref` supplied to `React.Fragment`."),At(null))}function Ht(t,r,i){var a=ut(t);if(!a){var o="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(o+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var s,u=Mt(r);o+=u||Pt(),null===t?s="null":Array.isArray(t)?s="array":void 0!==t&&t.$$typeof===n?(s="<"+(H(t.type)||"Unknown")+" />",o=" Did you accidentally export a JSX literal instead of a component?"):s=typeof t,C("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",s,o)}var l=Z.apply(this,arguments);if(null==l)return l;if(a)for(var c=2;c<arguments.length;c++)Lt(arguments[c],t);return t===e.Fragment?Ut(l):Bt(l),l}var $t=!1;try{var Ft=Object.freeze({});new Map([[Ft,null]]),new Set([Ft])}catch(t){}var zt=Ht,Vt=function(t,e,n){for(var r=Q.apply(this,arguments),i=2;i<arguments.length;i++)Lt(arguments[i],r.type);return Bt(r),r},qt=function(t){var e=Ht.bind(null,t);return e.type=t,$t||($t=!0,k("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(e,"type",{enumerable:!1,get:function(){return k("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:t}),t}}),e},Yt={map:ot,forEach:function(t,e,n){ot(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return ot(t,(function(){e++})),e},toArray:function(t){return ot(t,(function(t){return t}))||[]},only:function(t){if(!tt(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};e.Children=Yt,e.Component=A,e.PureComponent=L,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S,e.cloneElement=Vt,e.createContext=function(t,e){void 0===e?e=null:null!==e&&"function"!=typeof e&&C("createContext: Expected the optional second argument to be a function. Instead received: %s",e);var n={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null};n.Provider={$$typeof:i,_context:n};var r=!1,o=!1,s=!1,u={$$typeof:a,_context:n,_calculateChangedBits:n._calculateChangedBits};return Object.defineProperties(u,{Provider:{get:function(){return o||(o=!0,C("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),n.Provider},set:function(t){n.Provider=t}},_currentValue:{get:function(){return n._currentValue},set:function(t){n._currentValue=t}},_currentValue2:{get:function(){return n._currentValue2},set:function(t){n._currentValue2=t}},_threadCount:{get:function(){return n._threadCount},set:function(t){n._threadCount=t}},Consumer:{get:function(){return r||(r=!0,C("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),n.Consumer}},displayName:{get:function(){return n.displayName},set:function(t){s||(k("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",t),s=!0)}}}),n.Consumer=u,n._currentRenderer=null,n._currentRenderer2=null,n},e.createElement=zt,e.createFactory=qt,e.createRef=function(){var t={current:null};return Object.seal(t),t},e.forwardRef=function(t){null!=t&&t.$$typeof===u?C("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof t?C("forwardRef requires a render function but was given %s.",null===t?"null":typeof t):0!==t.length&&2!==t.length&&C("forwardRef render functions accept exactly two parameters: props and ref. %s",1===t.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=t&&(null==t.defaultProps&&null==t.propTypes||C("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"));var e,n={$$typeof:o,render:t};return Object.defineProperty(n,"displayName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(n){e=n,null==t.displayName&&(t.displayName=n)}}),n},e.isValidElement=tt,e.lazy=function(t){var e,n,r={$$typeof:l,_payload:{_status:-1,_result:t},_init:st};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return e},set:function(t){C("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),e=t,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(t){C("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=t,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},e.memo=function(t,e){ut(t)||C("memo: The first argument must be a component. Instead received: %s",null===t?"null":typeof t);var n,r={$$typeof:u,type:t,compare:void 0===e?null:e};return Object.defineProperty(r,"displayName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(e){n=e,null==t.displayName&&(t.displayName=e)}}),r},e.useCallback=function(t,e){return lt().useCallback(t,e)},e.useContext=function(t,e){var n=lt();if(void 0!==e&&C("useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",e,"number"==typeof e&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://reactjs.org/link/rules-of-hooks":""),void 0!==t._context){var r=t._context;r.Consumer===t?C("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):r.Provider===t&&C("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return n.useContext(t,e)},e.useDebugValue=function(t,e){return lt().useDebugValue(t,e)},e.useEffect=function(t,e){return lt().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return lt().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return lt().useLayoutEffect(t,e)},e.useMemo=function(t,e){return lt().useMemo(t,e)},e.useReducer=function(t,e,n){return lt().useReducer(t,e,n)},e.useRef=function(t){return lt().useRef(t)},e.useState=function(t){return lt().useState(t)},e.version="17.0.2"}()}));x.Fragment,x.StrictMode,x.Profiler,x.Suspense,x.Children,x.Component,x.PureComponent,x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x.cloneElement,x.createContext,x.createElement,x.createFactory,x.createRef,x.forwardRef,x.isValidElement,x.lazy,x.memo,x.useCallback,x.useContext,x.useDebugValue,x.useEffect,x.useImperativeHandle,x.useLayoutEffect,x.useMemo,x.useReducer,x.useRef,x.useState,x.version;var E=v((function(t){t.exports=x}));E.PureComponent,E.Component;var S=v((function(t,e){!function(){var t="function"==typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,r=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,o=t?Symbol.for("react.profiler"):60114,s=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,d=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,v=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,g=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function b(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:var p=t.type;switch(p){case l:case c:case i:case o:case a:case h:return p;default:var v=p&&p.$$typeof;switch(v){case u:case f:case m:case d:case s:return v;default:return e}}case r:return e}}}var w=l,x=c,E=u,S=s,k=n,C=f,T=i,j=m,R=d,O=r,N=o,A=a,P=h,M=!1;function D(t){return b(t)===c}e.AsyncMode=w,e.ConcurrentMode=x,e.ContextConsumer=E,e.ContextProvider=S,e.Element=k,e.ForwardRef=C,e.Fragment=T,e.Lazy=j,e.Memo=R,e.Portal=O,e.Profiler=N,e.StrictMode=A,e.Suspense=P,e.isAsyncMode=function(t){return M||(M=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),D(t)||b(t)===l},e.isConcurrentMode=D,e.isContextConsumer=function(t){return b(t)===u},e.isContextProvider=function(t){return b(t)===s},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return b(t)===f},e.isFragment=function(t){return b(t)===i},e.isLazy=function(t){return b(t)===m},e.isMemo=function(t){return b(t)===d},e.isPortal=function(t){return b(t)===r},e.isProfiler=function(t){return b(t)===o},e.isStrictMode=function(t){return b(t)===a},e.isSuspense=function(t){return b(t)===h},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===i||t===c||t===o||t===a||t===h||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===d||t.$$typeof===s||t.$$typeof===u||t.$$typeof===f||t.$$typeof===y||t.$$typeof===g||t.$$typeof===_||t.$$typeof===v)},e.typeOf=b}()}));S.AsyncMode,S.ConcurrentMode,S.ContextConsumer,S.ContextProvider,S.Element,S.ForwardRef,S.Fragment,S.Lazy,S.Memo,S.Portal,S.Profiler,S.StrictMode,S.Suspense,S.isAsyncMode,S.isConcurrentMode,S.isContextConsumer,S.isContextProvider,S.isElement,S.isForwardRef,S.isFragment,S.isLazy,S.isMemo,S.isPortal,S.isProfiler,S.isStrictMode,S.isSuspense,S.isValidElementType,S.typeOf;var k=v((function(t){t.exports=S}));k.isValidElementType;var C,T=Function.call.bind(Object.prototype.hasOwnProperty),j="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",R=T,O={},N=R;function A(t,e,n,r,i){for(var a in t)if(N(t,a)){var o;try{if("function"!=typeof t[a]){var s=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw s.name="Invariant Violation",s}o=t[a](e,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(t){o=t}if(!o||o instanceof Error||C((r||"React class")+": type specification of "+n+" `"+a+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in O)){O[o.message]=!0;var u=i?i():"";C("Failed "+n+" type: "+o.message+(null!=u?u:""))}}}C=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}},A.resetWarningCache=function(){O={}};var P,M=A;function D(){return null}P=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}};var I=function(t,e){var n="function"==typeof Symbol&&Symbol.iterator;var r="<<anonymous>>",i={array:u("array"),bigint:u("bigint"),bool:u("boolean"),func:u("function"),number:u("number"),object:u("object"),string:u("string"),symbol:u("symbol"),any:s(D),arrayOf:function(t){return s((function(e,n,r,i,a){if("function"!=typeof t)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s))return new o("Invalid "+i+" `"+a+"` of type `"+f(s)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<s.length;u++){var l=t(s,u,r,i,a+"["+u+"]",j);if(l instanceof Error)return l}return null}))},element:s((function(e,n,r,i,a){var s=e[n];return t(s)?null:new o("Invalid "+i+" `"+a+"` of type `"+f(s)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:s((function(t,e,n,r,i){var a=t[e];return k.isValidElementType(a)?null:new o("Invalid "+r+" `"+i+"` of type `"+f(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(t){return s((function(e,n,i,a,s){if(!(e[n]instanceof t)){var u=t.name||r;return new o("Invalid "+a+" `"+s+"` of type `"+(((l=e[n]).constructor&&l.constructor.name?l.constructor.name:r)+"` supplied to `")+i+"`, expected instance of `"+u+"`.")}var l;return null}))},node:s((function(t,e,n,r,i){return c(t[e])?null:new o("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(t){return s((function(e,n,r,i,a){if("function"!=typeof t)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=f(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(R(s,l)){var c=t(s,l,r,i,a+"."+l,j);if(c instanceof Error)return c}return null}))},oneOf:function(t){if(!Array.isArray(t))return P(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),D;function e(e,n,r,i,s){for(var u=e[n],l=0;l<t.length;l++)if(a(u,t[l]))return null;var c=JSON.stringify(t,(function(t,e){return"symbol"===h(e)?String(e):e}));return new o("Invalid "+i+" `"+s+"` of value `"+String(u)+"` supplied to `"+r+"`, expected one of "+c+".")}return s(e)},oneOfType:function(t){if(!Array.isArray(t))return P("Invalid argument supplied to oneOfType, expected an instance of array."),D;for(var e=0;e<t.length;e++){var n=t[e];if("function"!=typeof n)return P("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+e+"."),D}return s((function(e,n,r,i,a){for(var s=[],u=0;u<t.length;u++){var l=(0,t[u])(e,n,r,i,a,j);if(null==l)return null;l.data&&R(l.data,"expectedType")&&s.push(l.data.expectedType)}return new o("Invalid "+i+" `"+a+"` supplied to `"+r+"`"+(s.length>0?", expected one of type ["+s.join(", ")+"]":"")+".")}))},shape:function(t){return s((function(e,n,r,i,a){var s=e[n],u=f(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var c in t){var p=t[c];if("function"!=typeof p)return l(r,i,a,c,h(p));var d=p(s,c,r,i,a+"."+c,j);if(d)return d}return null}))},exact:function(t){return s((function(e,n,r,i,a){var s=e[n],u=f(s);if("object"!==u)return new o("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var c=w({},e[n],t);for(var p in c){var d=t[p];if(R(t,p)&&"function"!=typeof d)return l(r,i,a,p,h(d));if(!d)return new o("Invalid "+i+" `"+a+"` key `"+p+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var m=d(s,p,r,i,a+"."+p,j);if(m)return m}return null}))}};function a(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function o(t,e){this.message=t,this.data=e&&"object"==typeof e?e:{},this.stack=""}function s(t){var n={},i=0;function a(a,s,u,l,c,f,h){if(l=l||r,f=f||u,h!==j){if(e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("undefined"!=typeof console){var d=l+":"+u;!n[d]&&i<3&&(P("You are manually calling a React.PropTypes validation function for the `"+f+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[d]=!0,i++)}}return null==s[u]?a?null===s[u]?new o("The "+c+" `"+f+"` is marked as required in `"+l+"`, but its value is `null`."):new o("The "+c+" `"+f+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:t(s,u,l,c,f)}var s=a.bind(null,!1);return s.isRequired=a.bind(null,!0),s}function u(t){return s((function(e,n,r,i,a,s){var u=e[n];return f(u)!==t?new o("Invalid "+i+" `"+a+"` of type `"+h(u)+"` supplied to `"+r+"`, expected `"+t+"`.",{expectedType:t}):null}))}function l(t,e,n,r,i){return new o((t||"React class")+": "+e+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function c(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(c);if(null===e||t(e))return!0;var r=function(t){var e=t&&(n&&t[n]||t["@@iterator"]);if("function"==typeof e)return e}(e);if(!r)return!1;var i,a=r.call(e);if(r!==e.entries){for(;!(i=a.next()).done;)if(!c(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!c(o[1]))return!1}return!0;default:return!1}}function f(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||!!e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}(e,t)?"symbol":e}function h(t){if(null==t)return""+t;var e=f(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function p(t){var e=h(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}return o.prototype=Error.prototype,i.checkPropTypes=M,i.resetWarningCache=M.resetWarningCache,i.PropTypes=i,i},L=v((function(t){var e=k;t.exports=I(e.isElement,!0)}));function B(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}B(".side-by-side-render,\n.inline-render {\n    display: flex;\n    flex: 1 0 auto;\n}\n\n.side-by-side-render > iframe,\n.side-by-side-render > div,\n.inline-render > iframe {\n    border: 1px solid #ccc;\n    border-radius: 2px;\n    width: 100%;\n}\n\n.side-by-side-render > iframe:first-of-type {\n    margin-right: 0.5em;\n}\n\n.diff-view__alert.alert.alert-warning{\n    text-align: center;\n}\n\n.loading {\n    align-items: center;\n    background: transparent;\n    display: flex;\n    justify-content: center;\n}");var U={genericType:"*/*",mediaType:"*/*",type:"*",subType:"*",equals:function(t){return!!t&&this.mediaType===t.mediaType}};H("text","html");function H(t,e){return t=t||"*",e=e||"*",Object.assign(Object.create(U),{genericType:"".concat(t,"/*"),mediaType:"".concat(t,"/").concat(e||"*"),type:t,subtype:e})}H("application","pdf"),H("application","wsdl+xml"),H("application","xml"),H("text","*"),H("text","calendar"),H("text","plain"),H("application","rss+xml"),H("image","jpeg"),H("application","x-tgif"),H("application","msword"),H("application","zip"),H("application","atom+xml"),H("application","excel"),H("application","powerpoint"),H("image","gif"),H("application","rtf"),H("text","csv"),H("application","vnd.ms-excel"),H("application","vnd.openxmlformats-officedocument.spreadsheetml.sheet"),H("image","png"),H("application","vnd.openxmlformats-officedocument.wordprocessingml.document"),H("image","jpeg"),H("audio","mpeg"),H("application","postscript");var $={RAW_FROM_CONTENT:{description:"“From” Version"},RAW_TO_CONTENT:{description:"“To” Version"},RAW_SIDE_BY_SIDE:{description:"Side-by-side Content"},HIGHLIGHTED_TEXT:{description:"Highlighted Text",diffService:"html_text_dmp"},HIGHLIGHTED_SOURCE:{description:"Highlighted Source",diffService:"html_source_dmp"},HIGHLIGHTED_RENDERED:{description:"Highlighted Rendered",diffService:"html_token"},SIDE_BY_SIDE_RENDERED:{description:"Side-by-Side Rendered",diffService:"html_token",options:{include:"all"}},OUTGOING_LINKS:{description:"Outgoing Links",diffService:"links"},CHANGES_ONLY_TEXT:{description:"Changes Only Text",diffService:"html_text_dmp"},CHANGES_ONLY_SOURCE:{description:"Changes Only Source",diffService:"html_source_dmp"}};for(var F in $)$[F].value=F;var z=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.onSelect,r={},i="unchanged",a=f(e,2),o=a[0],s=a[1];return-1===o?(i="removed",r.background="#ffc0cb"):1===o&&(i="added",r.background="#90ee90"),E.createElement("span",{className:"diff item ".concat(i),style:r,onClick:n},s)}}]),i}();r(z,"propTypes",{data:L.object,onSelect:L.func});var V=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){var t=this,e=this.props,n=e.data,r=e.onSelectItem,i=e.className,a=function(t,e,n){return function(){t&&t(n,e)}},o=n.map((function(e,n){return E.createElement(t.props.component,{data:e,key:n,index:n,onSelect:a(r,e,n)})}));return E.createElement("div",{className:i},o)}}]),i}();r(V,"propTypes",{data:L.object,onSelectItem:L.func,className:L.string});var q=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return E.createElement(V,{data:this.props.diffData.diff,component:z,className:this.props.className})}}]),i}();r(q,"propTypes",{diffData:L.object,className:L.string});var Y=function(t){return null==t},W=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return E.createElement("span",null,"Loading...")}}]),i}(),X=function(e){a(i,E.PureComponent);var r=c(i);function i(e){var n;return t(this,i),(n=r.call(this,e)).state={loaderStyle:null},n}return n(i,[{key:"render",value:function(){var t=this,e=function(){return Y(t.props.loader)?E.createElement(W,null):t.props.loader};return E.createElement("div",{style:this.state.loaderStyle},this.state.loaderStyle&&E.createElement(e,null))}},{key:"setLoaderStyle",value:function(t){this.setState({loaderStyle:t})}}]),i}();r(X,"propTypes",{loader:L.object});var G=function(e){a(i,E.PureComponent);var r=c(i);function i(e){var n;return t(this,i),(n=r.call(this,e)).loaderRef=E.createRef(),n._frame=null,n}return n(i,[{key:"componentDidMount",value:function(){this._updateContent(),this.addLoaderImg()}},{key:"componentDidUpdate",value:function(){this._updateContent()}},{key:"render",value:function(){var t=this;return E.createElement("div",null,E.createElement("iframe",{height:window.innerHeight,width:"100%",onLoad:function(){t.handleHeight(),t.removeLoaderImg()},sandbox:"allow-same-origin allow-forms allow-scripts",ref:function(e){t._frame=e}}),E.createElement(X,{ref:this.loaderRef,loader:this.props.loader}))}},{key:"_updateContent",value:function(){var t=this,e=function(t,e){var n=(new DOMParser).parseFromString(t,"text/html");return n=e(n),"<!doctype html>\n".concat(n.documentElement.outerHTML)}(this.props.html,(function(e){return t.props.transform&&(e=t.props.transform(e)||e),function(t,e){if(e){var n=t.querySelector("base")||t.createElement("base");n.href=e;var r=t.querySelector("meta[charset]"),i=t.head.firstChild;r&&(i=r.nextSibling),i?i.parentNode.insertBefore(n,i):t.head.appendChild(n)}return t}(e,t.props.baseUrl)}));this._frame.setAttribute("srcdoc",e)}},{key:"handleHeight",value:function(){var t=this._frame.contentDocument.documentElement.scrollHeight;t>.1*this._frame.height?this._frame.height=t+.01*t:this._frame.height=.5*this._frame.height}},{key:"removeLoaderImg",value:function(){this.loaderRef.current.setLoaderStyle(null)}},{key:"addLoaderImg",value:function(){var t=this._frame.contentDocument.scrollingElement.offsetWidth,e=this._frame.offsetLeft+t/2;this.loaderRef.current.setLoaderStyle({position:"absolute",left:e+"px",top:"50%"})}}]),i}();r(G,"propTypes",{loader:L.object,html:L.string,transform:L.func,baseUrl:L.string});var J=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){var t=this.props.diffData.combined||this.props.diffData.diff;return E.createElement("div",{className:"inline-render"},E.createElement(G,{html:t,baseUrl:this.props.page.url}))}}]),i}();r(J,"propTypes",{diffData:L.object,page:L.object});var K=tt.bind(null,"removals"),Z=tt.bind(null,"additions"),Q=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){var t=function(t){return t},e=t;return this.props.diffData.deletions||(t=K,e=Z),E.createElement("div",{className:"side-by-side-render"},E.createElement(G,{loader:this.props.loader,html:this.props.diffData.deletions||this.props.diffData.diff,baseUrl:this.props.page.url,transform:t}),E.createElement(G,{loader:this.props.loader,html:this.props.diffData.insertions||this.props.diffData.diff,baseUrl:this.props.page.url,transform:e}))}}]),i}();function tt(t,e){if("additions"!==t){var n=e.getElementById("wm-diff-old-head").content,r=e.getElementById("wm-diff-style"),i=e.querySelector('meta[name="wm-diff-title"]');e.head.innerHTML="",e.head.appendChild(n),e.head.appendChild(r),e.head.appendChild(i)}return function(t,e){function n(t){if(0!==t.size){var e=new Set;return t.forEach((function(t){t.parentNode&&0===t.childElementCount&&/^[\s\n\r]*$/.test(t.textContent)&&(e.add(t.parentNode),t.parentNode.removeChild(t))})),n(e)}}var r=new Set;e.querySelectorAll(t).forEach((function(t){r.add(t.parentNode),t.parentNode.removeChild(t)})),n(r)}("additions"===t?"del":"ins",e),function(t,e){if("additions"===t)return;e.querySelectorAll(".wm-diff-inserted-active").forEach((function(t){return t.remove()})),e.querySelectorAll(".wm-diff-deleted-inert").forEach((function(t){var e=t.content;t.parentNode.insertBefore(e,t),t.remove()}))}(t,e),e}r(Q,"propTypes",{diffData:L.object,page:L.object,loader:L.object});var et=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){var t=this.props.diffData.diff.reduce(nt,[]);return E.createElement(V,{data:t,component:z,className:this.props.className})}}]),i}();function nt(t,e,n,r){var i=f(e,2),a=i[0],o=i[1];if(0!==a)return t.concat([e]);var s=o.split("\n"),u=1===s.length;if(!u&&s.length<=3)return t.concat([e]);var l=r[n-1]&&0!==r[n-1][0],c=r[n+1]&&0!==r[n+1][0],h=u?300:3;if(l&&c&&(h*=2),(u?s[0]:s).length<=h)return t.concat([e]);var p=[];if(l){var d=[];if(u)d.push(s[0].slice(0,300));else{var m=s.slice(0,3).map((function(t){return t.length>300?t.slice(0,300)+"…":t}));d.push(m.join("\n")+"\n")}p.push([a,d.join("")])}if(p.push([a,"…"]),c){var v=[];if(u)v.push(s[0].slice(-300));else{var y=s.slice(0,3).map((function(t,e,n){return t.length>300?null==n[e+1]?"…"+t.slice(-300):t.slice(0,300)+"…":t}));v.push("\n"+y.join("\n"))}p.push([a,v.join("")])}return t.concat(p)}r(et,"propTypes",{diffData:L.object,className:L.string});var rt=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return this.props.content&&/^[\s\n\r]*</.test(this.props.content)?E.createElement("div",{className:"inline-render"},E.createElement(G,{html:this.props.content,baseUrl:this.props.page.url})):E.createElement("div",{className:"inline-render"},E.createElement("iframe",{src:this.props.version}))}}]),i}();r(rt,"propTypes",{content:L.string,page:L.object,version:L.string});var it=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return E.createElement("div",{className:"side-by-side-render"},at(this.props.page,this.props.a,this.props.diffData.rawA),at(this.props.page,this.props.b,this.props.diffData.rawB))}}]),i}();function at(t,e,n){return n&&/^[\s\n\r]*</.test(n)?E.createElement(G,{html:n,baseUrl:t.url}):E.createElement("iframe",{src:e})}r(it,"propTypes",{page:L.object,diffData:L.object,a:L.string,b:L.string});var ot="object"==typeof m&&m&&m.Object===Object&&m,st="object"==typeof self&&self&&self.Object===Object&&self,ut=ot||st||Function("return this")(),lt=ut.Symbol,ct=Object.prototype,ft=ct.hasOwnProperty,ht=ct.toString,pt=lt?lt.toStringTag:void 0;var dt=function(t){var e=ft.call(t,pt),n=t[pt];try{t[pt]=void 0;var r=!0}catch(t){}var i=ht.call(t);return r&&(e?t[pt]=n:delete t[pt]),i},mt=Object.prototype.toString;var vt=function(t){return mt.call(t)},yt=lt?lt.toStringTag:void 0;var gt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":yt&&yt in Object(t)?dt(t):vt(t)};var _t=function(t){return null!=t&&"object"==typeof t};var bt=function(t){return"symbol"==typeof t||_t(t)&&"[object Symbol]"==gt(t)};var wt=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(null!=o&&(void 0===s?o==o&&!bt(o):n(o,s)))var s=o,u=a}return u};var xt=function(t,e){return t>e};var Et=function(t){return t};var St=function(t){return t&&t.length?wt(t,Et,xt):void 0};var kt=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Ct=Math.max;var Tt=function(t,e,n){return e=Ct(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Ct(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),kt(t,this,s)}};var jt=function(t){return function(){return t}};var Rt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Ot,Nt=function(t){if(!Rt(t))return!1;var e=gt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},At=ut["__core-js_shared__"],Pt=(Ot=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+Ot:"";var Mt=function(t){return!!Pt&&Pt in t},Dt=Function.prototype.toString;var It=function(t){if(null!=t){try{return Dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Lt=/^\[object .+?Constructor\]$/,Bt=Function.prototype,Ut=Object.prototype,Ht=Bt.toString,$t=Ut.hasOwnProperty,Ft=RegExp("^"+Ht.call($t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var zt=function(t){return!(!Rt(t)||Mt(t))&&(Nt(t)?Ft:Lt).test(It(t))};var Vt=function(t,e){return null==t?void 0:t[e]};var qt=function(t,e){var n=Vt(t,e);return zt(n)?n:void 0},Yt=function(){try{var t=qt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Wt=Yt?function(t,e){return Yt(t,"toString",{configurable:!0,enumerable:!1,value:jt(e),writable:!0})}:Et,Xt=Date.now;var Gt=function(t){var e=0,n=0;return function(){var r=Xt(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},Jt=Gt(Wt);var Kt=function(t,e){return Jt(Tt(t,e,Et),t+"")};var Zt=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a};var Qt=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var te=function(t){return function(e){return null==e?void 0:e[t]}};var ee=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var ne=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var re=function(t){return null!=t&&ne(t.length)&&!Nt(t)};var ie=function(t){return _t(t)&&re(t)},ae=Math.max;var oe=Kt((function(t){if(!t||!t.length)return[];var e=0;return t=Zt(t,(function(t){if(ie(t))return e=ae(t.length,e),!0})),ee(e,(function(e){return Qt(t,te(e))}))})),se=/[\w\.]{2,256}\.[a-z]{2,4}/gi;function ue(t){return t.indexOf(" ")>=0}function le(t){return!!t.match(se)}function ce(t,e){if(Number.isInteger(t)&&Number.isInteger(e))return fe(t^e)/32;var n=8*atob(t).length,r=8*atob(e).length,i=St([n,r]),a=function(t,e){return oe(t,e).map((function(t){var e=f(t,2);return fe(e[0]^e[1])})).reduce((function(t,e){return t+e}),0)}(_e(t),_e(e));return a/i}function fe(t){for(var e=0;0!==t;)e++,t&=t-1;return e}function he(t){if(t){if(!t.ok)throw Error(t.status);return t}}function pe(t,e){return new Promise((function(n,r){setTimeout((function(){r(new Error("timeout"))}),45e3),fetch(t,e).then(n,r)}))}function de(t){return"string"==typeof t?t:t>9?""+t:"0"+t}function me(t,e){return Object.keys(t).find((function(n){return t[n]===e}))}function ve(t,e){var n=document.getElementById(t);return null!==n&&n.innerHTML.indexOf('value="'+e+'"')>-1}function ye(t){var e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10)-1,r=parseInt(t.substring(6,8),10),i=parseInt(t.substring(8,10),10),a=parseInt(t.substring(10,12),10),o=parseInt(t.substring(12,14),10);return new Date(Date.UTC(e,n,r,i,a,o)).toUTCString()}function ge(t){var e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10)-1,r=parseInt(t.substring(6,8),10);return new Date(Date.UTC(e,n,r)).toUTCString().split(" ").slice(0,4).join(" ")}function _e(t){for(var e=atob(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new Uint8Array(n)}var be=function(e){a(o,E.Component);var i=c(o);function o(e){var n;return t(this,o),r(u(n=i.call(this,e)),"isMountedNow",!1),n._abortController=new window.AbortController,n.state={diffData:null},n}return n(o,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props;this._canFetch(t)&&this._loadDiffData(t.page,t.a,t.b,t.diffType)}},{key:"componentDidMount",value:function(){this.isMountedNow=!0}},{key:"componentWillUnmount",value:function(){this.isMountedNow=!1,this._abortController.abort()}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){this._canFetch(t)&&!this._propsSpecifySameDiff(t)&&this._loadDiffData(t.page,t.a,t.b,t.diffType)}},{key:"render",value:function(){var t=this;if(!this.state.diffData){var e=function(){return Y(t.props.loader)?E.createElement(W,null):t.props.loader};return E.createElement("div",{className:"loading"},E.createElement(e,null))}return E.createElement("div",{className:"diff-view"},this.renderNoChangeMessage()||this.renderUndiffableMessage(),this.renderDiff())}},{key:"renderNoChangeMessage",value:function(){return 0===this.state.diffData.change_count?E.createElement("div",{className:"diff-view__alert alert alert-warning"},"There were ",E.createElement("strong",null,"no changes for this diff type"),". (Other diff types may show changes.)"):null}},{key:"renderUndiffableMessage",value:function(){return this.state.diffData.raw?E.createElement("div",{className:"diff-view__alert alert alert-info"},"We can’t compare the selected versions of page; you are viewing the content without deletions and insertions highlighted."):null}},{key:"renderDiff",value:function(){switch(this.props.diffType){case $.RAW_SIDE_BY_SIDE.value:return E.createElement(it,{page:this.props.page,a:this.props.a,b:this.props.b,diffData:this.state.diffData});case $.RAW_FROM_CONTENT.value:return E.createElement(rt,{page:this.props.page,version:this.props.a,content:this.state.diffData.rawA});case $.RAW_TO_CONTENT.value:return E.createElement(rt,{page:this.props.page,version:this.props.b,content:this.state.diffData.rawB});case $.HIGHLIGHTED_RENDERED.value:return E.createElement(J,{diffData:this.state.diffData,page:this.props.page});case $.SIDE_BY_SIDE_RENDERED.value:return E.createElement(Q,{diffData:this.state.diffData,page:this.props.page,loader:this.props.loader});case $.OUTGOING_LINKS.value:return E.createElement(J,{diffData:this.state.diffData,page:this.props.page});case $.HIGHLIGHTED_TEXT.value:return E.createElement(q,{diffData:this.state.diffData,className:"diff-text-inline"});case $.HIGHLIGHTED_SOURCE.value:return E.createElement(q,{diffData:this.state.diffData,className:"diff-source-inline"});case $.CHANGES_ONLY_TEXT.value:return E.createElement(et,{diffData:this.state.diffData,className:"diff-text-inline"});case $.CHANGES_ONLY_SOURCE.value:return E.createElement(et,{diffData:this.state.diffData,className:"diff-source-inline"});default:return null}}},{key:"_propsSpecifySameDiff",value:function(t,e){return(e=e||this.props).a===t.a&&e.b===t.b&&e.diffType===t.diffType}},{key:"_canFetch",value:function(t){return t.diffType&&t.a&&t.b}},{key:"_loadDiffData",value:function(t,e,n,r){var i=this;if(this.setState({diffData:null}),!$[r].diffService)return Promise.all([pe(e.uri,{mode:"cors"}),pe(n.uri,{mode:"cors"})]).then((function(t){var e=f(t,2);return{raw:!0,rawA:e[0],rawB:e[1]}})).catch((function(t){return t})).then((function(t){return i.setState({diffData:t})}));var a=new URL(this.props.webMonitoringProcessingURL+"/"+$[r].diffService);a.searchParams.append("strict_urls","WBM"),a.searchParams.append("format","json"),a.searchParams.append("pass_headers","cookie"),a.searchParams.append("include","all"),a.searchParams.append("a",e),a.searchParams.append("b",n),pe(a,{credentials:"include"}).then(he).then((function(t){return t.json()})).then((function(t){i.setState({diffData:t})})).catch((function(t){i._errorHandled(t.message)}))}},{key:"_errorHandled",value:function(t){this.isMountedNow&&(this.props.errorHandledCallback(t),this.setState({showError:!0}))}}]),o}();r(be,"propTypes",{a:L.object,b:L.object,diffType:L.string,loader:L.object,webMonitoringProcessingURL:L.string,errorHandledCallback:L.func,page:L.object});B("#diff-select{\n    margin-bottom: 0.7em;\n}\n\n.timestamp-container-view{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n#diff-footer{\n    text-align: center;\n}\n\nyellow-diff-footer{\n    background-color: #f7f417;\n}\n\nblue-diff-footer{\n    background-color: #1d9efd;\n}\n\n.align-items-center > .col-auto {\n    margin-left: auto;\n    margin-right: auto;\n}\n\n#timestamp-select-left, #timestamp-select-right,\n#year-select-left, #year-select-right,\n#month-select-right, #month-select-left{\n    width: auto;\n    padding-left: 1px;\n    padding-right: 1px;\n}\n\n#explanation-middle{\n    text-align: center;\n}\n\n#timestamp-left{\n    display: inline-block;\n    float: left;\n    margin-left: 17.8%;\n}\n\n#timestamp-right{\n    display: inline-block;\n    float: right;\n    margin-right: 17.8%;\n}\n\n.wayback-ymd-timestamp{\n    display: flex;\n}\n\n.wayback-timestamps> * {\n    margin-left: 10px;\n    margin-right: 10px;\n}\n\n.wayback-timestamps {\n    width: 42.86%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n}\n\n.wayback-ymd-buttons > *{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.wayback-ymd-buttons {\n    width: 14.28%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n}\n");var we={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},xe=function(e){a(o,E.Component);var i=c(o);function o(e){var n;t(this,o),r(u(n=i.call(this,e)),"_leftMonthIndex",-1),r(u(n),"_rightMonthIndex",-1),r(u(n),"_leftTimestampIndex",-1),r(u(n),"_rightTimestampIndex",-1),r(u(n),"_visibilityState",["visible","hidden"]),n._abortController=new window.AbortController;var a=void 0===n.props.timestampA?"":n.props.timestampA.substring(0,4),s=void 0===n.props.timestampB?"":n.props.timestampB.substring(0,4);return n.state={timestampA:n.props.timestampA,timestampB:n.props.timestampB,leftYear:a,rightYear:s,showRestartBtn:!1,showDiffBtn:!1,timestampAttempt:0,isMounted:!1,shouldValidateTimestamp:!0},n._handleLeftTimestampChange=n._handleLeftTimestampChange.bind(u(n)),n._handleRightTimestampChange=n._handleRightTimestampChange.bind(u(n)),n._restartPressed=n._restartPressed.bind(u(n)),n._showDiffs=n._showDiffs.bind(u(n)),n._errorHandled=n._errorHandled.bind(u(n)),n._showMonths=n._showMonths.bind(u(n)),n._handleYearChange=n._handleYearChange.bind(u(n)),n.handleLeftMonthChange=n.handleLeftMonthChange.bind(u(n)),n.handleRightMonthChange=n.handleRightMonthChange.bind(u(n)),n}return n(o,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0}),!this.state.showError&&this.state.timestampAttempt<2&&(this.state.cdxData?this._areRequestedTimestampsSelected():this._fetchCDXData())}},{key:"componentDidUpdate",value:function(){this.state.sparkline||this.state.showLoader||this._fetchSparklineData(),this.state.cdxData&&(this.state.shouldValidateTimestamp&&this._checkTimestamps(),this.state.showLoader||(this._selectValues(),!this.state.sparkline||this.state.leftMonthOptions||this.state.rightMonthOptions||-1===this._leftMonthIndex&&-1===this._rightMonthIndex||this._showMonths()))}},{key:"componentWillUnmount",value:function(){this.setState({isMounted:!1}),this._abortController.abort()}},{key:"_handleRightTimestampChange",value:function(){if(this._rightTimestampIndex=document.getElementById("timestamp-select-right").selectedIndex,this._isShowing("timestamp-select-left")){var t=this.state.rightSnaps[this._rightTimestampIndex-1][1],e=this.state.leftSnaps.filter((function(e){return e[1]!==t}));this.setState({showRestartBtn:!0,showDiffBtn:!0,leftSnapElements:this._prepareOptionElements(e)})}}},{key:"_handleLeftTimestampChange",value:function(){if(this._leftTimestampIndex=document.getElementById("timestamp-select-left").selectedIndex,this._isShowing("timestamp-select-right")){var t=this.state.leftSnaps[this._leftTimestampIndex-1][1],e=this.state.rightSnaps.filter((function(e){return e[1]!==t}));this.setState({showRestartBtn:!0,showDiffBtn:!0,rightSnapElements:this._prepareOptionElements(e)})}}},{key:"render",value:function(){var t=this,e=function(){return Y(t.props.loader)?E.createElement(W,null):t.props.loader};return this.state.showLoader&&!this.state.showError?E.createElement("div",{className:"loading"},E.createElement(e,null)):!this.state.showError&&this.state.timestampAttempt<2?this.state.yearOptions||this.state.cdxData?E.createElement("div",{className:"timestamp-header-view"},this._showInfo(),this._showTimestampSelector(),this._showOpenLinks()):E.createElement(e,null):void 0}},{key:"_areRequestedTimestampsSelected",value:function(){if(this.state.finishedValidating){var t,e;if(isNaN(this.state.timestampA))t=null;else{var n=this.state.leftSnaps.slice(-1)[0];this.state.timestampA>n&&(t=this._prepareOptionElements([[this.state.timestampA,0]]))}if(isNaN(this.state.timestampB))e=null;else{var r=this.state.rightSnaps.slice(-1)[0];this.state.timestampB>r&&(e=this._prepareOptionElements([[this.state.timestampB,0]]))}t&&e?(this.setState({leftSnapElements:[].concat(h(this.state.leftSnapElements),[t]),rightSnapElements:[].concat(h(this.state.rightSnapElements),[e]),leftSnaps:[].concat(h(this.state.leftSnaps),[[this.state.timestampA,"0"]]),rightSnaps:[].concat(h(this.state.rightSnaps),[[this.state.timestampB,"1"]]),finishedValidating:!1}),this._leftTimestampIndex=this.state.leftSnapElements.length+1,this._rightTimestampIndex=this.state.rightSnapElements.length+1):t?(this.setState({leftSnapElements:[].concat(h(this.state.leftSnapElements),[t]),leftSnaps:[].concat(h(this.state.leftSnaps),[[this.state.timestampA,"0"]]),finishedValidating:!1}),this._leftTimestampIndex=this.state.leftSnapElements.length+1):e&&(this.setState({rightSnapElements:[].concat(h(this.state.rightSnapElements),[e]),rightSnaps:[].concat(h(this.state.rightSnaps),[[this.state.timestampB,"1"]]),finishedValidating:!1}),this._rightTimestampIndex=this.state.rightSnapElements.length+1)}}},{key:"_checkTimestamps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState({shouldValidateTimestamp:!1});var n={a:"",b:""};this.state.timestampA&&this.state.timestampB?this._validateTimestamp(this.state.timestampA,n,"a").then((function(){return t._validateTimestamp(t.state.timestampB,n,"b")})).then((function(){t._redirectToValidatedTimestamps?t._setNewURL(n.a,n.b):t.setState({finishedValidating:!0})})).catch((function(e){t._errorHandled(e.message)})):this.state.timestampA?this._validateTimestamp(this.state.timestampA,n,"a").then((function(){t._redirectToValidatedTimestamps?t._setNewURL(n.a,n.b):t.setState({finishedValidating:!0})})).catch((function(e){t._errorHandled(e.message)})):this.state.timestampB?this._validateTimestamp(this.state.timestampB,n,"b").then((function(){t._redirectToValidatedTimestamps?t._setNewURL(n.a,n.b):t.setState({finishedValidating:!0})})).catch((function(e){t._errorHandled(e.message)})):("left"===e?this.setState({leftSnapElements:null,leftSnaps:null}):"right"===e&&this.setState({rightSnapElements:null,rightSnaps:null}),this.setState({finishedValidating:!0,showLoader:!1}))}},{key:"_validateTimestamp",value:function(t,e,n){if(this.props.fetchSnapshotCallback)return this._handleTimestampValidationFetch(this.props.fetchSnapshotCallback(t),t,e,n);var r=new URL(this.props.conf.cdxServer,window.location.origin);return r.searchParams.append("url",this.props.url),r.searchParams.append("closest",t),r.searchParams.append("filter","!mimetype:warc/revisit"),r.searchParams.append("format","json"),r.searchParams.append("sort","closest"),r.searchParams.append("limit","1"),r.searchParams.append("fl","timestamp"),this._handleTimestampValidationFetch(pe(r,{signal:this._abortController.signal}),t,e,n)}},{key:"_handleTimestampValidationFetch",value:function(t,e,n,r){var i=this;return t.then(he).then((function(t){return t.json()})).then((function(t){t?(n[r]="".concat(t),e!==n[r]&&(i._redirectToValidatedTimestamps=!0)):i._errorHandled("404")})).catch((function(t){i.errorHandled(t.message)}))}},{key:"_setNewURL",value:function(t,e){this._redirectToValidatedTimestamps=!1,void 0===t&&(t=""),void 0===e&&(e=""),window.history.pushState({},"",this.props.conf.urlPrefix+t+"/"+e+"/"+this.props.url),this.setState({timestampA:t,timestampB:e,finishedValidating:!0,timestampAttempt:this.state.timestampAttempt+1,showLoader:!1}),this.state.leftSnaps&&(this._leftTimestampIndex=this.state.leftSnaps.indexOf(t)),this.state.rightSnaps&&(this._rightTimestampIndex=this.state.rightSnaps.indexOf(e))}},{key:"createCDXRequest",value:function(t){var e=new URL(this.props.conf.cdxServer,window.location.origin);return e.searchParams.append("url",this.props.url),e.searchParams.append("fl","timestamp,digest"),e.searchParams.append("output","json"),e.searchParams.append("from",t),e.searchParams.append("to",t),e.searchParams.append("limit",this.props.conf.limit),pe(e,{signal:this._abortController.signal}).then(he).then((function(t){return t.json()}))}},{key:"_fetchCDXData",value:function(){var t,e,n=this;this.setState({showLoader:!0}),this._saveMonthsIndex(),this.props.fetchCDXCallback?t=this.props.fetchCDXCallback().then(he).then((function(t){return t.json()})):(-1===this._leftMonthIndex||isNaN(this._leftMonthIndex)||(t=this.createCDXRequest(this.state.leftYear+de(this._leftMonthIndex))),-1===this._rightMonthIndex||isNaN(this._rightMonthIndex)||(e=this.createCDXRequest(this.state.rightYear+de(this._rightMonthIndex)))),t?t.then((function(t){if(t&&t.length>0)if(e){var r=t;e.then((function(t){t&&t.length>0?n._prepareCDXData(r,t):n._checkTimestamps("right")}))}else n._prepareCDXData(t,null);else n._checkTimestamps("left")})).catch((function(t){n._errorHandled(t.message)})):e&&e.then((function(t){t&&t.length>0?n._prepareCDXData(null,t):n._checkTimestamps("right")}))}},{key:"_errorHandled",value:function(t){this.state.isMounted&&(this.props.errorHandledCallback(t),this.setState({showError:!0}))}},{key:"_prepareCDXData",value:function(t,e){e&&e.shift(),t&&t.shift(),this.props.getTimestampsCallback(this.state.timestampA,this.state.timestampB),this.setState({cdxData:!0,leftSnaps:t,rightSnaps:e,leftSnapElements:this._prepareOptionElements(t),rightSnapElements:this._prepareOptionElements(e),showLoader:!1})}},{key:"_prepareOptionElements",value:function(t){return t&&t.map((function(t,e){return E.createElement("option",{key:e,value:t[0]},ye(t[0]))}))}},{key:"_monthOptions",value:function(t){var e=parseInt(this.props.conf.limit);return t&&t.slice(0).reverse().map((function(t,n){var r=Math.min(t[1],e);return E.createElement("option",{key:n,value:t[0]},"".concat(t[0]," (").concat(r,")"))}))}},{key:"_restartPressed",value:function(){this.setState({showRestartBtn:!1,leftSnapElements:this._prepareOptionElements(this.state.leftSnaps),rightSnapElements:this._prepareOptionElements(this.state.rightSnaps)})}},{key:"_showTimestampSelector",value:function(){return E.createElement("div",{className:"wayback-ymd-timestamp"},E.createElement("div",{className:"wayback-timestamps"},E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"year-select-left",onChange:this._handleYearChange,title:"Years and available captures",value:this.state.leftYear},E.createElement("option",{value:"",disabled:!0},"Year"),this.state.yearOptions),E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"month-select-left",style:{visibility:this._visibilityState[+(-1===this._leftMonthIndex)]},onChange:this.handleLeftMonthChange,title:"Months and available captures",defaultValue:""},E.createElement("option",{value:"",disabled:!0},"Month"),this.state.leftMonthOptions),E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"timestamp-select-left",style:{visibility:this._visibilityState[+!this.state.leftSnapElements]},onChange:this._handleLeftTimestampChange,defaultValue:""},E.createElement("option",{value:"",disabled:!0},"Available captures"),this.state.leftSnapElements)),E.createElement("div",{className:"wayback-ymd-buttons"},this.state.showDiffBtn&&E.createElement("button",{className:"btn btn-default btn-sm",onClick:this._showDiffs},"Show differences"),this.state.showRestartBtn&&E.createElement("button",{className:"btn btn-default btn-sm",onClick:this._restartPressed},"Restart")),E.createElement("div",{className:"wayback-timestamps"},E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"timestamp-select-right",style:{visibility:this._visibilityState[+!this.state.rightSnapElements]},onChange:this._handleRightTimestampChange,defaultValue:""},E.createElement("option",{value:"",disabled:!0},"Available captures"),this.state.rightSnapElements),E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"month-select-right",style:{visibility:this._visibilityState[+(-1===this._rightMonthIndex)]},onChange:this.handleRightMonthChange,title:"Months and available captures",defaultValue:""},E.createElement("option",{value:"",disabled:!0},"Month"),this.state.rightMonthOptions),E.createElement("select",{className:"form-control input-sm mr-sm-1",id:"year-select-right",onChange:this._handleYearChange,title:"Years and available captures",value:this.state.rightYear},E.createElement("option",{value:"",disabled:!0},"Year"),this.state.yearOptions)))}},{key:"_showOpenLinks",value:function(){if(this.state.timestampA&&this.state.timestampB)return E.createElement("div",null,this.state.timestampA&&E.createElement("a",{href:this.props.conf.snapshotsPrefix+this.state.timestampA+"/"+this.props.url,id:"timestamp-left",target:"_blank",rel:"noopener noreferrer"}," Open in new window"),this.state.timestampB&&E.createElement("a",{href:this.props.conf.snapshotsPrefix+this.state.timestampB+"/"+this.props.url,id:"timestamp-right",target:"_blank",rel:"noopener noreferrer"},"Open in new window"),E.createElement("br",null))}},{key:"_showDiffs",value:function(){var t=document.getElementById("timestamp-select-left"),e="";"hidden"!==t.style.visibility&&(e=t.value);var n=document.getElementById("timestamp-select-right"),r="";"hidden"!==n.style.visibility&&(r=n.value),this.props.getTimestampsCallback(e,r),this.setState({timestampA:e,timestampB:r})}},{key:"_selectValues",value:function(){this._isShowing("timestamp-select-left")&&(-1!==this._leftTimestampIndex?document.getElementById("timestamp-select-left").selectedIndex=this._leftTimestampIndex:this.state.timestampA&&(document.getElementById("timestamp-select-left").value=this.state.timestampA)),this._isShowing("timestamp-select-right")&&(-1!==this._rightTimestampIndex?document.getElementById("timestamp-select-right").selectedIndex=this._rightTimestampIndex:this.state.timestampB&&(document.getElementById("timestamp-select-right").value=this.state.timestampB));var t=document.getElementById("month-select-left"),e=document.getElementById("month-select-right");ve(t.id,we[this._leftMonthIndex])?t.value=we[this._leftMonthIndex]:t.selectedIndex=0,ve(e.id,we[this._rightMonthIndex])?e.value=we[this._rightMonthIndex]:e.selectedIndex=0}},{key:"_getHeaderInfo",value:function(t,e,n){var r=ge(t),i=ge(e);return E.createElement("p",{id:"explanation-middle"}," Compare any two captures of ",this.props.url," from our collection of ",n.toLocaleString()," dating from ",r," to ",i,".")}},{key:"_fetchSparklineData",value:function(){var t=this;this.setState({showLoader:!0});var e=new URL(this.props.conf.sparklineURL,window.location.origin);e.searchParams.append("url",this.props.url),e.searchParams.append("collection","web"),e.searchParams.append("output","json"),pe(e,{signal:this._abortController.signal}).then(he).then((function(t){return t.json()})).then((function(e){e?t._prepareSparklineData(e):t._errorHandled("404")})).catch((function(e){t._errorHandled(e.message)}))}},{key:"_prepareSparklineData",value:function(t){var e=t.years,n=new Array(e.length),r=0,i=0;for(var a in e){n[r]=[a,0];for(var o=0;o<e[a].length;o++)n[r][1]=n[r][1]+e[a][o],i+=e[a][o];r++}this.setState({showLoader:!1,sparkline:e,yearOptions:this._monthOptions(n),headerInfo:this._getHeaderInfo(t.first_ts,t.last_ts,i)})}},{key:"_showMonths",value:function(t,e){Y(t)&&(t=this.state.leftYear),Y(e)&&(e=this.state.rightYear);var n=this._getMonthData(this.state.sparkline[t]),r=this._getMonthData(this.state.sparkline[e]);this.setState({leftMonthOptions:this._monthOptions(n),rightMonthOptions:this._monthOptions(r)})}},{key:"_getMonthData",value:function(t){return t&&t.filter((function(t){return t>0})).map((function(t,e){return[we[e+1],t]}))}},{key:"handleLeftMonthChange",value:function(t){this._fetchCDXData();var e="timestamp-select-left";this._leftTimestampIndex=0,document.getElementById(e).selectedIndex="0",this._showElement(e),this.setState({showDiffBtn:!0,timestampA:null,timestampB:null})}},{key:"handleRightMonthChange",value:function(t){this._fetchCDXData();var e="timestamp-select-right";this._rightTimestampIndex=0,document.getElementById(e).selectedIndex="0",this._showElement(e),this.setState({showDiffBtn:!0,timestampA:null,timestampB:null})}},{key:"_showElement",value:function(t){var e=document.getElementById(t);"hidden"===e.style.visibility?e.style.visibility="visible":"none"===e.style.display&&(e.style.display="block")}},{key:"_isShowing",value:function(t){var e=document.getElementById(t);return e&&"visible"===e.style.visibility}},{key:"_hideElement",value:function(t){var e=document.getElementById(t);"hidden"!==e.style.visibility&&(e.style.visibility="hidden")}},{key:"_showInfo",value:function(){return E.createElement("div",null,this.state.headerInfo,E.createElement("div",{id:"timestamp-left"},"Please select a capture"),E.createElement("div",{id:"timestamp-right"},"Please select a capture"),E.createElement("br",null))}},{key:"_handleYearChange",value:function(t){"year-select-left"===t.target.id?(this._hideElement("timestamp-select-left"),this._leftMonthIndex=0,this._showElement("month-select-left"),this.setState({leftYear:t.target.value,showDiffBtn:!1}),this._showMonths(t.target.value,null)):(this._hideElement("timestamp-select-right"),this._rightMonthIndex=0,this._showElement("month-select-right"),this.setState({rightYear:t.target.value,showDiffBtn:!1}),this._showMonths(null,t.target.value))}},{key:"_saveMonthsIndex",value:function(){if(this._isShowing("month-select-left")){var t=document.getElementById("month-select-left").value;this._leftMonthIndex=parseInt(me(we,t))}else this.state.timestampA&&(this._leftMonthIndex=parseInt(this.state.timestampA.substring(4,6)));if(this._isShowing("month-select-right")){var e=document.getElementById("month-select-right").value;this._rightMonthIndex=parseInt(me(we,e))}else this.state.timestampB&&(this._rightMonthIndex=parseInt(this.state.timestampB.substring(4,6)))}}]),o}();r(xe,"propTypes",{loader:L.object,fetchSnapshotCallback:L.func,fetchCDXCallback:L.func,errorHandledCallback:L.func,getTimestampsCallback:L.func,timestampA:L.string,timestampB:L.string,conf:L.object,url:L.string});var Ee=function(e){a(i,E.PureComponent);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return E.createElement("p",{id:"diff-footer"},E.createElement("yellow-diff-footer",null,"Yellow")," indicates content deletion. ",E.createElement("blue-diff-footer",null,"Blue")," indicates content addition.")}}]),i}(),Se=function(e){a(i,E.Component);var r=c(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"render",value:function(){return E.createElement("h1",null,"No capture is selected, please pick one from the list.")}}]),i}(),ke=function(e){a(i,E.PureComponent);var r=c(i);function i(e){var n;return t(this,i),(n=r.call(this,e))._calculateSimhash=n._calculateSimhash.bind(u(n)),n._errorHandled=n._errorHandled.bind(u(n)),n._reloadPage=n._reloadPage.bind(u(n)),n}return n(i,[{key:"render",value:function(){var t="",e=!1,n="";switch(void 0!==this.props.timestamp&&(n=this.props.timestamp.substring(0,4)),this.props.code){case"404":t="The Wayback Machine has not archived ".concat(this.props.url,"."),e=!1;break;case"422":t="The captures of ".concat(this.props.url," cannot be compared. Note that we support only HTML capture comparison."),e=!1;break;case"CAPTURE_NOT_FOUND":t="There are no data available for ".concat(this.props.url," at ").concat(this.props.timestamp,"."),e=!0;break;case"NOT_CAPTURED":t="The Wayback Machine has no similarity data for ".concat(this.props.url," and year ").concat(n,"."),e=!0;break;case"NO_CAPTURES":t="The Wayback Machine has not archived ".concat(this.props.url," for year ").concat(n,"."),e=!1;break;case"NO_DIFFERENT_CAPTURES":t="There aren't any different captures for ".concat(this.props.url," for year ").concat(n," to display their similarity."),e=!1;break;case"_this4.errorHandled is not a function":case"NetworkError when attempting to fetch resource.":case"Load failed":t="The capture of ".concat(this.props.url," at ").concat(this.props.timestamp," cannot be used for comparisons. Its possible it is a redirect."),e=!1;break;default:t="We are sorry but there is a problem comparing these captures. Please try two different ones.",e=!1}return E.createElement(E.Fragment,null,E.createElement("div",{className:"alert alert-warning",role:"alert"},t),e&&E.createElement("button",{className:"btn btn-sm",id:"calcButton",onClick:this._calculateSimhash},"Calculate now"),E.createElement("button",{className:"btn btn-sm",onClick:function(){return window.history.back()}},"« Go back"))}},{key:"_calculateSimhash",value:function(){var t=this;pe("".concat(this.props.conf.waybackDiscoverDiff,"/calculate-simhash?url=").concat(encodeURIComponent(this.props.url),"&year=").concat(this.props.timestamp.substring(0,4))).then(he).then((function(){setTimeout(t._reloadPage,1e4)})).catch((function(e){t._errorHandled(e.message)}))}},{key:"_errorHandled",value:function(t){this.props.errorHandledCallback(t)}},{key:"_reloadPage",value:function(){window.location.reload(!0)}}]),i}();r(ke,"propTypes",{code:L.string,url:L.string,timestamp:L.string,conf:L.object,errorHandledCallback:L.func});var Ce,Te,je=function(e){a(o,E.Component);var r=c(o);function o(e){var n;return t(this,o),(n=r.call(this,e)).state={showDiff:!1,timestampA:n.props.timestampA,timestampB:n.props.timestampB},n._oneFrame=null,n.errorHandled=n.errorHandled.bind(u(n)),n.getTimestamps=n.getTimestamps.bind(u(n)),n.prepareDiffView=n.prepareDiffView.bind(u(n)),n}return n(o,[{key:"getTimestamps",value:function(t,e){(t||e)&&(t&&null==e?(e="",this.setState({fetchedRaw:null,error:null,showDiff:!0,timestampA:t})):e&&null==t?(t="",this.setState({fetchedRaw:null,error:null,showDiff:!0,timestampB:e})):this.setState({fetchedRaw:null,error:null,showDiff:!0,timestampA:t,timestampB:e}),t===this.state.timestampA&&e===this.state.timestampB||window.history.pushState({},"",this.props.conf.urlPrefix+t+"/"+e+"/"+this.props.url))}},{key:"errorHandled",value:function(t){this.setState({error:t})}},{key:"render",value:function(){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLocaleLowerCase();return(t.startsWith("ftp://")||t.startsWith("http://")||t.startsWith("https://")||le(t))&&!ue(t)&&!t.startsWith("site:")}(this.props.url)?this.state.error?E.createElement(ke,{url:this.props.url,timestamp:this.state.timestampA,code:this.state.error}):this.state.timestampA||this.state.timestampB?this.state.timestampA&&this.state.timestampB?E.createElement("div",{className:"diffcontainer-view"},E.createElement(xe,i({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),this.state.showDiff&&this.prepareDiffView(),E.createElement(Ee,null)):this.state.timestampA?E.createElement("div",{className:"diffcontainer-view"},E.createElement(xe,i({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),this.state.showDiff&&this._showOneSnapshot(!0,this.state.timestampA)):this.state.timestampB?E.createElement("div",{className:"diffcontainer-view"},E.createElement(xe,i({},this.props,{errorHandledCallback:this.errorHandled,getTimestampsCallback:this.getTimestamps})),this.state.showDiff&&this._showOneSnapshot(!1,this.state.timestampB)):void 0:this.props.noTimestamps?E.createElement("div",{className:"diffcontainer-view"},E.createElement(xe,i({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),this._showNoTimestamps()):E.createElement("div",{className:"diffcontainer-view"},E.createElement(xe,i({},this.props,{errorHandledCallback:this.errorHandled,getTimestampsCallback:this.getTimestamps}))):this._invalidURL()}},{key:"_showNoTimestamps",value:function(){return E.createElement("div",{className:"side-by-side-render"},E.createElement(Se,null),E.createElement(Se,null))}},{key:"_showOneSnapshot",value:function(t,e){var n=this;if(this.state.fetchedRaw)return t?E.createElement("div",{className:"side-by-side-render"},E.createElement("iframe",{height:window.innerHeight,onLoad:function(){n._handleHeight()},srcDoc:this.state.fetchedRaw,ref:function(t){n._oneFrame=t}}),E.createElement(Se,null)):E.createElement("div",{className:"side-by-side-render"},E.createElement(Se,null),E.createElement("iframe",{height:window.innerHeight,onLoad:function(){n._handleHeight()},srcDoc:this.state.fetchedRaw,ref:function(t){n._oneFrame=t}}));if(this.props.fetchSnapshotCallback)this._handleSnapshotFetch(this.props.fetchSnapshotCallback(e));else{var r=new URL(this.props.conf.snapshotsPrefix+e+"/"+encodeURIComponent(this.props.url),window.location.origin);this._handleSnapshotFetch(pe(r.toString()))}var i=function(){return Y(n.props.loader)?E.createElement(W,null):n.props.loader};return E.createElement("div",{className:"loading"},E.createElement(i,null))}},{key:"_handleSnapshotFetch",value:function(t){var e=this;t.then(he).then((function(t){var e=t.headers.get("content-type");return e&&e.includes("text/html")?t.text():"<iframe src="+t.url+' style="width: 98%; position: absolute; height: 98%;" />'})).then((function(t){e.setState({fetchedRaw:t})})).catch((function(t){e.errorHandled(t.message)}))}},{key:"prepareDiffView",value:function(){if(!this.state.error){var t=new URL(this.props.conf.snapshotsPrefix+this.state.timestampA+"/"+encodeURIComponent(this.props.url),window.location.origin),e=new URL(this.props.conf.snapshotsPrefix+this.state.timestampB+"/"+encodeURIComponent(this.props.url),window.location.origin),n=new URL(this.props.conf.webMonitoringProcessingURL,window.location.origin);return E.createElement(be,{webMonitoringProcessingURL:n.toString(),page:{url:encodeURIComponent(this.props.url)},diffType:"SIDE_BY_SIDE_RENDERED",a:t,b:e,loader:this.props.loader,errorHandledCallback:this.errorHandled})}}},{key:"_handleHeight",value:function(){var t=this._oneFrame.contentDocument.documentElement.scrollHeight,e=this._oneFrame.contentDocument.documentElement.scrollWidth;t>.1*this._oneFrame.height?this._oneFrame.height=t+.01*t:this._oneFrame.height=.5*this._oneFrame.height,e>this._oneFrame.clientWidth&&(this._oneFrame.width=e)}},{key:"_invalidURL",value:function(){return E.createElement("div",{className:"alert alert-danger",role:"alert"},E.createElement("b",null,"Oh snap!")," Invalid URL ",this.props.url)}}]),o}();function Re(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}je.propTypes={url:L.string.isRequired,timestampA:L.string,timestampB:L.string,conf:L.object.isRequired,loader:L.element,fetchCDXCallback:L.func,fetchSnapshotCallback:L.func,noTimestamps:function(t,e,n){return t.noTimestamps&&"boolean"!=typeof t.noTimestamps?new Error("noTimestamps specified in '".concat(n," should be boolean'.")):t.noTimestamps||t.timestampA||t.timestampB?void 0:new Error("At least one of props 'timestampA' or 'timestampB' or noTimestamps must be specified in '".concat(n,"'."))}},1===(Ce=Re).length&&(Te=Ce,Ce=function(t,e){return Re(Te(t),e)});var Oe={value:function(){}};function Ne(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ae(r)}function Ae(t){this._=t}function Pe(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Me(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function De(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Oe,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ae.prototype=Ne.prototype={constructor:Ae,on:function(t,e){var n,r=this._,i=Pe(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=De(r[n],t.name,e);else if(null==e)for(n in r)r[n]=De(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=Me(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ae(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Ie="http://www.w3.org/1999/xhtml",Le={svg:"http://www.w3.org/2000/svg",xhtml:Ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Be(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Le.hasOwnProperty(e)?{space:Le[e],local:t}:t}function Ue(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ie&&e.documentElement.namespaceURI===Ie?e.createElement(t):e.createElementNS(n,t)}}function He(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $e(t){var e=Be(t);return(e.local?He:Ue)(e)}function Fe(){}function ze(t){return null==t?Fe:function(){return this.querySelector(t)}}function Ve(){return[]}function qe(t){return null==t?Ve:function(){return this.querySelectorAll(t)}}function Ye(t){return function(){return this.matches(t)}}function We(t){return new Array(t.length)}function Xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Xe.prototype={constructor:Xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ge(t,e,n,r,i,a){for(var o,s=0,u=e.length,l=a.length;s<l;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Xe(t,a[s]);for(;s<u;++s)(o=e[s])&&(i[s]=o)}function Je(t,e,n,r,i,a,o){var s,u,l,c={},f=e.length,h=a.length,p=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(p[s]=l="$"+o.call(u,u.__data__,s,e),l in c?i[s]=u:c[l]=u);for(s=0;s<h;++s)(u=c[l="$"+o.call(t,a[s],s,a)])?(r[s]=u,u.__data__=a[s],c[l]=null):n[s]=new Xe(t,a[s]);for(s=0;s<f;++s)(u=e[s])&&c[p[s]]===u&&(i[s]=u)}function Ke(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ze(t){return function(){this.removeAttribute(t)}}function Qe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tn(t,e){return function(){this.setAttribute(t,e)}}function en(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function rn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function an(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function on(t){return function(){this.style.removeProperty(t)}}function sn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function un(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ln(t,e){return t.style.getPropertyValue(e)||an(t).getComputedStyle(t,null).getPropertyValue(e)}function cn(t){return function(){delete this[t]}}function fn(t,e){return function(){this[t]=e}}function hn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function pn(t){return t.trim().split(/^|\s+/)}function dn(t){return t.classList||new mn(t)}function mn(t){this._node=t,this._names=pn(t.getAttribute("class")||"")}function vn(t,e){for(var n=dn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function yn(t,e){for(var n=dn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function gn(t){return function(){vn(this,t)}}function _n(t){return function(){yn(this,t)}}function bn(t,e){return function(){(e.apply(this,arguments)?vn:yn)(this,t)}}function wn(){this.textContent=""}function xn(t){return function(){this.textContent=t}}function En(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Sn(){this.innerHTML=""}function kn(t){return function(){this.innerHTML=t}}function Cn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Tn(){this.nextSibling&&this.parentNode.appendChild(this)}function jn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rn(){return null}function On(){var t=this.parentNode;t&&t.removeChild(this)}function Nn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function An(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}mn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Pn={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Pn={mouseenter:"mouseover",mouseleave:"mouseout"}));function Mn(t,e,n){return t=Dn(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Dn(t,e,n){return function(r){try{t.call(this,this.__data__,e,n)}finally{}}}function In(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Ln(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Bn(t,e,n){var r=Pn.hasOwnProperty(t.type)?Mn:Dn;return function(i,a,o){var s,u=this.__on,l=r(e,a,o);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Un(t,e,n){var r=an(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Hn(t,e){return function(){return Un(this,t,e)}}function $n(t,e){return function(){return Un(this,t,e.apply(this,arguments))}}var Fn=[null];function zn(t,e){this._groups=t,this._parents=e}function Vn(){return new zn([[document.documentElement]],Fn)}function qn(t){return"string"==typeof t?new zn([[document.querySelector(t)]],[document.documentElement]):new zn([[t]],Fn)}function Yn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Wn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Xn(){}zn.prototype=Vn.prototype={constructor:zn,select:function(t){"function"!=typeof t&&(t=ze(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(a=s[c])&&(o=t.call(a,a.__data__,c,s))&&("__data__"in a&&(o.__data__=a.__data__),l[c]=o);return new zn(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=qe(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],u=s.length,l=0;l<u;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),i.push(o));return new zn(r,i)},filter:function(t){"function"!=typeof t&&(t=Ye(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new zn(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each((function(t){d[++c]=t})),d;var n,r=e?Je:Ge,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,s=new Array(o),u=new Array(o),l=new Array(o),c=0;c<o;++c){var f=i[c],h=a[c],p=h.length,d=t.call(f,f&&f.__data__,c,i),m=d.length,v=u[c]=new Array(m),y=s[c]=new Array(m);r(f,h,v,y,l[c]=new Array(p),d,e);for(var g,_,b=0,w=0;b<m;++b)if(g=v[b]){for(b>=w&&(w=b+1);!(_=y[w])&&++w<m;);g._next=_||null}}return(s=new zn(s,i))._enter=u,s._exit=l,s},enter:function(){return new zn(this._enter||this._groups.map(We),this._parents)},exit:function(){return new zn(this._exit||this._groups.map(We),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=e[s],c=n[s],f=l.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=l[p]||c[p])&&(h[p]=u);for(;s<r;++s)o[s]=e[s];return new zn(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ke);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],u=s.length,l=i[a]=new Array(u),c=0;c<u;++c)(o=s[c])&&(l[c]=o);l.sort(e)}return new zn(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Be(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Qe:Ze:"function"==typeof e?n.local?rn:nn:n.local?en:tn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?on:"function"==typeof e?un:sn)(t,e,null==n?"":n)):ln(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?cn:"function"==typeof e?hn:fn)(t,e)):this.node()[t]},classed:function(t,e){var n=pn(t+"");if(arguments.length<2){for(var r=dn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?bn:e?gn:_n)(n,e))},text:function(t){return arguments.length?this.each(null==t?wn:("function"==typeof t?En:xn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Sn:("function"==typeof t?Cn:kn)(t)):this.node().innerHTML},raise:function(){return this.each(Tn)},lower:function(){return this.each(jn)},append:function(t){var e="function"==typeof t?t:$e(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:$e(t),r=null==e?Rn:"function"==typeof e?e:ze(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(On)},clone:function(t){return this.select(t?An:Nn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=In(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?Bn:Ln,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?$n:Hn)(t,e))}};var Gn=1/.7,Jn="\\s*([+-]?\\d+)\\s*",Kn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qn=/^#([0-9a-f]{3,8})$/,tr=new RegExp("^rgb\\("+[Jn,Jn,Jn]+"\\)$"),er=new RegExp("^rgb\\("+[Zn,Zn,Zn]+"\\)$"),nr=new RegExp("^rgba\\("+[Jn,Jn,Jn,Kn]+"\\)$"),rr=new RegExp("^rgba\\("+[Zn,Zn,Zn,Kn]+"\\)$"),ir=new RegExp("^hsl\\("+[Kn,Zn,Zn]+"\\)$"),ar=new RegExp("^hsla\\("+[Kn,Zn,Zn,Kn]+"\\)$"),or={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function sr(){return this.rgb().formatHex()}function ur(){return this.rgb().formatRgb()}function lr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?cr(e):3===n?new dr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?fr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?fr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=tr.exec(t))?new dr(e[1],e[2],e[3],1):(e=er.exec(t))?new dr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=nr.exec(t))?fr(e[1],e[2],e[3],e[4]):(e=rr.exec(t))?fr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ir.exec(t))?gr(e[1],e[2]/100,e[3]/100,1):(e=ar.exec(t))?gr(e[1],e[2]/100,e[3]/100,e[4]):or.hasOwnProperty(t)?cr(or[t]):"transparent"===t?new dr(NaN,NaN,NaN,0):null}function cr(t){return new dr(t>>16&255,t>>8&255,255&t,1)}function fr(t,e,n,r){return r<=0&&(t=e=n=NaN),new dr(t,e,n,r)}function hr(t){return t instanceof Xn||(t=lr(t)),t?new dr((t=t.rgb()).r,t.g,t.b,t.opacity):new dr}function pr(t,e,n,r){return 1===arguments.length?hr(t):new dr(t,e,n,null==r?1:r)}function dr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function mr(){return"#"+yr(this.r)+yr(this.g)+yr(this.b)}function vr(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function yr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function gr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new br(t,e,n,r)}function _r(t){if(t instanceof br)return new br(t.h,t.s,t.l,t.opacity);if(t instanceof Xn||(t=lr(t)),!t)return new br;if(t instanceof br)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new br(o,s,u,t.opacity)}function br(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function wr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function xr(t){return function(){return t}}function Er(t){return 1==(t=+t)?Sr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):xr(isNaN(e)?n:e)}}function Sr(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):xr(isNaN(t)?e:t)}Yn(Xn,lr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHsl:function(){return _r(this).formatHsl()},formatRgb:ur,toString:ur}),Yn(dr,pr,Wn(Xn,{brighter:function(t){return t=null==t?Gn:Math.pow(Gn,t),new dr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new dr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatRgb:vr,toString:vr})),Yn(br,(function(t,e,n,r){return 1===arguments.length?_r(t):new br(t,e,n,null==r?1:r)}),Wn(Xn,{brighter:function(t){return t=null==t?Gn:Math.pow(Gn,t),new br(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new br(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dr(wr(t>=240?t-240:t+120,i,r),wr(t,i,r),wr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var kr=function t(e){var n=Er(e);function r(t,e){var r=n((t=pr(t)).r,(e=pr(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Sr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Cr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Tr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jr=new RegExp(Tr.source,"g");function Rr(t,e){var n,r,i,a=Tr.lastIndex=jr.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=Tr.exec(t))&&(r=jr.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Cr(n,r)})),a=jr.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}var Or,Nr,Ar,Pr,Mr=180/Math.PI,Dr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ir(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Mr,skewX:Math.atan(u)*Mr,scaleX:o,scaleY:s}}function Lr(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:Cr(t,i)},{i:u-2,x:Cr(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Cr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Cr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Cr(t,n)},{i:s-2,x:Cr(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Br,Ur,Hr=Lr((function(t){return"none"===t?Dr:(Or||(Or=document.createElement("DIV"),Nr=document.documentElement,Ar=document.defaultView),Or.style.transform=t,t=Ar.getComputedStyle(Nr.appendChild(Or),null).getPropertyValue("transform"),Nr.removeChild(Or),Ir(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),$r=Lr((function(t){return null==t?Dr:(Pr||(Pr=document.createElementNS("http://www.w3.org/2000/svg","g")),Pr.setAttribute("transform",t),(t=Pr.transform.baseVal.consolidate())?Ir((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Dr)}),", ",")",")"),Fr=0,zr=0,Vr=0,qr=0,Yr=0,Wr=0,Xr="object"==typeof performance&&performance.now?performance:Date,Gr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jr(){return Yr||(Gr(Kr),Yr=Xr.now()+Wr)}function Kr(){Yr=0}function Zr(){this._call=this._time=this._next=null}function Qr(t,e,n){var r=new Zr;return r.restart(t,e,n),r}function ti(){Yr=(qr=Xr.now())+Wr,Fr=zr=0;try{!function(){Jr(),++Fr;for(var t,e=Br;e;)(t=Yr-e._time)>=0&&e._call.call(null,t),e=e._next;--Fr}()}finally{Fr=0,function(){var t,e,n=Br,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Br=e);Ur=t,ni(r)}(),Yr=0}}function ei(){var t=Xr.now(),e=t-qr;e>1e3&&(Wr-=e,qr=t)}function ni(t){Fr||(zr&&(zr=clearTimeout(zr)),t-Yr>24?(t<1/0&&(zr=setTimeout(ti,t-Xr.now()-Wr)),Vr&&(Vr=clearInterval(Vr))):(Vr||(qr=Xr.now(),Vr=setInterval(ei,1e3)),Fr=1,Gr(ti)))}function ri(t,e,n){var r=new Zr;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}Zr.prototype=Qr.prototype={constructor:Zr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Jr():+n)+(null==e?0:+e),this._next||Ur===this||(Ur?Ur._next=this:Br=this,Ur=this),this._call=t,this._time=n,ni()},stop:function(){this._call&&(this._call=null,this._time=1/0,ni())}};var ii=Ne("start","end","cancel","interrupt"),ai=[];function oi(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var l,c,f,h;if(1!==n.state)return u();for(l in i)if((h=i[l]).name===n.name){if(3===h.state)return ri(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[l]):+l<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[l])}if(ri((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Qr(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:ii,tween:ai,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function si(t,e){var n=li(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function ui(t,e){var n=li(t,e);if(n.state>3)throw new Error("too late; already running");return n}function li(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ci(t,e){var n,r;return function(){var i=ui(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function fi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=ui(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function hi(t,e,n){var r=t._id;return t.each((function(){var t=ui(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return li(t,r).value[e]}}function pi(t,e){var n;return("number"==typeof e?Cr:e instanceof lr?kr:(n=lr(e))?(e=n,kr):Rr)(t,e)}function di(t){return function(){this.removeAttribute(t)}}function mi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vi(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function yi(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function gi(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttribute(t)}}function _i(t,e,n){var r,i,a;return function(){var o,s,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function bi(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function xi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&wi(t,i)),n}return i._value=e,i}function Ei(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&bi(t,i)),n}return i._value=e,i}function Si(t,e){return function(){si(this,t).delay=+e.apply(this,arguments)}}function ki(t,e){return e=+e,function(){si(this,t).delay=e}}function Ci(t,e){return function(){ui(this,t).duration=+e.apply(this,arguments)}}function Ti(t,e){return e=+e,function(){ui(this,t).duration=e}}function ji(t,e){if("function"!=typeof e)throw new Error;return function(){ui(this,t).ease=e}}function Ri(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?si:ui;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}var Oi=Vn.prototype.constructor;function Ni(t){return function(){this.style.removeProperty(t)}}function Ai(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Pi(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Ai(t,a,n)),r}return a._value=e,a}function Mi(t){return function(e){this.textContent=t.call(this,e)}}function Di(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Mi(r)),e}return r._value=t,r}var Ii=0;function Li(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Bi(){return++Ii}var Ui=Vn.prototype;Li.prototype={constructor:Li,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ze(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,u,l=r[o],c=l.length,f=a[o]=new Array(c),h=0;h<c;++h)(s=l[h])&&(u=t.call(s,s.__data__,h,l))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,oi(f[h],e,n,h,f,li(s,n)));return new Li(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=qe(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var h,p=t.call(u,u.__data__,f,l),d=li(u,n),m=0,v=p.length;m<v;++m)(h=p[m])&&oi(h,e,n,m,p,d);a.push(p),o.push(u)}return new Li(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Ye(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,u=r[i]=[],l=0;l<s;++l)(a=o[l])&&t.call(a,a.__data__,l,o)&&u.push(a);return new Li(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u,l=e[s],c=n[s],f=l.length,h=o[s]=new Array(f),p=0;p<f;++p)(u=l[p]||c[p])&&(h[p]=u);for(;s<r;++s)o[s]=e[s];return new Li(o,this._parents,this._name,this._id)},selection:function(){return new Oi(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Bi(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)if(o=s[l]){var c=li(o,e);oi(o,t,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Li(r,this._parents,t,n)},call:Ui.call,nodes:Ui.nodes,node:Ui.node,size:Ui.size,empty:Ui.empty,each:Ui.each,on:function(t,e){var n=this._id;return arguments.length<2?li(this.node(),n).on.on(t):this.each(Ri(n,t,e))},attr:function(t,e){var n=Be(t),r="transform"===n?$r:pi;return this.attrTween(t,"function"==typeof e?(n.local?_i:gi)(n,r,hi(this,"attr."+t,e)):null==e?(n.local?mi:di)(n):(n.local?yi:vi)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Be(t);return this.tween(n,(r.local?xi:Ei)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Hr:pi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=ln(this,t),o=(this.style.removeProperty(t),ln(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Ni(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=ln(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=ln(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}(t,r,hi(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var u=ui(this,t),l=u.on,c=null==u.value[o]?a||(a=Ni(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=ln(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Pi(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(hi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Di(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=li(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?ci:fi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Si:ki)(e,t)):li(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ci:Ti)(e,t)):li(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(ji(e,t)):li(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=ui(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e}))}))}};var Hi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function $i(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Hi.time=Jr(),Hi;return n}Vn.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},Vn.prototype.transition=function(t){var e,n;t instanceof Li?(e=t._id,t=t._name):(e=Bi(),(n=Hi).time=Jr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],u=s.length,l=0;l<u;++l)(o=s[l])&&oi(o,t,e,l,s,n||$i(o,e));return new Li(r,this._parents,t,e)};var Fi=Math.PI,zi=2*Fi,Vi=zi-1e-6;function qi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Yi(){return new qi}qi.prototype=Yi.prototype={constructor:qi,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,u=r-e,l=a-t,c=o-e,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var h=n-a,p=r-o,d=s*s+u*u,m=h*h+p*p,v=Math.sqrt(d),y=Math.sqrt(f),g=i*Math.tan((Fi-Math.acos((d+f-m)/(2*v*y)))/2),_=g/y,b=g/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*l)+","+(e+_*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>l*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=t+o,l=e+s,c=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%zi+zi),f>Vi?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Fi)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Wi(){}function Xi(t,e){var n=new Wi;if(t instanceof Wi)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Gi(){}Wi.prototype=Xi.prototype={constructor:Wi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ji=Xi.prototype;function Ki(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Zi(t,e){var n,r,i,a,o,s=new na(t),u=+t.value&&(s.value=t.value),l=[s];for(null==e&&(e=Qi);n=l.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)l.push(r=n.children[a]=new na(i[a])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(ea)}function Qi(t){return t.children}function ta(t){t.data=t.data.data}function ea(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function na(t){this.data=t,this.depth=this.height=0,this.parent=null}function ra(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ia(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(e,a)),r&&i.eachBefore(ra),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}function aa(){return Math.random()}Gi.prototype={constructor:Gi,has:Ji.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ji.remove,clear:Ji.clear,values:Ji.keys,size:Ji.size,empty:Ji.empty,each:Ji.each},na.prototype=Zi.prototype={constructor:na,count:function(){return this.eachAfter(Ki)},each:function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Zi(this).eachBefore(ta)}},function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(aa);var oa=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*e()-1,a=2*e()-1,i=r*r+a*a}while(!i||i>1);return t+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(aa);!function t(e){function n(){var t=oa.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(aa);var sa=function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(aa);function ua(t){return function(){return t}}!function t(e){function n(t){var n=sa.source(e)(t);return function(){return n()/t}}return n.source=t,n}(aa),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(aa);var la=Math.abs,ca=Math.atan2,fa=Math.cos,ha=Math.max,pa=Math.min,da=Math.sin,ma=Math.sqrt,va=Math.PI,ya=va/2,ga=2*va;function _a(t){return t>1?0:t<-1?va:Math.acos(t)}function ba(t){return t>=1?ya:t<=-1?-ya:Math.asin(t)}function wa(t){return t.innerRadius}function xa(t){return t.outerRadius}function Ea(t){return t.startAngle}function Sa(t){return t.endAngle}function ka(t){return t&&t.padAngle}function Ca(t,e,n,r,i,a,o,s){var u=n-t,l=r-e,c=o-i,f=s-a,h=f*u-c*l;if(!(h*h<1e-12))return[t+(h=(c*(e-a)-f*(t-i))/h)*u,e+h*l]}function Ta(t,e,n,r,i,a,o){var s=t-n,u=e-r,l=(o?a:-a)/ma(s*s+u*u),c=l*u,f=-l*s,h=t+c,p=e+f,d=n+c,m=r+f,v=(h+d)/2,y=(p+m)/2,g=d-h,_=m-p,b=g*g+_*_,w=i-a,x=h*m-d*p,E=(_<0?-1:1)*ma(ha(0,w*w*b-x*x)),S=(x*_-g*E)/b,k=(-x*g-_*E)/b,C=(x*_+g*E)/b,T=(-x*g+_*E)/b,j=S-v,R=k-y,O=C-v,N=T-y;return j*j+R*R>O*O+N*N&&(S=C,k=T),{cx:S,cy:k,x01:-c,y01:-f,x11:S*(i/w-1),y11:k*(i/w-1)}}function ja(){this._=null}function Ra(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Oa(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Na(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Aa(t){for(;t.L;)t=t.L;return t}function Pa(t,e,n,r){var i=[null,null],a=ro.push(i)-1;return i.left=t,i.right=e,n&&Da(i,t,e,n),r&&Da(i,e,t,r),eo[t.index].halfedges.push(a),eo[e.index].halfedges.push(a),i}function Ma(t,e,n){var r=[e,n];return r.left=t,r}function Da(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Ia(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=0,f=1,h=s[0]-u,p=s[1]-l;if(a=e-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=r-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}if(a=n-l,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>c&&(c=a)}if(a=i-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<f&&(f=a)}return!(c>0||f<1)||(c>0&&(t[0]=[u+c*h,l+c*p]),f<1&&(t[1]=[u+f*h,l+f*p]),!0)}}}}}function La(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,f=l[0],h=l[1],p=c[0],d=c[1],m=(f+p)/2,v=(h+d)/2;if(d===h){if(m<e||m>=r)return;if(f>p){if(u){if(u[1]>=i)return}else u=[m,n];a=[m,i]}else{if(u){if(u[1]<n)return}else u=[m,i];a=[m,n]}}else if(s=v-(o=(f-p)/(d-h))*m,o<-1||o>1)if(f>p){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(h<d){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}function Ba(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ua(t,e){return e[+(e.left!==t.site)]}function Ha(t,e){return e[+(e.left===t.site)]}ja.prototype={constructor:ja,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Aa(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Oa(this,n),n=(t=n).U),n.C=!1,r.C=!0,Na(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Na(this,n),n=(t=n).U),n.C=!1,r.C=!0,Oa(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Aa(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Oa(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Oa(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Oa(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var $a,Fa=[];function za(){Ra(this),this.x=this.y=this.arc=this.site=this.cy=null}function Va(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],s=i[1],u=r[0]-o,l=r[1]-s,c=a[0]-o,f=a[1]-s,h=2*(u*f-l*c);if(!(h>=-ao)){var p=u*u+l*l,d=c*c+f*f,m=(f*p-l*d)/h,v=(u*d-c*p)/h,y=Fa.pop()||new za;y.arc=t,y.site=i,y.x=m+o,y.y=(y.cy=v+s)+Math.sqrt(m*m+v*v),t.circle=y;for(var g=null,_=no._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){g=_.P;break}_=_.L}else{if(!_.R){g=_;break}_=_.R}no.insert(g,y),g||($a=y)}}}}function qa(t){var e=t.circle;e&&(e.P||($a=e.N),no.remove(e),Fa.push(e),Ra(e),t.circle=null)}var Ya=[];function Wa(){Ra(this),this.edge=this.site=this.circle=null}function Xa(t){var e=Ya.pop()||new Wa;return e.site=t,e}function Ga(t){qa(t),to.remove(t),Ya.push(t),Ra(t)}function Ja(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,s=[t];Ga(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<io&&Math.abs(r-u.circle.cy)<io;)a=u.P,s.unshift(u),Ga(u),u=a;s.unshift(u),qa(u);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<io&&Math.abs(r-l.circle.cy)<io;)o=l.N,s.push(l),Ga(l),l=o;s.push(l),qa(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Da(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Pa(u.site,l.site,null,i),Va(u),Va(l)}function Ka(t){for(var e,n,r,i,a=t[0],o=t[1],s=to._;s;)if((r=Za(s,o)-a)>io)s=s.L;else{if(!((i=a-Qa(s,o))>io)){r>-io?(e=s.P,n=s):i>-io?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){eo[t.index]={site:t,halfedges:[]}}(t);var u=Xa(t);if(to.insert(e,u),e||n){if(e===n)return qa(e),n=Xa(e.site),to.insert(u,n),u.edge=n.edge=Pa(e.site,u.site),Va(e),void Va(n);if(n){qa(e),qa(n);var l=e.site,c=l[0],f=l[1],h=t[0]-c,p=t[1]-f,d=n.site,m=d[0]-c,v=d[1]-f,y=2*(h*v-p*m),g=h*h+p*p,_=m*m+v*v,b=[(v*g-p*_)/y+c,(h*_-m*g)/y+f];Da(n.edge,l,d,b),u.edge=Pa(l,t,null,b),n.edge=Pa(t,d,null,b),Va(e),Va(n)}else u.edge=Pa(e.site,u.site)}}function Za(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function Qa(t,e){var n=t.N;if(n)return Za(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var to,eo,no,ro,io=1e-6,ao=1e-12;function oo(t,e){return e[1]-t[1]||e[0]-t[0]}function so(t,e){var n,r,i,a=t.sort(oo).pop();for(ro=[],eo=new Array(t.length),to=new ja,no=new ja;;)if(i=$a,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Ka(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Ja(i.arc)}if(function(){for(var t,e,n,r,i=0,a=eo.length;i<a;++i)if((t=eo[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=Ba(t,ro[e[n]]);for(o.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[o[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var o=+e[0][0],s=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,a=ro.length;a--;)La(i=ro[a],t,e,n,r)&&Ia(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>io||Math.abs(i[0][1]-i[1][1])>io)||delete ro[a]}(o,s,u,l),function(t,e,n,r){var i,a,o,s,u,l,c,f,h,p,d,m,v=eo.length,y=!0;for(i=0;i<v;++i)if(a=eo[i]){for(o=a.site,s=(u=a.halfedges).length;s--;)ro[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)d=(p=Ha(a,ro[u[s]]))[0],m=p[1],f=(c=Ua(a,ro[u[++s%l]]))[0],h=c[1],(Math.abs(d-f)>io||Math.abs(m-h)>io)&&(u.splice(s,0,ro.push(Ma(o,p,Math.abs(d-t)<io&&r-m>io?[t,Math.abs(f-t)<io?h:r]:Math.abs(m-r)<io&&n-d>io?[Math.abs(h-r)<io?f:n,r]:Math.abs(d-n)<io&&m-e>io?[n,Math.abs(f-n)<io?h:e]:Math.abs(m-e)<io&&d-t>io?[Math.abs(h-e)<io?f:t,e]:null))-1),++l);l&&(y=!1)}if(y){var g,_,b,w=1/0;for(i=0,y=null;i<v;++i)(a=eo[i])&&(b=(g=(o=a.site)[0]-t)*g+(_=o[1]-e)*_)<w&&(w=b,y=a);if(y){var x=[t,e],E=[t,r],S=[n,r],k=[n,e];y.halfedges.push(ro.push(Ma(o=y.site,x,E))-1,ro.push(Ma(o,E,S))-1,ro.push(Ma(o,S,k))-1,ro.push(Ma(o,k,x))-1)}}for(i=0;i<v;++i)(a=eo[i])&&(a.halfedges.length||delete eo[i])}(o,s,u,l)}this.edges=ro,this.cells=eo,to=no=ro=eo=null}function uo(t,e,n){this.k=t,this.x=e,this.y=n}so.prototype={constructor:so,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ua(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,u,l,c=n.site,f=-1,h=e[i[a-1]],p=h.left===c?h.right:h.left;++f<a;)o=p,p=(h=e[i[f]]).left===c?h.right:h.left,o&&p&&r<o.index&&r<p.index&&(u=o,l=p,((s=c)[0]-l[0])*(u[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0)&&t.push([c.data,o.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],f=u*u+l*l;f<c&&(c=f,o=s.index)}}))}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}},uo.prototype={constructor:uo,scale:function(t){return 1===t?this:new uo(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new uo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new uo(1,0,0),uo.prototype;var lo=/\s/;var co=function(t){for(var e=t.length;e--&&lo.test(t.charAt(e)););return e},fo=/^\s+/;var ho=function(t){return t?t.slice(0,co(t)+1).replace(fo,""):t},po=/^[-+]0x[0-9a-f]+$/i,mo=/^0b[01]+$/i,vo=/^0o[0-7]+$/i,yo=parseInt;var go=function(t){if("number"==typeof t)return t;if(bt(t))return NaN;if(Rt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Rt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ho(t);var n=mo.test(t);return n||vo.test(t)?yo(t.slice(2),n?2:8):po.test(t)?NaN:+t};var _o=function(t){return t?Infinity===(t=go(t))||-Infinity===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var bo=function(t){var e=_o(t),n=e%1;return e==e?n?e-n:e:0},wo=Array.isArray,xo=lt?lt.prototype:void 0,Eo=xo?xo.toString:void 0;var So=function t(e){if("string"==typeof e)return e;if(wo(e))return Qt(e,t)+"";if(bt(e))return Eo?Eo.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n};var ko=function(t){return null==t?"":So(t)},Co=ut.isFinite,To=Math.min;var jo=function(t){var e=Math[t];return function(t,n){if(t=go(t),(n=null==n?0:To(bo(n),292))&&Co(t)){var r=(ko(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return+((r=(ko(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("round");function Ro(){var t,e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return function(t){var e=document.getElementById("root-cell-tooltip");e&&e.setAttribute("style","top:".concat(.4*t,"px; width:").concat(.4*t,"px; height:").concat(.22*t,"px; font-size: ").concat(.004*t,"em;"))}(t=n<e?.45*n:.45*e),t}function Oo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.captures?t.captures:[e,t.simhash]}function No(t){if(-1!==t.similarity)return"".concat(t.name," - Differences: ").concat(jo(t.similarity,2),"%")}var Ao=function(e){a(o,E.Component);var i=c(o);function o(e){var n;return t(this,o),r(u(n=i.call(this,e)),"state",{hint:""}),n.chartRef=E.createRef(),n}return n(o,[{key:"componentDidMount",value:function(){var t=Ro(),e=Ro(),n=Math.min(t,e)/2,r=qn(this.chartRef.current).attr("width",t).attr("height",e).append("g").attr("transform","translate("+t/2+","+e/2+")"),i=ia().size([2*Math.PI,n]),a=Zi(this.props.simhashData).sum((function(t){return 5}));i(a);var o=function(){var t=wa,e=xa,n=ua(0),r=null,i=Ea,a=Sa,o=ka,s=null;function u(){var u,l,c=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-ya,p=a.apply(this,arguments)-ya,d=la(p-h),m=p>h;if(s||(s=u=Yi()),f<c&&(l=f,f=c,c=l),f>1e-12)if(d>ga-1e-12)s.moveTo(f*fa(h),f*da(h)),s.arc(0,0,f,h,p,!m),c>1e-12&&(s.moveTo(c*fa(p),c*da(p)),s.arc(0,0,c,p,h,m));else{var v,y,g=h,_=p,b=h,w=p,x=d,E=d,S=o.apply(this,arguments)/2,k=S>1e-12&&(r?+r.apply(this,arguments):ma(c*c+f*f)),C=pa(la(f-c)/2,+n.apply(this,arguments)),T=C,j=C;if(k>1e-12){var R=ba(k/c*da(S)),O=ba(k/f*da(S));(x-=2*R)>1e-12?(b+=R*=m?1:-1,w-=R):(x=0,b=w=(h+p)/2),(E-=2*O)>1e-12?(g+=O*=m?1:-1,_-=O):(E=0,g=_=(h+p)/2)}var N=f*fa(g),A=f*da(g),P=c*fa(w),M=c*da(w);if(C>1e-12){var D,I=f*fa(_),L=f*da(_),B=c*fa(b),U=c*da(b);if(d<va&&(D=Ca(N,A,B,U,I,L,P,M))){var H=N-D[0],$=A-D[1],F=I-D[0],z=L-D[1],V=1/da(_a((H*F+$*z)/(ma(H*H+$*$)*ma(F*F+z*z)))/2),q=ma(D[0]*D[0]+D[1]*D[1]);T=pa(C,(c-q)/(V-1)),j=pa(C,(f-q)/(V+1))}}E>1e-12?j>1e-12?(v=Ta(B,U,N,A,f,j,m),y=Ta(I,L,P,M,f,j,m),s.moveTo(v.cx+v.x01,v.cy+v.y01),j<C?s.arc(v.cx,v.cy,j,ca(v.y01,v.x01),ca(y.y01,y.x01),!m):(s.arc(v.cx,v.cy,j,ca(v.y01,v.x01),ca(v.y11,v.x11),!m),s.arc(0,0,f,ca(v.cy+v.y11,v.cx+v.x11),ca(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,j,ca(y.y11,y.x11),ca(y.y01,y.x01),!m))):(s.moveTo(N,A),s.arc(0,0,f,g,_,!m)):s.moveTo(N,A),c>1e-12&&x>1e-12?T>1e-12?(v=Ta(P,M,I,L,c,-T,m),y=Ta(N,A,B,U,c,-T,m),s.lineTo(v.cx+v.x01,v.cy+v.y01),T<C?s.arc(v.cx,v.cy,T,ca(v.y01,v.x01),ca(y.y01,y.x01),!m):(s.arc(v.cx,v.cy,T,ca(v.y01,v.x01),ca(v.y11,v.x11),!m),s.arc(0,0,c,ca(v.cy+v.y11,v.cx+v.x11),ca(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,T,ca(y.y11,y.x11),ca(y.y01,y.x01),!m))):s.arc(0,0,c,w,b,m):s.lineTo(P,M)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-va/2;return[fa(r)*n,da(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ua(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ua(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:ua(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:ua(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:ua(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:ua(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:ua(+t),u):o},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return t.y0})).outerRadius((function(t){return t.y1})),s=this;r.selectAll("path").data(a.descendants()).enter().append("path").attr("display",(function(t){return t.depth?null:"none"})).attr("d",o).style("stroke","#fff").style("fill",(function(t){return t.data.clr})).on("mouseover",(function(t){qn(this).style("cursor","pointer").style("stroke","black"),s.setState({hint:No(t.data)})})).on("mouseleave",(function(t){qn(this).style("cursor","default").style("stroke",""),s.setState({hint:""})})).on("click",(function(t){if(t.data.timestamp!==s.props.simhashData.timestamp){var e=s.props.urlPrefix+t.data.timestamp+"/"+s.props.simhashData.timestamp+"/"+s.props.url;window.open(e,"_blank")}}))}},{key:"render",value:function(){return E.createElement(E.Fragment,null,E.createElement("p",{className:"text-center",style:{marginTop:"10px"}},this.state.hint,"  "),E.createElement("div",{className:"text-center"},E.createElement("svg",{ref:this.chartRef})))}}]),o}();r(Ao,"propTypes",{simhashData:L.object,url:L.string,urlPrefix:L.string});var Po=v((function(t,e){t.exports=function(){function t(t){return t.slice().sort((function(t,e){return t-e}))}function e(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}function n(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],a=0;a<e;a++)i.push(0);n.push(i)}return n}function r(t,e,n,r){var i;if(t>0){var a=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*a*a}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function i(t,e,n,a,o,s,u){if(!(t>e)){var l=Math.floor((t+e)/2);a[n][l]=a[n-1][l-1],o[n][l]=l;var c=n;t>n&&(c=Math.max(c,o[n][t-1]||0)),c=Math.max(c,o[n-1][l]||0);var f,h,p,d=l-1;e<a.length-1&&(d=Math.min(d,o[n][e+1]||0));for(var m=d;m>=c&&!((f=r(m,l,s,u))+a[n-1][c-1]>=a[n][l]);--m)(h=r(c,l,s,u)+a[n-1][c-1])<a[n][l]&&(a[n][l]=h,o[n][l]=c),c++,(p=f+a[n-1][m-1])<a[n][l]&&(a[n][l]=p,o[n][l]=m);i(t,l-1,n,a,o,s,u),i(l+1,e,n,a,o,s,u)}}function a(t,e,n){for(var a=e[0].length,o=new Array(a),s=new Array(a),u=t[Math.floor(a/2)],l=0;l<a;++l)0===l?(o[0]=t[0]-u,s[0]=(t[0]-u)*(t[0]-u)):(o[l]=o[l-1]+t[l]-u,s[l]=s[l-1]+(t[l]-u)*(t[l]-u)),e[0][l]=r(0,l,o,s),n[0][l]=0;for(var c=1;c<e.length;++c)i(c<e.length-1?c:a-1,a-1,c,e,n,o,s)}function o(r,i){if(i>r.length)throw new Error("Cannot generate more classes than there are data values");var o=r.length,s=t(r),u=e(s);if(1===u)return[s];var l=n(i=Math.min(u,i),o),c=n(i,o);a(s,l,c);for(var f=[],h=c[0].length-1,p=c.length-1;p>=0;p--){var d=c[p][h];f[p]=s[d],p>0&&(h=d-1)}return f}var s=o;function u(){var t=!1,e=[],n=[],r=[],i=function(e){if(t){for(var i=r.length-1;i>=0;i--)if(e>=r[i])return n[i];return n[0]}};function a(){if(!(n.length<=2)){var i=s(e,Math.min(e.length,n.length));t=0!==i.length,r=[];for(var a=0;a<i.length;a++)r.push(i[a])}}return i.domain=function(){return arguments.length?(e=arguments[0],a(),i):e},i.range=function(){if(arguments.length){var t=arguments[0],e=t.length!==n.length;return n=t,e&&a(),i}return n},i.invertExtent=function(t){for(var e=NaN,i=NaN,a=0;a<n.length;a++)if(n[a]===t){e=r[a],i=a+1<n.length?r[a+1]:NaN;break}return[e,i]},i.clusters=function(){return r.slice(1)},i.export=function(){return{isReady:t,domain:e,range:n,breakpoints:r}},i.import=function(a){if(!a)throw new Error("Import requires parameters");return t=a.isReady,e=a.domain,n=a.range,r=a.breakpoints,i},i.copy=function(){return u().domain(e).range(n)},i}return"object"==typeof d3&&(d3.scaleCluster=u),u}()}));B(".heat-map-legend-bar {\n    width: 10px;\n    margin: 0 1px;\n    transition: height .2s;\n}\n\n.heat-map-legend-summary {\n    display: flex;\n    align-items: center;\n    height: 20px\n}\n\n.heat-map-legend {\n    align-self: flex-end;\n    display: flex;\n    align-items: baseline;\n    font-size: 12px;\n    float: right;\n}\n\n.heat-map-legend-summary-min-caption {\n    width: 32px;\n    text-align: right;\n}\n\n.heat-map-legend-caption {\n    margin: 0 8px;\n}\n\n.heat-map-legend-summary-graphics {\n    display: flex;\n    margin: 0 8px;\n    height: 20px;\n}\n\n.sunburst-container{\n    margin: auto;\n    width: 50%;\n}\n\n.rv-sunburst {\n    margin: 0 auto;\n}\n\n#calcButton {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n}\n\n.rv-xy-plot__series, .rv-xy-plot__series--arc-path, .rv-sunburst__series--radial__arc {\n    cursor: pointer;\n}\n\n#root-cell-tooltip {\n    position: absolute;\n    display: inline-block;\n    margin: auto;\n    right: 0;\n    left: 0;\n    z-index: 10;\n    text-align: center;\n}\n\n.rv-hint {\n    z-index: 10;\n}\n");var Mo=Object.prototype;var Do=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Mo)};var Io=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Lo=Object.prototype.hasOwnProperty;var Bo=function(t){if(!Do(t))return Io(t);var e=[];for(var n in Object(t))Lo.call(t,n)&&"constructor"!=n&&e.push(n);return e},Uo=qt(ut,"DataView"),Ho=qt(ut,"Map"),$o=qt(ut,"Promise"),Fo=qt(ut,"Set"),zo=qt(ut,"WeakMap"),Vo=It(Uo),qo=It(Ho),Yo=It($o),Wo=It(Fo),Xo=It(zo),Go=gt;(Uo&&"[object DataView]"!=Go(new Uo(new ArrayBuffer(1)))||Ho&&"[object Map]"!=Go(new Ho)||$o&&"[object Promise]"!=Go($o.resolve())||Fo&&"[object Set]"!=Go(new Fo)||zo&&"[object WeakMap]"!=Go(new zo))&&(Go=function(t){var e=gt(t),n="[object Object]"==e?t.constructor:void 0,r=n?It(n):"";if(r)switch(r){case Vo:return"[object DataView]";case qo:return"[object Map]";case Yo:return"[object Promise]";case Wo:return"[object Set]";case Xo:return"[object WeakMap]"}return e});var Jo=Go;var Ko=function(t){return _t(t)&&"[object Arguments]"==gt(t)},Zo=Object.prototype,Qo=Zo.hasOwnProperty,ts=Zo.propertyIsEnumerable,es=Ko(function(){return arguments}())?Ko:function(t){return _t(t)&&Qo.call(t,"callee")&&!ts.call(t,"callee")};var ns=function(){return!1},rs=v((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?ut.Buffer:void 0,a=(i?i.isBuffer:void 0)||ns;t.exports=a})),is={};is["[object Float32Array]"]=is["[object Float64Array]"]=is["[object Int8Array]"]=is["[object Int16Array]"]=is["[object Int32Array]"]=is["[object Uint8Array]"]=is["[object Uint8ClampedArray]"]=is["[object Uint16Array]"]=is["[object Uint32Array]"]=!0,is["[object Arguments]"]=is["[object Array]"]=is["[object ArrayBuffer]"]=is["[object Boolean]"]=is["[object DataView]"]=is["[object Date]"]=is["[object Error]"]=is["[object Function]"]=is["[object Map]"]=is["[object Number]"]=is["[object Object]"]=is["[object RegExp]"]=is["[object Set]"]=is["[object String]"]=is["[object WeakMap]"]=!1;var as=function(t){return _t(t)&&ne(t.length)&&!!is[gt(t)]};var os=function(t){return function(e){return t(e)}},ss=v((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&ot.process,a=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=a})),us=ss&&ss.isTypedArray,ls=us?os(us):as,cs=Object.prototype.hasOwnProperty;var fs=function(t){if(null==t)return!0;if(re(t)&&(wo(t)||"string"==typeof t||"function"==typeof t.splice||rs(t)||ls(t)||es(t)))return!t.length;var e=Jo(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Do(t))return!Bo(t).length;for(var n in t)if(cs.call(t,n))return!1;return!0};var hs=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},ps=lt?lt.isConcatSpreadable:void 0;var ds=function(t){return wo(t)||es(t)||!!(ps&&t&&t[ps])};var ms=function t(e,n,r,i,a){var o=-1,s=e.length;for(r||(r=ds),a||(a=[]);++o<s;){var u=e[o];n>0&&r(u)?n>1?t(u,n-1,r,i,a):hs(a,u):i||(a[a.length]=u)}return a},vs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ys=/^\w*$/;var gs=function(t,e){if(wo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!bt(t))||(ys.test(t)||!vs.test(t)||null!=e&&t in Object(e))},_s=qt(Object,"create");var bs=function(){this.__data__=_s?_s(null):{},this.size=0};var ws=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xs=Object.prototype.hasOwnProperty;var Es=function(t){var e=this.__data__;if(_s){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return xs.call(e,t)?e[t]:void 0},Ss=Object.prototype.hasOwnProperty;var ks=function(t){var e=this.__data__;return _s?void 0!==e[t]:Ss.call(e,t)};var Cs=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_s&&void 0===e?"__lodash_hash_undefined__":e,this};function Ts(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ts.prototype.clear=bs,Ts.prototype.delete=ws,Ts.prototype.get=Es,Ts.prototype.has=ks,Ts.prototype.set=Cs;var js=Ts;var Rs=function(){this.__data__=[],this.size=0};var Os=function(t,e){return t===e||t!=t&&e!=e};var Ns=function(t,e){for(var n=t.length;n--;)if(Os(t[n][0],e))return n;return-1},As=Array.prototype.splice;var Ps=function(t){var e=this.__data__,n=Ns(e,t);return!(n<0)&&(n==e.length-1?e.pop():As.call(e,n,1),--this.size,!0)};var Ms=function(t){var e=this.__data__,n=Ns(e,t);return n<0?void 0:e[n][1]};var Ds=function(t){return Ns(this.__data__,t)>-1};var Is=function(t,e){var n=this.__data__,r=Ns(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Ls(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ls.prototype.clear=Rs,Ls.prototype.delete=Ps,Ls.prototype.get=Ms,Ls.prototype.has=Ds,Ls.prototype.set=Is;var Bs=Ls;var Us=function(){this.size=0,this.__data__={hash:new js,map:new(Ho||Bs),string:new js}};var Hs=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var $s=function(t,e){var n=t.__data__;return Hs(e)?n["string"==typeof e?"string":"hash"]:n.map};var Fs=function(t){var e=$s(this,t).delete(t);return this.size-=e?1:0,e};var zs=function(t){return $s(this,t).get(t)};var Vs=function(t){return $s(this,t).has(t)};var qs=function(t,e){var n=$s(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Ys(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ys.prototype.clear=Us,Ys.prototype.delete=Fs,Ys.prototype.get=zs,Ys.prototype.has=Vs,Ys.prototype.set=qs;var Ws=Ys;function Xs(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Xs.Cache||Ws),n}Xs.Cache=Ws;var Gs=Xs;var Js=function(t){var e=Gs(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e},Ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zs=/\\(\\)?/g,Qs=Js((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ks,(function(t,n,r,i){e.push(r?i.replace(Zs,"$1"):n||t)})),e}));var tu=function(t,e){return wo(t)?t:gs(t,e)?[t]:Qs(ko(t))};var eu=function(t){if("string"==typeof t||bt(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var nu=function(t,e){for(var n=0,r=(e=tu(e,t)).length;null!=t&&n<r;)t=t[eu(e[n++])];return n&&n==r?t:void 0};var ru=function(){this.__data__=new Bs,this.size=0};var iu=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var au=function(t){return this.__data__.get(t)};var ou=function(t){return this.__data__.has(t)};var su=function(t,e){var n=this.__data__;if(n instanceof Bs){var r=n.__data__;if(!Ho||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ws(r)}return n.set(t,e),this.size=n.size,this};function uu(t){var e=this.__data__=new Bs(t);this.size=e.size}uu.prototype.clear=ru,uu.prototype.delete=iu,uu.prototype.get=au,uu.prototype.has=ou,uu.prototype.set=su;var lu=uu;var cu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var fu=function(t){return this.__data__.has(t)};function hu(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ws;++e<n;)this.add(t[e])}hu.prototype.add=hu.prototype.push=cu,hu.prototype.has=fu;var pu=hu;var du=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var mu=function(t,e){return t.has(e)};var vu=function(t,e,n,r,i,a){var o=1&n,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t),c=a.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,p=2&n?new pu:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var d=t[f],m=e[f];if(r)var v=o?r(m,d,f,e,t,a):r(d,m,f,t,e,a);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!du(e,(function(t,e){if(!mu(p,e)&&(d===t||i(d,t,n,r,a)))return p.push(e)}))){h=!1;break}}else if(d!==m&&!i(d,m,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h},yu=ut.Uint8Array;var gu=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var _u=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},bu=lt?lt.prototype:void 0,wu=bu?bu.valueOf:void 0;var xu=function(t,e,n,r,i,a,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new yu(t),new yu(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Os(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=gu;case"[object Set]":var u=1&r;if(s||(s=_u),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var c=vu(s(t),s(e),r,i,a,o);return o.delete(t),c;case"[object Symbol]":if(wu)return wu.call(t)==wu.call(e)}return!1};var Eu=function(t,e,n){var r=e(t);return wo(t)?r:hs(r,n(t))};var Su=function(){return[]},ku=Object.prototype.propertyIsEnumerable,Cu=Object.getOwnPropertySymbols,Tu=Cu?function(t){return null==t?[]:(t=Object(t),Zt(Cu(t),(function(e){return ku.call(t,e)})))}:Su,ju=/^(?:0|[1-9]\d*)$/;var Ru=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ju.test(t))&&t>-1&&t%1==0&&t<e},Ou=Object.prototype.hasOwnProperty;var Nu=function(t,e){var n=wo(t),r=!n&&es(t),i=!n&&!r&&rs(t),a=!n&&!r&&!i&&ls(t),o=n||r||i||a,s=o?ee(t.length,String):[],u=s.length;for(var l in t)!e&&!Ou.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ru(l,u))||s.push(l);return s};var Au=function(t){return re(t)?Nu(t):Bo(t)};var Pu=function(t){return Eu(t,Au,Tu)},Mu=Object.prototype.hasOwnProperty;var Du=function(t,e,n,r,i,a){var o=1&n,s=Pu(t),u=s.length;if(u!=Pu(e).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in e:Mu.call(e,c)))return!1}var f=a.get(t),h=a.get(e);if(f&&h)return f==e&&h==t;var p=!0;a.set(t,e),a.set(e,t);for(var d=o;++l<u;){var m=t[c=s[l]],v=e[c];if(r)var y=o?r(v,m,c,e,t,a):r(m,v,c,t,e,a);if(!(void 0===y?m===v||i(m,v,n,r,a):y)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var g=t.constructor,_=e.constructor;g==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(p=!1)}return a.delete(t),a.delete(e),p},Iu="[object Object]",Lu=Object.prototype.hasOwnProperty;var Bu=function(t,e,n,r,i,a){var o=wo(t),s=wo(e),u=o?"[object Array]":Jo(t),l=s?"[object Array]":Jo(e),c=(u="[object Arguments]"==u?Iu:u)==Iu,f=(l="[object Arguments]"==l?Iu:l)==Iu,h=u==l;if(h&&rs(t)){if(!rs(e))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new lu),o||ls(t)?vu(t,e,n,r,i,a):xu(t,e,u,n,r,i,a);if(!(1&n)){var p=c&&Lu.call(t,"__wrapped__"),d=f&&Lu.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return a||(a=new lu),i(m,v,n,r,a)}}return!!h&&(a||(a=new lu),Du(t,e,n,r,i,a))};var Uu=function t(e,n,r,i,a){return e===n||(null==e||null==n||!_t(e)&&!_t(n)?e!=e&&n!=n:Bu(e,n,r,i,t,a))};var Hu=function(t,e,n,r){var i=n.length,a=i,o=!r;if(null==t)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=n[i])[0],l=t[u],c=s[1];if(o&&s[2]){if(void 0===l&&!(u in t))return!1}else{var f=new lu;if(r)var h=r(l,c,u,t,e,f);if(!(void 0===h?Uu(c,l,3,r,f):h))return!1}}return!0};var $u=function(t){return t==t&&!Rt(t)};var Fu=function(t){for(var e=Au(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,$u(i)]}return e};var zu=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var Vu=function(t){var e=Fu(t);return 1==e.length&&e[0][2]?zu(e[0][0],e[0][1]):function(n){return n===t||Hu(n,t,e)}};var qu=function(t,e,n){var r=null==t?void 0:nu(t,e);return void 0===r?n:r};var Yu=function(t,e){return null!=t&&e in Object(t)};var Wu=function(t,e,n){for(var r=-1,i=(e=tu(e,t)).length,a=!1;++r<i;){var o=eu(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&ne(i)&&Ru(o,i)&&(wo(t)||es(t))};var Xu=function(t,e){return null!=t&&Wu(t,e,Yu)};var Gu=function(t,e){return gs(t)&&$u(e)?zu(eu(t),e):function(n){var r=qu(n,t);return void 0===r&&r===e?Xu(n,t):Uu(e,r,3)}};var Ju=function(t){return function(e){return nu(e,t)}};var Ku=function(t){return gs(t)?te(eu(t)):Ju(t)};var Zu=function(t){return"function"==typeof t?t:null==t?Et:"object"==typeof t?wo(t)?Gu(t[0],t[1]):Vu(t):Ku(t)};var Qu=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}},tl=Qu();var el=function(t,e){return function(n,r){if(null==n)return n;if(!re(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(t,e){return t&&tl(t,e,Au)}));var nl=function(t,e){var n=-1,r=re(t)?Array(t.length):[];return el(t,(function(t,i,a){r[++n]=e(t,i,a)})),r};var rl=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var il=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,a=bt(t),o=void 0!==e,s=null===e,u=e==e,l=bt(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||r&&o&&u||!n&&u||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!u)return-1}return 0};var al=function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var u=il(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index};var ol=function(t,e,n){e=e.length?Qt(e,(function(t){return wo(t)?function(e){return nu(e,1===t.length?t[0]:t)}:t})):[Et];var r=-1;e=Qt(e,os(Zu));var i=nl(t,(function(t,n,i){return{criteria:Qt(e,(function(e){return e(t)})),index:++r,value:t}}));return rl(i,(function(t,e){return al(t,e,n)}))};var sl=function(t,e,n){if(!Rt(n))return!1;var r=typeof e;return!!("number"==r?re(n)&&Ru(e,n.length):"string"==r&&e in n)&&Os(n[e],t)},ul=Kt((function(t,e){if(null==t)return[];var n=e.length;return n>1&&sl(t,e[0],e[1])?e=[]:n>2&&sl(e[0],e[1],e[2])&&(e=[e[0]]),ol(t,ms(e,1),[])})),ll={backgroundColor:"rgb(241, 231, 119)",height:"4px"},cl={backgroundColor:"rgb(197, 213, 108)",height:"6px"},fl={backgroundColor:"rgb(159, 197, 99)",height:"8px"},hl={backgroundColor:"rgb(141, 184, 101)",height:"10px"},pl={backgroundColor:"rgb(107, 151, 117)",height:"12px"},dl=function(e){a(i,E.Component);var r=c(i);function i(e){var n;return t(this,i),(n=r.call(this,e)).state={isUpdate:0,isPending:!1,simhashData:null},n._clusters=[],n}return n(i,[{key:"componentDidUpdate",value:function(){this.state.isUpdate<2&&(Ro(),this.setState({isUpdate:this.state.isUpdate+1}))}},{key:"render",value:function(){var t=this;if(this.state.error)return E.createElement(ke,{url:this.props.url,code:this.state.error,timestamp:this.state.timestamp?this.state.timestamp:this.props.timestamp,conf:this.props.conf,errorHandledCallback:this.errorHandled});if(this.state.simhashData)return E.createElement("div",{className:"sunburst-container"},this.state.isPending&&E.createElement("p",null,"The Simhash data for ",this.props.url," and year ",this.state.timestamp.substring(0,4)," are still being generated. For more results please try again in a moment."),E.createElement("div",null,"This diagram illustrates the differences of ",E.createElement("a",{href:"/web/*/".concat(this.props.url)},this.props.url)," capture ",E.createElement("a",{href:this.props.conf.snapshotsPrefix+this.state.timestamp+"/"+this.props.url},ye(this.state.timestamp))," compared to"," ",this.state.countCaptures," other captures of the same URL for ",this.state.timestamp.substring(0,4),"."),E.createElement(Ao,{urlPrefix:this.props.conf.urlPrefix,url:this.props.url,simhashData:this.state.simhashData}),E.createElement("div",{style:{clear:"both"}},E.createElement("div",{className:"heat-map-legend"},E.createElement("div",{className:"heat-map-legend-caption"},"Variation"),E.createElement("div",{className:"heat-map-legend-summary"},E.createElement("div",{className:"heat-map-legend-summary-min-caption"},"Low"),E.createElement("div",{className:"heat-map-legend-summary-graphics"},E.createElement("div",{className:"heat-map-legend-bar",style:ll}),E.createElement("div",{className:"heat-map-legend-bar",style:cl}),E.createElement("div",{className:"heat-map-legend-bar",style:fl}),E.createElement("div",{className:"heat-map-legend-bar",style:hl}),E.createElement("div",{className:"heat-map-legend-bar",style:pl})),E.createElement("div",{className:"heat-map-legend-summary-max-caption"},"High")))));var e=function(){return Y(t.props.loader)?E.createElement(W,null):t.props.loader};return this.state.timestamp?this._fetchTimestampSimhashData():this._validateTimestamp(),E.createElement("div",{className:"loading"},E.createElement(e,null))}},{key:"_validateTimestamp",value:function(){var t,e=this;if(this.props.fetchSnapshotCallback)t=this.props.fetchSnapshotCallback(this.props.timestamp);else{var n=new URL(this.props.conf.cdxServer,window.location.origin);n.searchParams.append("url",this.props.url),n.searchParams.append("closest",this.props.timestamp),n.searchParams.append("filter","!mimetype:warc/revisit"),n.searchParams.append("sort","closest"),n.searchParams.append("limit","1"),n.searchParams.append("fl","timestamp"),t=pe(n)}t.then(he).then((function(t){return t.json()})).then((function(t){var n=t.toString();e.props.timestamp!==n?(window.history.pushState({},"","".concat(e.props.conf.diffgraphPrefix).concat(n,"/").concat(e.props.url)),e.setState({timestamp:n})):e.setState({timestamp:e.props.timestamp})})).catch((function(t){"Unexpected end of JSON input"===t.message?e.errorHandled("NO_CAPTURES"):e.errorHandled(t.message)}))}},{key:"errorHandled",value:function(t){this.setState({error:t})}},{key:"_fetchTimestampSimhashData",value:function(){var t=this;pe(this.props.conf.waybackDiscoverDiff+"/simhash?url="+encodeURIComponent(this.props.url)+"&timestamp="+this.state.timestamp).then(he).then((function(t){return t.json()})).then((function(e){if(e.status)throw Error(e.message);t._fetchSimhashData(Oo(e,t.state.timestamp))})).catch((function(e){t.errorHandled(e.message)}))}},{key:"_fetchSimhashData",value:function(t){var e=this,n=this.props.conf.waybackDiscoverDiff+"/simhash?url="+encodeURIComponent(this.props.url)+"&year="+this.state.timestamp.substring(0,4);this.props.conf.compressedSimhash&&(n+="&compress=1"),pe(n).then(he).then((function(t){return t.json()})).then((function(n){var r;e.setState({isPending:"PENDING"===n.status}),r=e.props.conf.compressedSimhash?function(t){for(var e=[],n=t.captures[0][0],r=1;r<t.captures[0].length;r++)for(var i=t.captures[0][r][0],a=1;a<t.captures[0][r].length;a++)for(var o=t.captures[0][r][a][0],s=1;s<t.captures[0][r][a].length;s++){var u=t.captures[0][r][a][s][0],l=t.captures[0][r][a][s][1],c=t.hashes[l],f="".concat(n).concat(de(i)).concat(de(o)).concat(u);e.push([f,c])}return e}(n):Oo(n);var i=e._calcDistanceAndScales(r,t);fs(i)||e._createLevels(i,t)})).catch((function(t){e.errorHandled(t.message)}))}},{key:"_calcDistanceAndScales",value:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=ce(e[1],t[r][1]);t[r][1]=100*i,0!==i&&n.push(100*i)}if(!fs(n)){for(this.setState({countCaptures:n.length}),this._clusters=Po().domain(n).range([1,2,3,4,5]).clusters();this._clusters.length<5;)this._clusters.push(101);return t}this.errorHandled("NO_DIFFERENT_CAPTURES")}},{key:"_createLevels",value:function(t,e){for(var n=[],r=[],i=[],a=[],o=[],s=["#dddddd","#f1e777","#c5d56c","#8db865","#6b9775","#4d7a83"],u=0;u<t.length;u++)0!==t[u][1]&&(t[u][1]<=this._clusters[0]?n.push({name:ye(t[u][0]),timestamp:t[u][0],similarity:t[u][1],clr:s[1],children:[]}):t[u][1]<=this._clusters[1]?r.push({name:ye(t[u][0]),timestamp:t[u][0],similarity:t[u][1],clr:s[2],children:[]}):t[u][1]<=this._clusters[2]?i.push({name:ye(t[u][0]),timestamp:t[u][0],similarity:t[u][1],clr:s[3],children:[]}):t[u][1]<=this._clusters[3]?a.push({name:ye(t[u][0]),timestamp:t[u][0],similarity:t[u][1],clr:s[4],children:[]}):t[u][1]<=this._clusters[4]&&o.push({name:ye(t[u][0]),timestamp:t[u][0],similarity:t[u][1],clr:s[5],children:[]}));for(var l=4;0===n.length&&l>0;)n=r,r=i,i=a,a=o,o=[],l-=1;for(l=3;0===r.length&&l>0;)r=i,i=a,a=o,o=[],l-=1;for(l=2;0===i.length&&l>0;)i=a,a=o,o=[],l-=1;0===a.length&&(a=o,o=[]),n=ul(n,[function(t){return t.timestamp}]),r=ul(r,[function(t){return t.timestamp}]),i=ul(i,[function(t){return t.timestamp}]),a=ul(a,[function(t){return t.timestamp}]),o=ul(o,[function(t){return t.timestamp}]),n.length>this.props.conf.maxSunburstLevelLength&&(n.length=this.props.conf.maxSunburstLevelLength),r.length>this.props.conf.maxSunburstLevelLength&&(r.length=this.props.conf.maxSunburstLevelLength),i.length>this.props.conf.maxSunburstLevelLength&&(i.length=this.props.conf.maxSunburstLevelLength),a.length>this.props.conf.maxSunburstLevelLength&&(a.length=this.props.conf.maxSunburstLevelLength),o.length>this.props.conf.maxSunburstLevelLength&&(o.length=this.props.conf.maxSunburstLevelLength);for(var c=0;c<o.length;c++){var f=c%a.length;a[f].children.push(o[c]),a[f].bigness=""}for(var h=0;h<a.length;h++){var p=h%i.length;i[p].children.push(a[h]),i[p].bigness=""}for(var d=0;d<i.length;d++){var m=d%r.length;r[m].children.push(i[d]),r[m].bigness=""}for(var v=0;v<r.length;v++){var y=v%n.length;n[y].children.push(r[v]),n[y].bigness=""}this.setState({simhashData:{name:ye(e[0]),timestamp:e[0],clr:s[0],children:n,similarity:-1}})}}]),i}();r(dl,"displayName","SunburstContainer"),r(dl,"propTypes",{timestamp:L.string.isRequired,url:L.string.isRequired,conf:L.object.isRequired,fetchSnapshotCallback:L.func,loader:L.element});export{je as DiffContainer,dl as SunburstContainer};
//# sourceMappingURL=app.js.map
