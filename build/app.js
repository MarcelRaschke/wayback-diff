function t(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(){return e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(null,arguments)}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a={exports:{}},i={},o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var l,u=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),i=1;i<arguments.length;i++){for(var l in n=Object(arguments[i]))s.call(n,l)&&(a[l]=n[l]);if(o){r=o(n);for(var u=0;u<r.length;u++)c.call(n,r[u])&&(a[r[u]]=n[r[u]])}}return a};
/** @license React v17.0.2
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */l=i,function(){var t=u,e=60103,n=60106;l.Fragment=60107,l.StrictMode=60108,l.Profiler=60114;var r=60109,a=60110,i=60112;l.Suspense=60113;var o=60120,s=60115,c=60116,f=60121,h=60122,p=60117,d=60129,m=60131;if("function"==typeof Symbol&&Symbol.for){var y=Symbol.for;e=y("react.element"),n=y("react.portal"),l.Fragment=y("react.fragment"),l.StrictMode=y("react.strict_mode"),l.Profiler=y("react.profiler"),r=y("react.provider"),a=y("react.context"),i=y("react.forward_ref"),l.Suspense=y("react.suspense"),o=y("react.suspense_list"),s=y("react.memo"),c=y("react.lazy"),f=y("react.block"),h=y("react.server.block"),p=y("react.fundamental"),y("react.scope"),y("react.opaque.id"),d=y("react.debug_trace_mode"),y("react.offscreen"),m=y("react.legacy_hidden")}var g="function"==typeof Symbol&&Symbol.iterator,v="@@iterator";function _(t){if(null===t||"object"!=typeof t)return null;var e=g&&t[g]||t[v];return"function"==typeof e?e:null}var b={current:null},w={current:null},x={},E=null;function S(t){E=t}x.setExtraStackFrame=function(t){E=t},x.getCurrentStack=null,x.getStackAddendum=function(){var t="";E&&(t+=E);var e=x.getCurrentStack;return e&&(t+=e()||""),t};var k={ReactCurrentDispatcher:b,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:t};function C(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T("warn",t,n)}function j(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];T("error",t,n)}function T(t,e,n){var r=k.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(e+="%s",n=n.concat([r]));var a=n.map((function(t){return""+t}));a.unshift("Warning: "+e),Function.prototype.apply.call(console[t],console,a)}k.ReactDebugCurrentFrame=x;var O={};function N(t,e){var n=t.constructor,r=n&&(n.displayName||n.name)||"ReactClass",a=r+"."+e;O[a]||(j("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",e,r),O[a]=!0)}var A={isMounted:function(t){return!1},enqueueForceUpdate:function(t,e,n){N(t,"forceUpdate")},enqueueReplaceState:function(t,e,n,r){N(t,"replaceState")},enqueueSetState:function(t,e,n,r){N(t,"setState")}},R={};function D(t,e,n){this.props=t,this.context=e,this.refs=R,this.updater=n||A}Object.freeze(R),D.prototype.isReactComponent={},D.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},D.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};var M={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},P=function(t,e){Object.defineProperty(D.prototype,t,{get:function(){C("%s(...) is deprecated in plain JavaScript React classes. %s",e[0],e[1])}})};for(var $ in M)M.hasOwnProperty($)&&P($,M[$]);function I(){}function L(t,e,n){this.props=t,this.context=e,this.refs=R,this.updater=n||A}I.prototype=D.prototype;var H=L.prototype=new I;function U(t){return t.displayName||"Context"}function B(t){if(null==t)return null;if("number"==typeof t.tag&&j("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case l.Fragment:return"Fragment";case n:return"Portal";case l.Profiler:return"Profiler";case l.StrictMode:return"StrictMode";case l.Suspense:return"Suspense";case o:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case a:return U(t)+".Consumer";case r:return U(t._context)+".Provider";case i:return p=t,d=t.render,m="ForwardRef",y=d.displayName||d.name||"",p.displayName||(""!==y?m+"("+y+")":m);case s:return B(t.type);case f:return B(t._render);case c:var e=t,u=e._payload,h=e._init;try{return B(h(u))}catch(t){return null}}var p,d,m,y;return null}H.constructor=L,t(H,D.prototype),H.isPureReactComponent=!0;var F,z,q,Y=Object.prototype.hasOwnProperty,V={key:!0,ref:!0,__self:!0,__source:!0};function W(t){if(Y.call(t,"ref")){var e=Object.getOwnPropertyDescriptor(t,"ref").get;if(e&&e.isReactWarning)return!1}return void 0!==t.ref}function X(t){if(Y.call(t,"key")){var e=Object.getOwnPropertyDescriptor(t,"key").get;if(e&&e.isReactWarning)return!1}return void 0!==t.key}q={};var G=function(t,n,r,a,i,o,s){var c={$$typeof:e,type:t,key:n,ref:r,props:s,_owner:o,_store:{}};return Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(c,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(c,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c};function J(t,e,n){var r,a={},i=null,o=null,s=null,c=null;if(null!=e)for(r in W(e)&&(o=e.ref,function(t){if("string"==typeof t.ref&&w.current&&t.__self&&w.current.stateNode!==t.__self){var e=B(w.current.type);q[e]||(j('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',e,t.ref),q[e]=!0)}}(e)),X(e)&&(i=""+e.key),s=void 0===e.__self?null:e.__self,c=void 0===e.__source?null:e.__source,e)Y.call(e,r)&&!V.hasOwnProperty(r)&&(a[r]=e[r]);var l=arguments.length-2;if(1===l)a.children=n;else if(l>1){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];Object.freeze&&Object.freeze(u),a.children=u}if(t&&t.defaultProps){var h=t.defaultProps;for(r in h)void 0===a[r]&&(a[r]=h[r])}if(i||o){var p="function"==typeof t?t.displayName||t.name||"Unknown":t;i&&function(t,e){var n=function(){F||(F=!0,j("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",e))};n.isReactWarning=!0,Object.defineProperty(t,"key",{get:n,configurable:!0})}(a,p),o&&function(t,e){var n=function(){z||(z=!0,j("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",e))};n.isReactWarning=!0,Object.defineProperty(t,"ref",{get:n,configurable:!0})}(a,p)}return G(t,i,o,s,c,w.current,a)}function K(e,n,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a,i,o=t({},e.props),s=e.key,c=e.ref,l=e._self,u=e._source,f=e._owner;if(null!=n)for(a in W(n)&&(c=n.ref,f=w.current),X(n)&&(s=""+n.key),e.type&&e.type.defaultProps&&(i=e.type.defaultProps),n)Y.call(n,a)&&!V.hasOwnProperty(a)&&(void 0===n[a]&&void 0!==i?o[a]=i[a]:o[a]=n[a]);var h=arguments.length-2;if(1===h)o.children=r;else if(h>1){for(var p=Array(h),d=0;d<h;d++)p[d]=arguments[d+2];o.children=p}return G(e.type,s,c,l,u,f,o)}function Z(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var Q=".",tt=":",et=!1,nt=/\/+/g;function rt(t){return t.replace(nt,"$&/")}function at(t,e){return"object"==typeof t&&null!==t&&null!=t.key?(n=""+t.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(t){return r[t]}))):e.toString(36);var n,r}function it(t,r,a,i,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var c,l,u,f=!1;if(null===t)f=!0;else switch(s){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case e:case n:f=!0}}if(f){var h=t,p=o(h),d=""===i?Q+at(h,0):i;if(Array.isArray(p)){var m="";null!=d&&(m=rt(d)+"/"),it(p,r,m,"",(function(t){return t}))}else null!=p&&(Z(p)&&(c=p,l=a+(!p.key||h&&h.key===p.key?"":rt(""+p.key)+"/")+d,p=G(c.type,l,c.ref,c._self,c._source,c._owner,c.props)),r.push(p));return 1}var y=0,g=""===i?Q:i+tt;if(Array.isArray(t))for(var v=0;v<t.length;v++)y+=it(u=t[v],r,a,g+at(u,v),o);else{var b=_(t);if("function"==typeof b){var w=t;b===w.entries&&(et||C("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),et=!0);for(var x,E=b.call(w),S=0;!(x=E.next()).done;)y+=it(u=x.value,r,a,g+at(u,S++),o)}else if("object"===s){var k=""+t;throw Error("Objects are not valid as a React child (found: "+("[object Object]"===k?"object with keys {"+Object.keys(t).join(", ")+"}":k)+"). If you meant to render a collection of children, use an array instead.")}}return y}function ot(t,e,n){if(null==t)return t;var r=[],a=0;return it(t,r,"","",(function(t){return e.call(n,t,a++)})),r}var st=-1,ct=0,lt=1,ut=2;function ft(t){if(t._status===st){var e=(0,t._result)(),n=t;n._status=ct,n._result=e,e.then((function(e){if(t._status===ct){var n=e.default;void 0===n&&j("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",e);var r=t;r._status=lt,r._result=n}}),(function(e){if(t._status===ct){var n=t;n._status=ut,n._result=e}}))}if(t._status===lt)return t._result;throw t._result}var ht=!1;function pt(t){return"string"==typeof t||"function"==typeof t||!(t!==l.Fragment&&t!==l.Profiler&&t!==d&&t!==l.StrictMode&&t!==l.Suspense&&t!==o&&t!==m&&!ht)||"object"==typeof t&&null!==t&&(t.$$typeof===c||t.$$typeof===s||t.$$typeof===r||t.$$typeof===a||t.$$typeof===i||t.$$typeof===p||t.$$typeof===f||t[0]===h)}function dt(){var t=b.current;if(null===t)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.");return t}var mt,yt,gt,vt,_t,bt,wt,xt=0;function Et(){}Et.__reactDisabledLog=!0;var St,kt=k.ReactCurrentDispatcher;function Ct(t,e,n){if(void 0===St)try{throw Error()}catch(t){var r=t.stack.trim().match(/\n( *(at )?)/);St=r&&r[1]||""}return"\n"+St+t}var jt,Tt=!1,Ot="function"==typeof WeakMap?WeakMap:Map;function Nt(e,n){if(!e||Tt)return"";var r,a=jt.get(e);if(void 0!==a)return a;Tt=!0;var i,o=Error.prepareStackTrace;Error.prepareStackTrace=void 0,i=kt.current,kt.current=null,function(){if(0===xt){mt=console.log,yt=console.info,gt=console.warn,vt=console.error,_t=console.group,bt=console.groupCollapsed,wt=console.groupEnd;var t={configurable:!0,enumerable:!0,value:Et,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}xt++}();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(t){r=t}Reflect.construct(e,[],s)}else{try{s.call()}catch(t){r=t}e.call(s.prototype)}}else{try{throw Error()}catch(t){r=t}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var c=t.stack.split("\n"),l=r.stack.split("\n"),u=c.length-1,f=l.length-1;u>=1&&f>=0&&c[u]!==l[f];)f--;for(;u>=1&&f>=0;u--,f--)if(c[u]!==l[f]){if(1!==u||1!==f)do{if(u--,--f<0||c[u]!==l[f]){var h="\n"+c[u].replace(" at new "," at ");return"function"==typeof e&&jt.set(e,h),h}}while(u>=1&&f>=0);break}}}finally{Tt=!1,kt.current=i,function(){if(0==--xt){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:t({},e,{value:mt}),info:t({},e,{value:yt}),warn:t({},e,{value:gt}),error:t({},e,{value:vt}),group:t({},e,{value:_t}),groupCollapsed:t({},e,{value:bt}),groupEnd:t({},e,{value:wt})})}xt<0&&j("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=o}var p=e?e.displayName||e.name:"",d=p?Ct(p):"";return"function"==typeof e&&jt.set(e,d),d}function At(t,e,n){return Nt(t,!1)}function Rt(t,e,n){if(null==t)return"";if("function"==typeof t)return Nt(t,function(t){var e=t.prototype;return!(!e||!e.isReactComponent)}(t));if("string"==typeof t)return Ct(t);switch(t){case l.Suspense:return Ct("Suspense");case o:return Ct("SuspenseList")}if("object"==typeof t)switch(t.$$typeof){case i:return At(t.render);case s:return Rt(t.type,e,n);case f:return At(t._render);case c:var r=t,a=r._payload,u=r._init;try{return Rt(u(a),e,n)}catch(t){}}return""}jt=new Ot;var Dt,Mt={},Pt=k.ReactDebugCurrentFrame;function $t(t){if(t){var e=t._owner,n=Rt(t.type,t._source,e?e.type:null);Pt.setExtraStackFrame(n)}else Pt.setExtraStackFrame(null)}function It(t){if(t){var e=t._owner;S(Rt(t.type,t._source,e?e.type:null))}else S(null)}function Lt(){if(w.current){var t=B(w.current.type);if(t)return"\n\nCheck the render method of `"+t+"`."}return""}Dt=!1;var Ht={};function Ut(t,e){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;var n=function(t){var e=Lt();if(!e){var n="string"==typeof t?t:t.displayName||t.name;n&&(e="\n\nCheck the top-level render call using <"+n+">.")}return e}(e);if(!Ht[n]){Ht[n]=!0;var r="";t&&t._owner&&t._owner!==w.current&&(r=" It was passed a child from "+B(t._owner.type)+"."),It(t),j('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),It(null)}}}function Bt(t,e){if("object"==typeof t)if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];Z(r)&&Ut(r,e)}else if(Z(t))t._store&&(t._store.validated=!0);else if(t){var a=_(t);if("function"==typeof a&&a!==t.entries)for(var i,o=a.call(t);!(i=o.next()).done;)Z(i.value)&&Ut(i.value,e)}}function Ft(t){var e,n=t.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)e=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==i&&n.$$typeof!==s)return;e=n.propTypes}if(e){var r=B(n);!function(t,e,n,r,a){var i=Function.call.bind(Object.prototype.hasOwnProperty);for(var o in t)if(i(t,o)){var s=void 0;try{if("function"!=typeof t[o]){var c=Error((r||"React class")+": "+n+" type `"+o+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[o]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}s=t[o](e,o,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(t){s=t}!s||s instanceof Error||($t(a),j("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,o,typeof s),$t(null)),s instanceof Error&&!(s.message in Mt)&&(Mt[s.message]=!0,$t(a),j("Failed %s type: %s",n,s.message),$t(null))}}(e,t.props,"prop",r,t)}else void 0===n.PropTypes||Dt||(Dt=!0,j("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",B(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||j("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function zt(t,n,r){var a,i,o=pt(t);if(!o){var s="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(s+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var c,u=null!=(a=n)&&void 0!==(i=a.__source)?"\n\nCheck your code at "+i.fileName.replace(/^.*[\\\/]/,"")+":"+i.lineNumber+".":"";s+=u||Lt(),null===t?c="null":Array.isArray(t)?c="array":void 0!==t&&t.$$typeof===e?(c="<"+(B(t.type)||"Unknown")+" />",s=" Did you accidentally export a JSX literal instead of a component?"):c=typeof t,j("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",c,s)}var f=J.apply(this,arguments);if(null==f)return f;if(o)for(var h=2;h<arguments.length;h++)Bt(arguments[h],t);return t===l.Fragment?function(t){for(var e=Object.keys(t.props),n=0;n<e.length;n++){var r=e[n];if("children"!==r&&"key"!==r){It(t),j("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),It(null);break}}null!==t.ref&&(It(t),j("Invalid attribute `ref` supplied to `React.Fragment`."),It(null))}(f):Ft(f),f}var qt=!1;try{var Yt=Object.freeze({});new Map([[Yt,null]]),new Set([Yt])}catch(t){}var Vt=zt,Wt=function(t,e,n){for(var r=K.apply(this,arguments),a=2;a<arguments.length;a++)Bt(arguments[a],r.type);return Ft(r),r},Xt=function(t){var e=zt.bind(null,t);return e.type=t,qt||(qt=!0,C("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(e,"type",{enumerable:!1,get:function(){return C("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:t}),t}}),e},Gt={map:ot,forEach:function(t,e,n){ot(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return ot(t,(function(){e++})),e},toArray:function(t){return ot(t,(function(t){return t}))||[]},only:function(t){if(!Z(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};l.Children=Gt,l.Component=D,l.PureComponent=L,l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,l.cloneElement=Wt,l.createContext=function(t,e){void 0===e?e=null:null!==e&&"function"!=typeof e&&j("createContext: Expected the optional second argument to be a function. Instead received: %s",e);var n={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null};n.Provider={$$typeof:r,_context:n};var i=!1,o=!1,s=!1,c={$$typeof:a,_context:n,_calculateChangedBits:n._calculateChangedBits};return Object.defineProperties(c,{Provider:{get:function(){return o||(o=!0,j("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),n.Provider},set:function(t){n.Provider=t}},_currentValue:{get:function(){return n._currentValue},set:function(t){n._currentValue=t}},_currentValue2:{get:function(){return n._currentValue2},set:function(t){n._currentValue2=t}},_threadCount:{get:function(){return n._threadCount},set:function(t){n._threadCount=t}},Consumer:{get:function(){return i||(i=!0,j("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),n.Consumer}},displayName:{get:function(){return n.displayName},set:function(t){s||(C("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",t),s=!0)}}}),n.Consumer=c,n._currentRenderer=null,n._currentRenderer2=null,n},l.createElement=Vt,l.createFactory=Xt,l.createRef=function(){var t={current:null};return Object.seal(t),t},l.forwardRef=function(t){null!=t&&t.$$typeof===s?j("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof t?j("forwardRef requires a render function but was given %s.",null===t?"null":typeof t):0!==t.length&&2!==t.length&&j("forwardRef render functions accept exactly two parameters: props and ref. %s",1===t.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=t&&(null==t.defaultProps&&null==t.propTypes||j("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"));var e,n={$$typeof:i,render:t};return Object.defineProperty(n,"displayName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(n){e=n,null==t.displayName&&(t.displayName=n)}}),n},l.isValidElement=Z,l.lazy=function(t){var e,n,r={$$typeof:c,_payload:{_status:-1,_result:t},_init:ft};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return e},set:function(t){j("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),e=t,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(t){j("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=t,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},l.memo=function(t,e){pt(t)||j("memo: The first argument must be a component. Instead received: %s",null===t?"null":typeof t);var n,r={$$typeof:s,type:t,compare:void 0===e?null:e};return Object.defineProperty(r,"displayName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(e){n=e,null==t.displayName&&(t.displayName=e)}}),r},l.useCallback=function(t,e){return dt().useCallback(t,e)},l.useContext=function(t,e){var n=dt();if(void 0!==e&&j("useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",e,"number"==typeof e&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://reactjs.org/link/rules-of-hooks":""),void 0!==t._context){var r=t._context;r.Consumer===t?j("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):r.Provider===t&&j("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return n.useContext(t,e)},l.useDebugValue=function(t,e){return dt().useDebugValue(t,e)},l.useEffect=function(t,e){return dt().useEffect(t,e)},l.useImperativeHandle=function(t,e,n){return dt().useImperativeHandle(t,e,n)},l.useLayoutEffect=function(t,e){return dt().useLayoutEffect(t,e)},l.useMemo=function(t,e){return dt().useMemo(t,e)},l.useReducer=function(t,e,n){return dt().useReducer(t,e,n)},l.useRef=function(t){return dt().useRef(t)},l.useState=function(t){return dt().useState(t)},l.version="17.0.2"}(),a.exports=i;var f=a.exports,h=r(f),p={exports:{}},d={exports:{}},m={};!function(){var t="function"==typeof Symbol&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,s=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,l=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,d=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,g=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function b(t){if("object"==typeof t&&null!==t){var h=t.$$typeof;switch(h){case e:var m=t.type;switch(m){case c:case l:case r:case i:case a:case f:return m;default:var y=m&&m.$$typeof;switch(y){case s:case u:case d:case p:case o:return y;default:return h}}case n:return h}}}var w=c,x=l,E=s,S=o,k=e,C=u,j=r,T=d,O=p,N=n,A=i,R=a,D=f,M=!1;function P(t){return b(t)===l}m.AsyncMode=w,m.ConcurrentMode=x,m.ContextConsumer=E,m.ContextProvider=S,m.Element=k,m.ForwardRef=C,m.Fragment=j,m.Lazy=T,m.Memo=O,m.Portal=N,m.Profiler=A,m.StrictMode=R,m.Suspense=D,m.isAsyncMode=function(t){return M||(M=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),P(t)||b(t)===c},m.isConcurrentMode=P,m.isContextConsumer=function(t){return b(t)===s},m.isContextProvider=function(t){return b(t)===o},m.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===e},m.isForwardRef=function(t){return b(t)===u},m.isFragment=function(t){return b(t)===r},m.isLazy=function(t){return b(t)===d},m.isMemo=function(t){return b(t)===p},m.isPortal=function(t){return b(t)===n},m.isProfiler=function(t){return b(t)===i},m.isStrictMode=function(t){return b(t)===a},m.isSuspense=function(t){return b(t)===f},m.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===r||t===l||t===i||t===a||t===f||t===h||"object"==typeof t&&null!==t&&(t.$$typeof===d||t.$$typeof===p||t.$$typeof===o||t.$$typeof===s||t.$$typeof===u||t.$$typeof===g||t.$$typeof===v||t.$$typeof===_||t.$$typeof===y)},m.typeOf=b}(),d.exports=m;var y,g=d.exports,v="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_=Function.call.bind(Object.prototype.hasOwnProperty),b=v,w={},x=_;function E(t,e,n,r,a){for(var i in t)if(x(t,i)){var o;try{if("function"!=typeof t[i]){var s=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw s.name="Invariant Violation",s}o=t[i](e,i,r,n,null,b)}catch(t){o=t}if(!o||o instanceof Error||y((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in w)){w[o.message]=!0;var c=a?a():"";y("Failed "+n+" type: "+o.message+(null!=c?c:""))}}}y=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}},E.resetWarningCache=function(){w={}};var S,k=g,C=u,j=v,T=_,O=E;function N(){return null}S=function(t){var e="Warning: "+t;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(t){}};var A=g;p.exports=function(t,e){var n="function"==typeof Symbol&&Symbol.iterator,r="@@iterator",a="<<anonymous>>",i={array:l("array"),bigint:l("bigint"),bool:l("boolean"),func:l("function"),number:l("number"),object:l("object"),string:l("string"),symbol:l("symbol"),any:c(N),arrayOf:function(t){return c((function(e,n,r,a,i){if("function"!=typeof t)return new s("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=e[n];if(!Array.isArray(o))return new s("Invalid "+a+" `"+i+"` of type `"+h(o)+"` supplied to `"+r+"`, expected an array.");for(var c=0;c<o.length;c++){var l=t(o,c,r,a,i+"["+c+"]",j);if(l instanceof Error)return l}return null}))},element:c((function(e,n,r,a,i){var o=e[n];return t(o)?null:new s("Invalid "+a+" `"+i+"` of type `"+h(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:c((function(t,e,n,r,a){var i=t[e];return k.isValidElementType(i)?null:new s("Invalid "+r+" `"+a+"` of type `"+h(i)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(t){return c((function(e,n,r,i,o){if(!(e[n]instanceof t)){var c=t.name||a;return new s("Invalid "+i+" `"+o+"` of type `"+((l=e[n]).constructor&&l.constructor.name?l.constructor.name:a)+"` supplied to `"+r+"`, expected instance of `"+c+"`.")}var l;return null}))},node:c((function(t,e,n,r,a){return f(t[e])?null:new s("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(t){return c((function(e,n,r,a,i){if("function"!=typeof t)return new s("Property `"+i+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=e[n],c=h(o);if("object"!==c)return new s("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var l in o)if(T(o,l)){var u=t(o,l,r,a,i+"."+l,j);if(u instanceof Error)return u}return null}))},oneOf:function(t){return Array.isArray(t)?c((function(e,n,r,a,i){for(var c=e[n],l=0;l<t.length;l++)if(o(c,t[l]))return null;var u=JSON.stringify(t,(function(t,e){return"symbol"===p(e)?String(e):e}));return new s("Invalid "+a+" `"+i+"` of value `"+String(c)+"` supplied to `"+r+"`, expected one of "+u+".")})):(S(arguments.length>1?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),N)},oneOfType:function(t){if(!Array.isArray(t))return S("Invalid argument supplied to oneOfType, expected an instance of array."),N;for(var e=0;e<t.length;e++){var n=t[e];if("function"!=typeof n)return S("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+d(n)+" at index "+e+"."),N}return c((function(e,n,r,a,i){for(var o=[],c=0;c<t.length;c++){var l=(0,t[c])(e,n,r,a,i,j);if(null==l)return null;l.data&&T(l.data,"expectedType")&&o.push(l.data.expectedType)}return new s("Invalid "+a+" `"+i+"` supplied to `"+r+"`"+(o.length>0?", expected one of type ["+o.join(", ")+"]":"")+".")}))},shape:function(t){return c((function(e,n,r,a,i){var o=e[n],c=h(o);if("object"!==c)return new s("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var l in t){var f=t[l];if("function"!=typeof f)return u(r,a,i,l,p(f));var d=f(o,l,r,a,i+"."+l,j);if(d)return d}return null}))},exact:function(t){return c((function(e,n,r,a,i){var o=e[n],c=h(o);if("object"!==c)return new s("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var l=C({},e[n],t);for(var f in l){var d=t[f];if(T(t,f)&&"function"!=typeof d)return u(r,a,i,f,p(d));if(!d)return new s("Invalid "+a+" `"+i+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var m=d(o,f,r,a,i+"."+f,j);if(m)return m}return null}))}};function o(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function s(t,e){this.message=t,this.data=e&&"object"==typeof e?e:{},this.stack=""}function c(t){var n={},r=0;function i(i,o,c,l,u,f,h){if(l=l||a,f=f||c,h!==j){if(e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("undefined"!=typeof console){var d=l+":"+c;!n[d]&&r<3&&(S("You are manually calling a React.PropTypes validation function for the `"+f+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[d]=!0,r++)}}return null==o[c]?i?null===o[c]?new s("The "+u+" `"+f+"` is marked as required in `"+l+"`, but its value is `null`."):new s("The "+u+" `"+f+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:t(o,c,l,u,f)}var o=i.bind(null,!1);return o.isRequired=i.bind(null,!0),o}function l(t){return c((function(e,n,r,a,i,o){var c=e[n];return h(c)!==t?new s("Invalid "+a+" `"+i+"` of type `"+p(c)+"` supplied to `"+r+"`, expected `"+t+"`.",{expectedType:t}):null}))}function u(t,e,n,r,a){return new s((t||"React class")+": "+e+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function f(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(f);if(null===e||t(e))return!0;var a=function(t){var e=t&&(n&&t[n]||t[r]);if("function"==typeof e)return e}(e);if(!a)return!1;var i,o=a.call(e);if(a!==e.entries){for(;!(i=o.next()).done;)if(!f(i.value))return!1}else for(;!(i=o.next()).done;){var s=i.value;if(s&&!f(s[1]))return!1}return!0;default:return!1}}function h(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||!!e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}(e,t)?"symbol":e}function p(t){if(null==t)return""+t;var e=h(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function d(t){var e=p(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}return s.prototype=Error.prototype,i.checkPropTypes=O,i.resetWarningCache=O.resetWarningCache,i.PropTypes=i,i}(A.isElement,!0);var R=r(p.exports);function D(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}D(".side-by-side-render,\n.inline-render {\n    display: flex;\n    flex: 1 0 auto;\n}\n\n.side-by-side-render > iframe,\n.side-by-side-render > div,\n.inline-render > iframe {\n    border: 1px solid #ccc;\n    border-radius: 2px;\n    width: 100%;\n}\n\n.side-by-side-render > iframe:first-of-type {\n    margin-right: 0.5em;\n}\n\n.diff-view__alert.alert.alert-warning{\n    text-align: center;\n}\n\n.loading {\n    align-items: center;\n    background: transparent;\n    display: flex;\n    justify-content: center;\n}");const M={genericType:"*/*",mediaType:"*/*",type:"*",subType:"*",equals(t){return!!t&&this.mediaType===t.mediaType}};P("text","html");function P(t,e){return t=t||"*",e=e||"*",Object.assign(Object.create(M),{genericType:"".concat(t,"/*"),mediaType:"".concat(t,"/").concat(e||"*"),type:t,subtype:e})}P("application","pdf"),P("application","wsdl+xml"),P("application","xml"),P("text","*"),P("text","calendar"),P("text","plain"),P("application","rss+xml"),P("image","jpeg"),P("application","x-tgif"),P("application","msword"),P("application","zip"),P("application","atom+xml"),P("application","excel"),P("application","powerpoint"),P("image","gif"),P("application","rtf"),P("text","csv"),P("application","vnd.ms-excel"),P("application","vnd.openxmlformats-officedocument.spreadsheetml.sheet"),P("image","png"),P("application","vnd.openxmlformats-officedocument.wordprocessingml.document"),P("image","jpeg"),P("audio","mpeg"),P("application","postscript");const $={RAW_FROM_CONTENT:{description:"“From” Version"},RAW_TO_CONTENT:{description:"“To” Version"},RAW_SIDE_BY_SIDE:{description:"Side-by-side Content"},HIGHLIGHTED_TEXT:{description:"Highlighted Text",diffService:"html_text_dmp"},HIGHLIGHTED_SOURCE:{description:"Highlighted Source",diffService:"html_source_dmp"},HIGHLIGHTED_RENDERED:{description:"Highlighted Rendered",diffService:"html_token"},SIDE_BY_SIDE_RENDERED:{description:"Side-by-Side Rendered",diffService:"html_token",options:{include:"all"}},OUTGOING_LINKS:{description:"Outgoing Links",diffService:"links"},CHANGES_ONLY_TEXT:{description:"Changes Only Text",diffService:"html_text_dmp"},CHANGES_ONLY_SOURCE:{description:"Changes Only Source",diffService:"html_source_dmp"}};for(const t in $)$[t].value=t;class I extends h.Component{render(){const{data:t,onSelect:e}=this.props,n={};let r="unchanged";const[a,i]=t;return-1===a?(r="removed",n.background="#ffc0cb"):1===a&&(r="added",n.background="#90ee90"),h.createElement("span",{className:"diff item ".concat(r),style:n,onClick:e},i)}}t(I,"propTypes",{data:R.object,onSelect:R.func});class L extends h.Component{render(){const{data:t,onSelectItem:e,className:n}=this.props,r=(t,e,n)=>()=>{t&&t(n,e)},a=t.map(((t,n)=>h.createElement(this.props.component,{data:t,key:n,index:n,onSelect:r(e,t,n)})));return h.createElement("div",{className:n},a)}}t(L,"propTypes",{data:R.object,onSelectItem:R.func,className:R.string});class H extends h.Component{render(){return h.createElement(L,{data:this.props.diffData.diff,component:I,className:this.props.className})}}t(H,"propTypes",{diffData:R.object,className:R.string});var U=r((function(t){return null==t}));class B extends h.Component{render(){return h.createElement("span",null,"Loading...")}}class F extends h.PureComponent{constructor(t){super(t),this.state={loaderStyle:null}}render(){const t=()=>U(this.props.loader)?h.createElement(B,null):this.props.loader;return h.createElement("div",{style:this.state.loaderStyle},this.state.loaderStyle&&h.createElement(t,null))}setLoaderStyle(t){this.setState({loaderStyle:t})}}t(F,"propTypes",{loader:R.object});class z extends h.PureComponent{constructor(t){super(t),this.loaderRef=h.createRef(),this._frame=null}componentDidMount(){this._updateContent(),this.addLoaderImg()}componentDidUpdate(){this._updateContent()}render(){return h.createElement("div",null,h.createElement("iframe",{height:window.innerHeight,width:"100%",onLoad:()=>{this.handleHeight(),this.removeLoaderImg()},sandbox:"allow-same-origin allow-forms allow-scripts",ref:t=>{this._frame=t}}),h.createElement(F,{ref:this.loaderRef,loader:this.props.loader}))}_updateContent(){const t=function(t,e){let n=(new DOMParser).parseFromString(t,"text/html");return n=e(n),"<!doctype html>\n".concat(n.documentElement.outerHTML)}(this.props.html,(t=>(this.props.transform&&(t=this.props.transform(t)||t),function(t,e){if(e){const n=t.querySelector("base")||t.createElement("base");n.href=e;const r=t.querySelector("meta[charset]");let a=t.head.firstChild;r&&(a=r.nextSibling),a?a.parentNode.insertBefore(n,a):t.head.appendChild(n)}return t}(t,this.props.baseUrl))));this._frame.setAttribute("srcdoc",t)}handleHeight(){const t=this._frame.contentDocument.documentElement.scrollHeight;t>.1*this._frame.height?this._frame.height=t+.01*t:this._frame.height=.5*this._frame.height}removeLoaderImg(){this.loaderRef.current.setLoaderStyle(null)}addLoaderImg(){const t=this._frame.contentDocument.scrollingElement.offsetWidth,e=this._frame.offsetLeft+t/2;this.loaderRef.current.setLoaderStyle({position:"absolute",left:e+"px",top:"50%"})}}t(z,"propTypes",{loader:R.object,html:R.string,transform:R.func,baseUrl:R.string});class q extends h.Component{render(){const t=this.props.diffData.combined||this.props.diffData.diff;return h.createElement("div",{className:"inline-render"},h.createElement(z,{html:t,baseUrl:this.props.page.url}))}}t(q,"propTypes",{diffData:R.object,page:R.object});const Y=X.bind(null,"removals"),V=X.bind(null,"additions");class W extends h.Component{render(){let t=t=>t,e=t;return this.props.diffData.deletions||(t=Y,e=V),h.createElement("div",{className:"side-by-side-render"},h.createElement(z,{loader:this.props.loader,html:this.props.diffData.deletions||this.props.diffData.diff,baseUrl:this.props.page.url,transform:t}),h.createElement(z,{loader:this.props.loader,html:this.props.diffData.insertions||this.props.diffData.diff,baseUrl:this.props.page.url,transform:e}))}}function X(t,e){if("additions"!==t){const t=e.getElementById("wm-diff-old-head").content,n=e.getElementById("wm-diff-style"),r=e.querySelector('meta[name="wm-diff-title"]');e.head.innerHTML="",e.head.appendChild(t),e.head.appendChild(n),e.head.appendChild(r)}return function(t,e){function n(t){if(0===t.size)return;const e=new Set;return t.forEach((t=>{t.parentNode&&0===t.childElementCount&&/^[\s\n\r]*$/.test(t.textContent)&&(e.add(t.parentNode),t.parentNode.removeChild(t))})),n(e)}const r=new Set;e.querySelectorAll(t).forEach((t=>{r.add(t.parentNode),t.parentNode.removeChild(t)})),n(r)}("additions"===t?"del":"ins",e),function(t,e){if("additions"===t)return;e.querySelectorAll(".wm-diff-inserted-active").forEach((t=>t.remove())),e.querySelectorAll(".wm-diff-deleted-inert").forEach((t=>{const e=t.content;t.parentNode.insertBefore(e,t),t.remove()}))}(t,e),e}t(W,"propTypes",{diffData:R.object,page:R.object,loader:R.object});const G=300;class J extends h.Component{render(){const t=this.props.diffData.diff.reduce(K,[]);return h.createElement(L,{data:t,component:I,className:this.props.className})}}function K(t,e,n,r){const[a,i]=e;if(0!==a)return t.concat([e]);const o=i.split("\n"),s=1===o.length;if(!s&&o.length<=3)return t.concat([e]);const c=r[n-1]&&0!==r[n-1][0],l=r[n+1]&&0!==r[n+1][0];let u=s?G:3;if(c&&l&&(u*=2),(s?o[0]:o).length<=u)return t.concat([e]);const f=[];if(c){const t=[];if(s)t.push(o[0].slice(0,G));else{const e=o.slice(0,3).map((t=>t.length>G?t.slice(0,G)+"…":t));t.push(e.join("\n")+"\n")}f.push([a,t.join("")])}if(f.push([a,"…"]),l){const t=[];if(s)t.push(o[0].slice(-300));else{const e=o.slice(0,3).map(((t,e,n)=>t.length>G?null==n[e+1]?"…"+t.slice(-300):t.slice(0,G)+"…":t));t.push("\n"+e.join("\n"))}f.push([a,t.join("")])}return t.concat(f)}t(J,"propTypes",{diffData:R.object,className:R.string});class Z extends h.Component{render(){return this.props.content&&/^[\s\n\r]*</.test(this.props.content)?h.createElement("div",{className:"inline-render"},h.createElement(z,{html:this.props.content,baseUrl:this.props.page.url})):h.createElement("div",{className:"inline-render"},h.createElement("iframe",{src:this.props.version}))}}t(Z,"propTypes",{content:R.string,page:R.object,version:R.string});class Q extends h.Component{render(){return h.createElement("div",{className:"side-by-side-render"},tt(this.props.page,this.props.a,this.props.diffData.rawA),tt(this.props.page,this.props.b,this.props.diffData.rawB))}}function tt(t,e,n){return n&&/^[\s\n\r]*</.test(n)?h.createElement(z,{html:n,baseUrl:t.url}):h.createElement("iframe",{src:e})}t(Q,"propTypes",{page:R.object,diffData:R.object,a:R.string,b:R.string});var et="object"==typeof n&&n&&n.Object===Object&&n,nt=et,rt="object"==typeof self&&self&&self.Object===Object&&self,at=nt||rt||Function("return this")(),it=at.Symbol,ot=it,st=Object.prototype,ct=st.hasOwnProperty,lt=st.toString,ut=ot?ot.toStringTag:void 0;var ft=function(t){var e=ct.call(t,ut),n=t[ut];try{t[ut]=void 0;var r=!0}catch(t){}var a=lt.call(t);return r&&(e?t[ut]=n:delete t[ut]),a},ht=Object.prototype.toString;var pt=ft,dt=function(t){return ht.call(t)},mt=it?it.toStringTag:void 0;var yt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":mt&&mt in Object(t)?pt(t):dt(t)};var gt=function(t){return null!=t&&"object"==typeof t},vt=yt,_t=gt;var bt=function(t){return"symbol"==typeof t||_t(t)&&"[object Symbol]"==vt(t)},wt=bt;var xt=function(t,e,n){for(var r=-1,a=t.length;++r<a;){var i=t[r],o=e(i);if(null!=o&&(void 0===s?o==o&&!wt(o):n(o,s)))var s=o,c=i}return c};var Et=function(t){return t},St=xt,kt=function(t,e){return t>e},Ct=Et;var jt=function(t){return t&&t.length?St(t,Ct,kt):void 0},Tt=r(jt);var Ot=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Nt=Math.max;var At=function(t,e,n){return e=Nt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=Nt(r.length-e,0),o=Array(i);++a<i;)o[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(o),Ot(t,this,s)}};var Rt=function(t){return function(){return t}};var Dt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Mt=yt,Pt=Dt;var $t,It=function(t){if(!Pt(t))return!1;var e=Mt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Lt=at["__core-js_shared__"],Ht=($t=/[^.]+$/.exec(Lt&&Lt.keys&&Lt.keys.IE_PROTO||""))?"Symbol(src)_1."+$t:"";var Ut=function(t){return!!Ht&&Ht in t},Bt=Function.prototype.toString;var Ft=function(t){if(null!=t){try{return Bt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},zt=It,qt=Ut,Yt=Dt,Vt=Ft,Wt=/^\[object .+?Constructor\]$/,Xt=Function.prototype,Gt=Object.prototype,Jt=Xt.toString,Kt=Gt.hasOwnProperty,Zt=RegExp("^"+Jt.call(Kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Qt=function(t){return!(!Yt(t)||qt(t))&&(zt(t)?Zt:Wt).test(Vt(t))},te=function(t,e){return null==t?void 0:t[e]};var ee=function(t,e){var n=te(t,e);return Qt(n)?n:void 0},ne=ee,re=function(){try{var t=ne(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ae=Rt,ie=re,oe=ie?function(t,e){return ie(t,"toString",{configurable:!0,enumerable:!1,value:ae(e),writable:!0})}:Et,se=Date.now;var ce=function(t){var e=0,n=0;return function(){var r=se(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},le=ce(oe),ue=Et,fe=At,he=le;var pe=function(t,e){return he(fe(t,e,ue),t+"")};var de=function(t,e){for(var n=-1,r=null==t?0:t.length,a=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[a++]=o)}return i};var me=function(t,e){for(var n=-1,r=null==t?0:t.length,a=Array(r);++n<r;)a[n]=e(t[n],n,t);return a};var ye=function(t){return function(e){return null==e?void 0:e[t]}};var ge=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var ve=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},_e=It,be=ve;var we=function(t){return null!=t&&be(t.length)&&!_e(t)},xe=we,Ee=gt;var Se=de,ke=me,Ce=ye,je=ge,Te=function(t){return Ee(t)&&xe(t)},Oe=Math.max;var Ne=function(t){if(!t||!t.length)return[];var e=0;return t=Se(t,(function(t){if(Te(t))return e=Oe(t.length,e),!0})),je(e,(function(e){return ke(t,Ce(e))}))},Ae=r(pe(Ne));const Re=/[\w\.]{2,256}\.[a-z]{2,4}/gi;function De(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLocaleLowerCase();return(t.startsWith("ftp://")||t.startsWith("http://")||t.startsWith("https://")||function(t){return!!t.match(Re)}(t))&&!t.includes(" ")&&!t.startsWith("site:")}function Me(t,e){if(Number.isInteger(t)&&Number.isInteger(e))return Pe(t^e)/32;const n=8*atob(t).length,r=8*atob(e).length,a=Tt([n,r]),i=function(t,e){return Ae(t,e).map((t=>{let[e,n]=t;return Pe(e^n)})).reduce(((t,e)=>t+e),0)}(ze(t),ze(e));return i/a}function Pe(t){let e=0;for(;0!==t;)e++,t&=t-1;return e}function $e(t){if(t){if(!t.ok)throw Error(t.status);return t}}function Ie(t){if(t){if(!t.ok)throw Error(t.status);return t.json()}}function Le(t,e){return new Promise((function(n,r){setTimeout((function(){r(new Error("timeout"))}),45e3),fetch(t,e).then(n,r)}))}function He(t){return"string"==typeof t?t:t>9?""+t:"0"+t}function Ue(t,e){return Object.keys(t).find((n=>t[n]===e))}function Be(t){const e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10)-1,r=parseInt(t.substring(6,8),10),a=parseInt(t.substring(8,10),10),i=parseInt(t.substring(10,12),10),o=parseInt(t.substring(12,14),10);return new Date(Date.UTC(e,n,r,a,i,o)).toUTCString()}function Fe(t){const e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10)-1,r=parseInt(t.substring(6,8),10);return new Date(Date.UTC(e,n,r)).toUTCString().split(" ").slice(0,4).join(" ")}function ze(t){const e=atob(t);return Uint8Array.from(e,(t=>t.charCodeAt(0)))}class qe extends h.Component{constructor(e){super(e),t(this,"isMountedNow",!1),this._abortController=new window.AbortController,this.state={diffData:null}}componentDidMount(){this.isMountedNow=!0;const{props:t}=this;this._canFetch(t)&&this._loadDiffData(t.page,t.a,t.b,t.diffType)}componentWillUnmount(){this.isMountedNow=!1,this._abortController.abort()}componentDidUpdate(t){const{props:e}=this;this._canFetch(e)&&!this._propsSpecifySameDiff(e,t)&&this._loadDiffData(e.page,e.a,e.b,e.diffType)}render(){if(!this.state.diffData){const t=()=>U(this.props.loader)?h.createElement(B,null):this.props.loader;return h.createElement("div",{className:"loading"},h.createElement(t,null))}return h.createElement("div",{className:"diff-view"},this.renderNoChangeMessage()||this.renderUndiffableMessage(),this.renderDiff())}renderNoChangeMessage(){return 0===this.state.diffData.change_count?h.createElement("div",{className:"diff-view__alert alert alert-warning"},"There were ",h.createElement("strong",null,"no changes for this diff type"),". (Other diff types may show changes.)"):null}renderUndiffableMessage(){return this.state.diffData.raw?h.createElement("div",{className:"diff-view__alert alert alert-info"},"We can’t compare the selected versions of page; you are viewing the content without deletions and insertions highlighted."):null}renderDiff(){switch(this.props.diffType){case $.RAW_SIDE_BY_SIDE.value:return h.createElement(Q,{page:this.props.page,a:this.props.a,b:this.props.b,diffData:this.state.diffData});case $.RAW_FROM_CONTENT.value:return h.createElement(Z,{page:this.props.page,version:this.props.a,content:this.state.diffData.rawA});case $.RAW_TO_CONTENT.value:return h.createElement(Z,{page:this.props.page,version:this.props.b,content:this.state.diffData.rawB});case $.HIGHLIGHTED_RENDERED.value:return h.createElement(q,{diffData:this.state.diffData,page:this.props.page});case $.SIDE_BY_SIDE_RENDERED.value:return h.createElement(W,{diffData:this.state.diffData,page:this.props.page,loader:this.props.loader});case $.OUTGOING_LINKS.value:return h.createElement(q,{diffData:this.state.diffData,page:this.props.page});case $.HIGHLIGHTED_TEXT.value:return h.createElement(H,{diffData:this.state.diffData,className:"diff-text-inline"});case $.HIGHLIGHTED_SOURCE.value:return h.createElement(H,{diffData:this.state.diffData,className:"diff-source-inline"});case $.CHANGES_ONLY_TEXT.value:return h.createElement(J,{diffData:this.state.diffData,className:"diff-text-inline"});case $.CHANGES_ONLY_SOURCE.value:return h.createElement(J,{diffData:this.state.diffData,className:"diff-source-inline"});default:return null}}_propsSpecifySameDiff(t,e){return(e=e||this.props).a===t.a&&e.b===t.b&&e.diffType===t.diffType}_canFetch(t){return t.diffType&&t.a&&t.b}_loadDiffData(t,e,n,r){if(this.setState({diffData:null}),!$[r].diffService)return Promise.all([Le(e.uri,{mode:"cors"}),Le(n.uri,{mode:"cors"})]).then((t=>{let[e,n]=t;return{raw:!0,rawA:e,rawB:n}})).catch((t=>t)).then((t=>this.setState({diffData:t})));const a=new URL(this.props.webMonitoringProcessingURL+"/"+$[r].diffService);a.searchParams.append("strict_urls","WBM"),a.searchParams.append("format","json"),a.searchParams.append("pass_headers","cookie"),a.searchParams.append("include","all"),a.searchParams.append("a",e),a.searchParams.append("b",n),Le(a,{credentials:"include"}).then($e).then((t=>t.json())).then((t=>{this.setState({diffData:t})})).catch((t=>{this._errorHandled(t.message)}))}_errorHandled(t){this.isMountedNow&&(this.props.errorHandledCallback(t),this.setState({showError:!0}))}}t(qe,"propTypes",{a:R.object,b:R.object,diffType:R.string,loader:R.object,webMonitoringProcessingURL:R.string,errorHandledCallback:R.func,page:R.object});D("#diff-select{\n    margin-bottom: 0.7em;\n}\n\n.timestamp-container-view{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n#diff-footer{\n    text-align: center;\n}\n\nyellow-diff-footer{\n    background-color: #f7f417;\n}\n\nblue-diff-footer{\n    background-color: #1d9efd;\n}\n\n.align-items-center > .col-auto {\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.timestamp-select,\n#year-select-left, #year-select-right,\n.month-select {\n    width: auto;\n    padding-left: 1px;\n    padding-right: 1px;\n}\n\n#explanation-middle{\n    text-align: center;\n}\n\n#timestamp-left{\n    display: inline-block;\n    float: left;\n    margin-left: 17.8%;\n}\n\n#timestamp-right{\n    display: inline-block;\n    float: right;\n    margin-right: 17.8%;\n}\n\n.wayback-ymd-timestamp{\n    display: flex;\n}\n\n.wayback-timestamps> * {\n    margin-left: 10px;\n    margin-right: 10px;\n}\n\n.wayback-timestamps {\n    width: 42.86%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n}\n\n.wayback-ymd-buttons > *{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.wayback-ymd-buttons {\n    width: 14.28%;\n    display: flex;\n    flex-flow: row wrap;\n    justify-content: center;\n}\n");var Ye=Object.prototype;var Ve=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ye)};var We=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Xe=Ve,Ge=We,Je=Object.prototype.hasOwnProperty;var Ke=function(t){if(!Xe(t))return Ge(t);var e=[];for(var n in Object(t))Je.call(t,n)&&"constructor"!=n&&e.push(n);return e},Ze=ee(at,"DataView"),Qe=ee(at,"Map"),tn=Ze,en=Qe,nn=ee(at,"Promise"),rn=ee(at,"Set"),an=ee(at,"WeakMap"),on=yt,sn=Ft,cn="[object Map]",ln="[object Promise]",un="[object Set]",fn="[object WeakMap]",hn="[object DataView]",pn=sn(tn),dn=sn(en),mn=sn(nn),yn=sn(rn),gn=sn(an),vn=on;(tn&&vn(new tn(new ArrayBuffer(1)))!=hn||en&&vn(new en)!=cn||nn&&vn(nn.resolve())!=ln||rn&&vn(new rn)!=un||an&&vn(new an)!=fn)&&(vn=function(t){var e=on(t),n="[object Object]"==e?t.constructor:void 0,r=n?sn(n):"";if(r)switch(r){case pn:return hn;case dn:return cn;case mn:return ln;case yn:return un;case gn:return fn}return e});var _n=vn,bn=yt,wn=gt;var xn=function(t){return wn(t)&&"[object Arguments]"==bn(t)},En=gt,Sn=Object.prototype,kn=Sn.hasOwnProperty,Cn=Sn.propertyIsEnumerable,jn=xn(function(){return arguments}())?xn:function(t){return En(t)&&kn.call(t,"callee")&&!Cn.call(t,"callee")},Tn=Array.isArray,On={exports:{}};var Nn=function(){return!1};!function(t,e){var n=at,r=Nn,a=e&&!e.nodeType&&e,i=a&&t&&!t.nodeType&&t,o=i&&i.exports===a?n.Buffer:void 0,s=(o?o.isBuffer:void 0)||r;t.exports=s}(On,On.exports);var An=On.exports,Rn=yt,Dn=ve,Mn=gt,Pn={};Pn["[object Float32Array]"]=Pn["[object Float64Array]"]=Pn["[object Int8Array]"]=Pn["[object Int16Array]"]=Pn["[object Int32Array]"]=Pn["[object Uint8Array]"]=Pn["[object Uint8ClampedArray]"]=Pn["[object Uint16Array]"]=Pn["[object Uint32Array]"]=!0,Pn["[object Arguments]"]=Pn["[object Array]"]=Pn["[object ArrayBuffer]"]=Pn["[object Boolean]"]=Pn["[object DataView]"]=Pn["[object Date]"]=Pn["[object Error]"]=Pn["[object Function]"]=Pn["[object Map]"]=Pn["[object Number]"]=Pn["[object Object]"]=Pn["[object RegExp]"]=Pn["[object Set]"]=Pn["[object String]"]=Pn["[object WeakMap]"]=!1;var $n=function(t){return Mn(t)&&Dn(t.length)&&!!Pn[Rn(t)]};var In=function(t){return function(e){return t(e)}},Ln={exports:{}};!function(t,e){var n=et,r=e&&!e.nodeType&&e,a=r&&t&&!t.nodeType&&t,i=a&&a.exports===r&&n.process,o=function(){try{var t=a&&a.require&&a.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o}(Ln,Ln.exports);var Hn=Ln.exports,Un=$n,Bn=In,Fn=Hn&&Hn.isTypedArray,zn=Fn?Bn(Fn):Un,qn=Ke,Yn=_n,Vn=jn,Wn=Tn,Xn=we,Gn=An,Jn=Ve,Kn=zn,Zn=Object.prototype.hasOwnProperty;var Qn=r((function(t){if(null==t)return!0;if(Xn(t)&&(Wn(t)||"string"==typeof t||"function"==typeof t.splice||Gn(t)||Kn(t)||Vn(t)))return!t.length;var e=Yn(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Jn(t))return!qn(t).length;for(var n in t)if(Zn.call(t,n))return!1;return!0}));const tr={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"};class er extends h.Component{constructor(e){var n,r;super(e),t(this,"_leftMonthIndex",-1),t(this,"_rightMonthIndex",-1);const{timestampA:a,timestampB:i}=this.props;this._abortController=new window.AbortController,this.timestampSelectLeft=h.createRef(),this.timestampSelectRight=h.createRef(),this.monthSelectLeft=h.createRef(),this.monthSelectRight=h.createRef(),this.state={timestampA:a,timestampB:i,leftYear:null!==(n=null==a?void 0:a.substring(0,4))&&void 0!==n?n:"",rightYear:null!==(r=null==i?void 0:i.substring(0,4))&&void 0!==r?r:"",showDiffBtn:!1,shouldValidateTimestamp:!0},this._handleLeftTimestampChange=this._handleLeftTimestampChange.bind(this),this._handleRightTimestampChange=this._handleRightTimestampChange.bind(this),this._showDiffs=this._showDiffs.bind(this),this._errorHandled=this._errorHandled.bind(this),this._showMonths=this._showMonths.bind(this),this._handleYearChange=this._handleYearChange.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this)}componentDidMount(){this.state.showError||(this.state.leftSnaps||this.state.rightSnaps?this._areRequestedTimestampsSelected():this._fetchCDXData())}componentDidUpdate(){this.state.sparkline||this.state.showLoader||this._fetchSparklineData(),(this.state.leftSnaps||this.state.rightSnaps)&&(this.state.shouldValidateTimestamp&&this._checkTimestamps(),this.state.showLoader||(this._selectValues(),!this.state.sparkline||this.state.leftMonthOptions||this.state.rightMonthOptions||-1===this._leftMonthIndex&&-1===this._rightMonthIndex||this._showMonths(this.state.leftYear,this.state.rightYear)))}componentWillUnmount(){this._abortController.abort()}_handleRightTimestampChange(t){if(this.setState({timestampB:t.target.value}),!Qn(this.state.leftSnaps)){const t=this.state.rightSnaps[this.timestampSelectRight.current.selectedIndex-1][1],e=this.state.leftSnaps.filter((e=>e[1]!==t));this.setState({showDiffBtn:!0,leftSnaps:e})}}_handleLeftTimestampChange(t){if(this.setState({timestampA:t.target.value}),!Qn(this.state.rightSnaps)){const t=this.state.leftSnaps[this.timestampSelectLeft.current.selectedIndex-1][1],e=this.state.rightSnaps.filter((e=>e[1]!==t));this.setState({showDiffBtn:!0,rightSnaps:e})}}render(){const t=()=>U(this.props.loader)?h.createElement(B,null):this.props.loader;return this.state.showLoader&&!this.state.showError?h.createElement("div",{className:"loading"},h.createElement(t,null)):this.state.showError?void 0:this.state.yearOptions||this.state.leftSnaps||this.state.rightSnaps?h.createElement("div",{className:"timestamp-header-view"},h.createElement("div",null,this.state.headerInfo,h.createElement("div",{id:"timestamp-left"},"Please select a capture"),h.createElement("div",{id:"timestamp-right"},"Please select a capture"),h.createElement("br",null)),h.createElement("div",{className:"wayback-ymd-timestamp"},h.createElement("div",{className:"wayback-timestamps"},h.createElement("select",{className:"form-control input-sm mr-sm-1",id:"year-select-left",onChange:this._handleYearChange,title:"Years and available captures",value:this.state.leftYear},h.createElement("option",{value:"",disabled:!0},"Year"),this.state.yearOptions),h.createElement("select",{className:"form-control input-sm mr-sm-1 month-select",ref:this.monthSelectLeft,onChange:this._handleMonthChange,title:"Months and available captures",defaultValue:""},h.createElement("option",{value:"",disabled:!0},"Month"),this.state.leftMonthOptions),!Qn(this.state.leftSnaps)&&h.createElement("select",{className:"form-control input-sm mr-sm-1 timestamp-select",ref:this.timestampSelectLeft,onChange:this._handleLeftTimestampChange,defaultValue:""},h.createElement("option",{value:"",disabled:!0},"Available captures"),this.state.leftSnaps.map(((t,e)=>h.createElement("option",{key:e,value:t[0]},Be(t[0])))))),h.createElement("div",{className:"wayback-ymd-buttons"},this.state.showDiffBtn&&h.createElement("button",{className:"btn btn-default btn-sm",onClick:this._showDiffs},"Show differences")),h.createElement("div",{className:"wayback-timestamps"},!Qn(this.state.rightSnaps)&&h.createElement("select",{className:"form-control input-sm mr-sm-1 timestamp-select",ref:this.timestampSelectRight,onChange:this._handleRightTimestampChange,defaultValue:""},h.createElement("option",{value:"",disabled:!0},"Available captures"),this.state.rightSnaps.map(((t,e)=>h.createElement("option",{key:e,value:t[0]},Be(t[0]))))),h.createElement("select",{className:"form-control input-sm mr-sm-1 month-select",ref:this.monthSelectRight,onChange:this._handleMonthChange,title:"Months and available captures",defaultValue:""},h.createElement("option",{value:"",disabled:!0},"Month"),this.state.rightMonthOptions),h.createElement("select",{className:"form-control input-sm mr-sm-1",id:"year-select-right",onChange:this._handleYearChange,title:"Years and available captures",value:this.state.rightYear},h.createElement("option",{value:"",disabled:!0},"Year"),this.state.yearOptions))),h.createElement("div",null,this.state.timestampA&&h.createElement("a",{href:this.props.conf.snapshotsPrefix+this.state.timestampA+"/"+this.props.url,id:"timestamp-left",target:"_blank",rel:"noopener noreferrer"}," Open in new window"),this.state.timestampB&&h.createElement("a",{href:this.props.conf.snapshotsPrefix+this.state.timestampB+"/"+this.props.url,id:"timestamp-right",target:"_blank",rel:"noopener noreferrer"},"Open in new window"),h.createElement("br",null))):h.createElement(t,null)}_areRequestedTimestampsSelected(){if(this.state.finishedValidating){if(!isNaN(this.state.timestampA)){const t=this.state.leftSnaps.slice(-1)[0];this.state.timestampA>t&&this.setState({leftSnaps:[...this.state.leftSnaps,[this.state.timestampA,"0"]],finishedValidating:!1})}if(!isNaN(this.state.timestampB)){const t=this.state.rightSnaps.slice(-1)[0];this.state.timestampB>t&&this.setState({rightSnaps:[...this.state.rightSnaps,[this.state.timestampB,"1"]],finishedValidating:!1})}}}_checkTimestamps(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{timestampA:e,timestampB:n}=this.state;"left"===t&&U(e)?this.setState({leftSnaps:null}):"right"===t&&U(n)&&this.setState({rightSnaps:null}),this.setState({finishedValidating:!0,showLoader:!1,shouldValidateTimestamp:!1})}createCDXRequest(t){const e=new URL(this.props.conf.cdxServer,window.location.origin);return e.searchParams.append("url",this.props.url),e.searchParams.append("fl","timestamp,digest"),e.searchParams.append("output","json"),e.searchParams.append("from",t),e.searchParams.append("to",t),e.searchParams.append("limit",this.props.conf.limit),Le(e,{signal:this._abortController.signal}).then(Ie)}fetchYearMonthCaptures(t,e){const{conf:n,url:r}=this.props,a=new URL(n.calendarURL,window.location.origin);return a.searchParams.append("url",r),a.searchParams.append("date",t+e),a.searchParams.append("digest",1),Le(a,{signal:this._abortController.signal}).then(Ie).then((t=>t.items)).then((n=>n.map((n=>{return[t+e+(r=n[0],7==(r=r.toString()).length?"0"+r:r),n[2]];var r})))).catch((t=>{this._errorHandled(t.message)}))}_fetchCDXData(){if(this.setState({showLoader:!0}),-1!==this._leftMonthIndex){const t=this.monthSelectLeft.current.value;this._leftMonthIndex=parseInt(Ue(tr,t))}else this.state.timestampA&&(this._leftMonthIndex=parseInt(this.state.timestampA.substring(4,6)));if(-1!==this._rightMonthIndex){const t=this.monthSelectRight.current.value;this._rightMonthIndex=parseInt(Ue(tr,t))}else this.state.timestampB&&(this._rightMonthIndex=parseInt(this.state.timestampB.substring(4,6)));let t,e;-1!==this._leftMonthIndex&&(t=this.fetchYearMonthCaptures(this.state.leftYear,He(this._leftMonthIndex))),-1!==this._rightMonthIndex&&(e=this.fetchYearMonthCaptures(this.state.rightYear,He(this._rightMonthIndex))),t?t.then((t=>{if(t&&t.length>0)if(e){const n=t;e.then((t=>{t&&t.length>0?this._prepareCDXData(n,t):this._checkTimestamps("right")}))}else this._prepareCDXData(t,null);else this._checkTimestamps("left")})).catch((t=>{this._errorHandled(t.message)})):e&&e.then((t=>{t&&t.length>0?this._prepareCDXData(null,t):this._checkTimestamps("right")}))}_errorHandled(t){this.props.errorHandledCallback(t),this.setState({showError:!0})}_prepareCDXData(t,e){this.props.getTimestampsCallback(this.state.timestampA,this.state.timestampB),this.setState({leftSnaps:t,rightSnaps:e,showLoader:!1})}_showOptions(t){const e=parseInt(this.props.conf.limit);return t&&t.slice(0).reverse().map(((t,n)=>{const r=Math.min(t[1],e);return h.createElement("option",{key:n,value:t[0]},"".concat(t[0]," (").concat(r,")"))}))}_showDiffs(){const t=this.timestampSelectLeft.current.value,e=this.timestampSelectRight.current.value;this.props.getTimestampsCallback(t,e),this.setState({timestampA:t,timestampB:e})}_selectValues(){const{timestampA:t,timestampB:e,leftSnaps:n,rightSnaps:r}=this.state;!Qn(n)&&t&&(this.timestampSelectLeft.current.value=t),!Qn(r)&&e&&(this.timestampSelectRight.current.value=e);const a=this.monthSelectLeft.current,i=this.monthSelectRight.current;Array.from(a.options).some((t=>t.value===tr[this._leftMonthIndex]))?a.value=tr[this._leftMonthIndex]:a.selectedIndex=0,Array.from(i.options).some((t=>t.value===tr[this._rightMonthIndex]))?i.value=tr[this._rightMonthIndex]:i.selectedIndex=0}_getHeaderInfo(t,e,n){const r=Fe(t),a=Fe(e);return h.createElement("p",{id:"explanation-middle"},"Compare any two captures of ",this.props.url," from our collection of ",n.toLocaleString()," dating from ",r," to ",a,".")}_fetchSparklineData(){this.setState({showLoader:!0});const t=new URL(this.props.conf.sparklineURL,window.location.origin);t.searchParams.append("url",this.props.url),t.searchParams.append("collection","web"),t.searchParams.append("output","json"),Le(t,{signal:this._abortController.signal}).then(Ie).then((t=>{t?this._prepareSparklineData(t):this._errorHandled("404")})).catch((t=>{this._errorHandled(t.message)}))}_prepareSparklineData(t){const e=t.years,n=new Array(e.length);let r=0,a=0;for(const t in e){n[r]=[t,0];for(let i=0;i<e[t].length;i++)n[r][1]=n[r][1]+e[t][i],a+=e[t][i];r++}this.setState({showLoader:!1,sparkline:e,yearOptions:this._showOptions(n),headerInfo:this._getHeaderInfo(t.first_ts,t.last_ts,a)})}_showMonths(t,e){if(!U(t)){const e=this.state.sparkline[t].filter((t=>t>0)).map(((t,e)=>[tr[e+1],t]));this.setState({leftMonthOptions:this._showOptions(e)})}if(!U(e)){const t=this.state.sparkline[e].filter((t=>t>0)).map(((t,e)=>[tr[e+1],t]));this.setState({rightMonthOptions:this._showOptions(t)})}}_handleMonthChange(t){this._fetchCDXData(),this.setState({showDiffBtn:!0,timestampA:null,timestampB:null})}_handleYearChange(t){"year-select-left"===t.target.id?(this._leftMonthIndex=0,this.setState({leftYear:t.target.value,leftSnaps:null,showDiffBtn:!1}),this._showMonths(t.target.value,null)):(this._rightMonthIndex=0,this.setState({rightYear:t.target.value,rightSnaps:null,showDiffBtn:!1}),this._showMonths(null,t.target.value))}}function nr(){return h.createElement("p",{id:"diff-footer"},h.createElement("yellow-diff-footer",null,"Yellow")," indicates content deletion. ",h.createElement("blue-diff-footer",null,"Blue")," indicates content addition.")}t(er,"propTypes",{loader:R.object,errorHandledCallback:R.func,getTimestampsCallback:R.func,timestampA:R.string,timestampB:R.string,conf:R.object,url:R.string});class rr extends h.Component{render(){return h.createElement("h1",null,"No capture is selected, please pick one from the list.")}}const ar=t=>{let{code:e,url:n,timestamp:r,conf:a,errorHandledCallback:i}=t,o="We are sorry but there is a problem comparing these captures. Please try two different ones.",s=!1,c=r?r.substring(0,4):"";const l=f.useCallback((()=>{Le("".concat(a.waybackDiscoverDiff,"/calculate-simhash?url=").concat(encodeURIComponent(n),"&year=").concat(r.substring(0,4))).then($e).then((()=>{setTimeout((function(){window.location.reload(!0)}),1e4)})).catch((t=>{i(t.message)}))}),[a,n,r]);switch(e){case"404":o="The Wayback Machine has not archived ".concat(n,"."),s=!1;break;case"422":o="The captures of ".concat(n," cannot be compared. Note that we support only HTML capture comparison."),s=!1;break;case"CAPTURE_NOT_FOUND":o="There are no data available for ".concat(n," at ").concat(r,"."),s=!0;break;case"NOT_CAPTURED":o="The Wayback Machine has no similarity data for ".concat(n," and year ").concat(c,"."),s=!0;break;case"NO_CAPTURES":o="The Wayback Machine has not archived ".concat(n," for year ").concat(c,"."),s=!1;break;case"NO_DIFFERENT_CAPTURES":o="There aren't any different captures for ".concat(n," for year ").concat(c," to display their similarity."),s=!1;break;case"_this4.errorHandled is not a function":case"NetworkError when attempting to fetch resource.":case"Load failed":o="The capture of ".concat(n," at ").concat(r," cannot be used for comparisons. Its possible it is a redirect."),s=!1}return h.createElement(h.Fragment,null,h.createElement("div",{className:"alert alert-warning",role:"alert"},o),s&&h.createElement("button",{className:"btn btn-sm",id:"calcButton",onClick:l},"Calculate now"),h.createElement("button",{className:"btn btn-sm",onClick:()=>window.history.back()},"« Go back"))};ar.propTypes={code:R.string,url:R.string,timestamp:R.string,conf:R.object,errorHandledCallback:R.func};class ir extends h.Component{constructor(e){super(e),t(this,"errorHandled",(t=>{this.setState({error:t})})),this.state={showDiff:!1,timestampA:this.props.timestampA,timestampB:this.props.timestampB},this._oneFrame=null,this.errorHandled=this.errorHandled.bind(this),this.getTimestamps=this.getTimestamps.bind(this),this.prepareDiffView=this.prepareDiffView.bind(this)}getTimestamps(t,e){if((void 0!==t||void 0!==e)&&(this.setState({fetchedRaw:null,error:null,showDiff:!0,timestampA:t||"",timestampB:e||""}),t!==this.state.timestampA||e!==this.state.timestampB)){const n=this.props.conf.urlPrefix+(t||"")+"/"+(e||"")+"/"+this.props.url;window.history.pushState({},"",n)}}render(){const{url:t,noTimestamps:n,conf:r,loader:a}=this.props;return De(t)?this.state.error?h.createElement(ar,{url:t,timestamp:this.state.timestampA,code:this.state.error}):this.state.timestampA||this.state.timestampB?this.state.timestampA&&this.state.timestampB?h.createElement("div",{className:"diffcontainer-view"},h.createElement(er,e({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),this.state.showDiff&&this.prepareDiffView(),h.createElement(nr,null)):this.state.timestampA?h.createElement("div",{className:"diffcontainer-view"},h.createElement(er,e({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),this.state.showDiff&&this._showOneSnapshot(!0,this.state.timestampA)):this.state.timestampB?h.createElement("div",{className:"diffcontainer-view"},h.createElement(er,e({},this.props,{errorHandledCallback:this.errorHandled,getTimestampsCallback:this.getTimestamps})),this.state.showDiff&&this._showOneSnapshot(!1,this.state.timestampB)):void 0:h.createElement("div",{className:"diffcontainer-view"},h.createElement(er,e({},this.props,{getTimestampsCallback:this.getTimestamps,errorHandledCallback:this.errorHandled})),n&&this._showNoTimestamps()):this._invalidURL()}_showNoTimestamps(){return h.createElement("div",{className:"side-by-side-render"},h.createElement(rr,null),h.createElement(rr,null))}_showOneSnapshot(t,e){if(this.state.fetchedRaw){const e={height:window.innerHeight,onLoad:()=>{this._handleHeight()},srcDoc:this.state.fetchedRaw,ref:t=>{this._oneFrame=t}};return h.createElement("div",{className:"side-by-side-render"},t?h.createElement("iframe",e):h.createElement(rr,null),t?h.createElement(rr,null):h.createElement("iframe",e))}const n=new URL(this.props.conf.snapshotsPrefix+e+"/"+encodeURIComponent(this.props.url),window.location.origin);this._handleSnapshotFetch(Le(n.toString()));const r=()=>U(this.props.loader)?h.createElement(B,null):this.props.loader;return h.createElement("div",{className:"loading"},h.createElement(r,null))}_handleSnapshotFetch(t){t.then($e).then((t=>{const e=t.headers.get("content-type");return e&&e.includes("text/html")?t.text():"<iframe src="+t.url+' style="width: 98%; position: absolute; height: 98%;" />'})).then((t=>{this.setState({fetchedRaw:t})})).catch((t=>{this.errorHandled(t.message)}))}prepareDiffView(){if(!this.state.error){const t=new URL(this.props.conf.snapshotsPrefix+this.state.timestampA+"/"+encodeURIComponent(this.props.url),window.location.origin),e=new URL(this.props.conf.snapshotsPrefix+this.state.timestampB+"/"+encodeURIComponent(this.props.url),window.location.origin),n=new URL(this.props.conf.webMonitoringProcessingURL,window.location.origin);return h.createElement(qe,{webMonitoringProcessingURL:n.toString(),page:{url:encodeURIComponent(this.props.url)},diffType:"SIDE_BY_SIDE_RENDERED",a:t,b:e,loader:this.props.loader,errorHandledCallback:this.errorHandled})}}_handleHeight(){const t=this._oneFrame.contentDocument.documentElement.scrollHeight,e=this._oneFrame.contentDocument.documentElement.scrollWidth;t>.1*this._oneFrame.height?this._oneFrame.height=t+.01*t:this._oneFrame.height=.5*this._oneFrame.height,e>this._oneFrame.clientWidth&&(this._oneFrame.width=e)}_invalidURL(){return h.createElement("div",{className:"alert alert-danger",role:"alert"},h.createElement("b",null,"Oh snap!")," Invalid URL ",this.props.url)}}ir.propTypes={url:R.string.isRequired,timestampA:R.string,timestampB:R.string,conf:R.object.isRequired,loader:R.element,noTimestamps:(t,e,n)=>t.noTimestamps&&"boolean"!=typeof t.noTimestamps?new Error("noTimestamps specified in '".concat(n," should be boolean'.")):t.noTimestamps||t.timestampA||t.timestampB?void 0:new Error("At least one of props 'timestampA' or 'timestampB' or noTimestamps must be specified in '".concat(n,"'."))};var or={value:()=>{}};function sr(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new cr(r)}function cr(t){this._=t}function lr(t,e){for(var n,r=0,a=t.length;r<a;++r)if((n=t[r]).name===e)return n.value}function ur(t,e,n){for(var r=0,a=t.length;r<a;++r)if(t[r].name===e){t[r]=or,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}cr.prototype=sr.prototype={constructor:cr,on:function(t,e){var n,r,a=this._,i=(r=a,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)a[n]=ur(a[n],t.name,e);else if(null==e)for(n in a)a[n]=ur(a[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=lr(a[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,a)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],a=0,i=r.length;a<i;++a)r[a].value.apply(e,n)}};var fr="http://www.w3.org/1999/xhtml",hr={svg:"http://www.w3.org/2000/svg",xhtml:fr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pr(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),hr.hasOwnProperty(e)?{space:hr[e],local:t}:t}function dr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===fr&&e.documentElement.namespaceURI===fr?e.createElement(t):e.createElementNS(n,t)}}function mr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yr(t){var e=pr(t);return(e.local?mr:dr)(e)}function gr(){}function vr(t){return null==t?gr:function(){return this.querySelector(t)}}function _r(){return[]}function br(t){return null==t?_r:function(){return this.querySelectorAll(t)}}function wr(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function xr(t){return function(){return this.matches(t)}}function Er(t){return function(e){return e.matches(t)}}var Sr=Array.prototype.find;function kr(){return this.firstElementChild}var Cr=Array.prototype.filter;function jr(){return Array.from(this.children)}function Tr(t){return new Array(t.length)}function Or(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Nr(t,e,n,r,a,i){for(var o,s=0,c=e.length,l=i.length;s<l;++s)(o=e[s])?(o.__data__=i[s],r[s]=o):n[s]=new Or(t,i[s]);for(;s<c;++s)(o=e[s])&&(a[s]=o)}function Ar(t,e,n,r,a,i,o){var s,c,l,u=new Map,f=e.length,h=i.length,p=new Array(f);for(s=0;s<f;++s)(c=e[s])&&(p[s]=l=o.call(c,c.__data__,s,e)+"",u.has(l)?a[s]=c:u.set(l,c));for(s=0;s<h;++s)l=o.call(t,i[s],s,i)+"",(c=u.get(l))?(r[s]=c,c.__data__=i[s],u.delete(l)):n[s]=new Or(t,i[s]);for(s=0;s<f;++s)(c=e[s])&&u.get(p[s])===c&&(a[s]=c)}function Rr(t){return t.__data__}function Dr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Mr(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Pr(t){return function(){this.removeAttribute(t)}}function $r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ir(t,e){return function(){this.setAttribute(t,e)}}function Lr(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ur(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Br(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fr(t){return function(){this.style.removeProperty(t)}}function zr(t,e,n){return function(){this.style.setProperty(t,e,n)}}function qr(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Yr(t,e){return t.style.getPropertyValue(e)||Br(t).getComputedStyle(t,null).getPropertyValue(e)}function Vr(t){return function(){delete this[t]}}function Wr(t,e){return function(){this[t]=e}}function Xr(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Gr(t){return t.trim().split(/^|\s+/)}function Jr(t){return t.classList||new Kr(t)}function Kr(t){this._node=t,this._names=Gr(t.getAttribute("class")||"")}function Zr(t,e){for(var n=Jr(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function Qr(t,e){for(var n=Jr(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}function ta(t){return function(){Zr(this,t)}}function ea(t){return function(){Qr(this,t)}}function na(t,e){return function(){(e.apply(this,arguments)?Zr:Qr)(this,t)}}function ra(){this.textContent=""}function aa(t){return function(){this.textContent=t}}function ia(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function oa(){this.innerHTML=""}function sa(t){return function(){this.innerHTML=t}}function ca(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function la(){this.nextSibling&&this.parentNode.appendChild(this)}function ua(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fa(){return null}function ha(){var t=this.parentNode;t&&t.removeChild(this)}function pa(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function da(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ma(t){return function(){var e=this.__on;if(e){for(var n,r=0,a=-1,i=e.length;r<i;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?e.length=a:delete this.__on}}}function ya(t,e,n){return function(){var r,a=this.__on,i=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(a)for(var o=0,s=a.length;o<s;++o)if((r=a[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=e);this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},a?a.push(r):this.__on=[r]}}function ga(t,e,n){var r=Br(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function va(t,e){return function(){return ga(this,t,e)}}function _a(t,e){return function(){return ga(this,t,e.apply(this,arguments))}}Or.prototype={constructor:Or,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Kr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ba=[null];function wa(t,e){this._groups=t,this._parents=e}function xa(){return new wa([[document.documentElement]],ba)}function Ea(t){return"string"==typeof t?new wa([[document.querySelector(t)]],[document.documentElement]):new wa([[t]],ba)}function Sa(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ka(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ca(){}wa.prototype=xa.prototype={constructor:wa,select:function(t){"function"!=typeof t&&(t=vr(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=e[a],c=s.length,l=r[a]=new Array(c),u=0;u<c;++u)(i=s[u])&&(o=t.call(i,i.__data__,u,s))&&("__data__"in i&&(o.__data__=i.__data__),l[u]=o);return new wa(r,this._parents)},selectAll:function(t){t="function"==typeof t?wr(t):br(t);for(var e=this._groups,n=e.length,r=[],a=[],i=0;i<n;++i)for(var o,s=e[i],c=s.length,l=0;l<c;++l)(o=s[l])&&(r.push(t.call(o,o.__data__,l,s)),a.push(o));return new wa(r,a)},selectChild:function(t){return this.select(null==t?kr:function(t){return function(){return Sr.call(this.children,t)}}("function"==typeof t?t:Er(t)))},selectChildren:function(t){return this.selectAll(null==t?jr:function(t){return function(){return Cr.call(this.children,t)}}("function"==typeof t?t:Er(t)))},filter:function(t){"function"!=typeof t&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o=e[a],s=o.length,c=r[a]=[],l=0;l<s;++l)(i=o[l])&&t.call(i,i.__data__,l,o)&&c.push(i);return new wa(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Rr);var n,r=e?Ar:Nr,a=this._parents,i=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=i.length,s=new Array(o),c=new Array(o),l=new Array(o),u=0;u<o;++u){var f=a[u],h=i[u],p=h.length,d=Dr(t.call(f,f&&f.__data__,u,a)),m=d.length,y=c[u]=new Array(m),g=s[u]=new Array(m);r(f,h,y,g,l[u]=new Array(p),d,e);for(var v,_,b=0,w=0;b<m;++b)if(v=y[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<m;);v._next=_||null}}return(s=new wa(s,a))._enter=c,s._exit=l,s},enter:function(){return new wa(this._enter||this._groups.map(Tr),this._parents)},exit:function(){return new wa(this._exit||this._groups.map(Tr),this._parents)},join:function(t,e,n){var r=this.enter(),a=this,i=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(a=e(a))&&(a=a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,a=n.length,i=r.length,o=Math.min(a,i),s=new Array(a),c=0;c<o;++c)for(var l,u=n[c],f=r[c],h=u.length,p=s[c]=new Array(h),d=0;d<h;++d)(l=u[d]||f[d])&&(p[d]=l);for(;c<a;++c)s[c]=n[c];return new wa(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,a=t[e],i=a.length-1,o=a[i];--i>=0;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Mr);for(var n=this._groups,r=n.length,a=new Array(r),i=0;i<r;++i){for(var o,s=n[i],c=s.length,l=a[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(l[u]=o);l.sort(e)}return new wa(a,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var a,i=e[n],o=0,s=i.length;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this},attr:function(t,e){var n=pr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?$r:Pr:"function"==typeof e?n.local?Ur:Hr:n.local?Lr:Ir)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Fr:"function"==typeof e?qr:zr)(t,e,null==n?"":n)):Yr(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Vr:"function"==typeof e?Xr:Wr)(t,e)):this.node()[t]},classed:function(t,e){var n=Gr(t+"");if(arguments.length<2){for(var r=Jr(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof e?na:e?ta:ea)(n,e))},text:function(t){return arguments.length?this.each(null==t?ra:("function"==typeof t?ia:aa)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?oa:("function"==typeof t?ca:sa)(t)):this.node().innerHTML},raise:function(){return this.each(la)},lower:function(){return this.each(ua)},append:function(t){var e="function"==typeof t?t:yr(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:yr(t),r=null==e?fa:"function"==typeof e?e:vr(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ha)},clone:function(t){return this.select(t?da:pa)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,a,i=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=i.length;if(!(arguments.length<2)){for(s=e?ya:ma,r=0;r<o;++r)this.each(s(i[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<o;++r)if((a=i[r]).type===c.type&&a.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?_a:va)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,a=t[e],i=0,o=a.length;i<o;++i)(r=a[i])&&(yield r)}};var ja=.7,Ta=1/ja,Oa="\\s*([+-]?\\d+)\\s*",Na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ra=/^#([0-9a-f]{3,8})$/,Da=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),Ma=new RegExp(`^rgb\\(${Aa},${Aa},${Aa}\\)$`),Pa=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${Na}\\)$`),$a=new RegExp(`^rgba\\(${Aa},${Aa},${Aa},${Na}\\)$`),Ia=new RegExp(`^hsl\\(${Na},${Aa},${Aa}\\)$`),La=new RegExp(`^hsla\\(${Na},${Aa},${Aa},${Na}\\)$`),Ha={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ua(){return this.rgb().formatHex()}function Ba(){return this.rgb().formatRgb()}function Fa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ra.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?za(e):3===n?new Va(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?qa(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?qa(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Da.exec(t))?new Va(e[1],e[2],e[3],1):(e=Ma.exec(t))?new Va(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pa.exec(t))?qa(e[1],e[2],e[3],e[4]):(e=$a.exec(t))?qa(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ia.exec(t))?Za(e[1],e[2]/100,e[3]/100,1):(e=La.exec(t))?Za(e[1],e[2]/100,e[3]/100,e[4]):Ha.hasOwnProperty(t)?za(Ha[t]):"transparent"===t?new Va(NaN,NaN,NaN,0):null}function za(t){return new Va(t>>16&255,t>>8&255,255&t,1)}function qa(t,e,n,r){return r<=0&&(t=e=n=NaN),new Va(t,e,n,r)}function Ya(t,e,n,r){return 1===arguments.length?((a=t)instanceof Ca||(a=Fa(a)),a?new Va((a=a.rgb()).r,a.g,a.b,a.opacity):new Va):new Va(t,e,n,null==r?1:r);var a}function Va(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Wa(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}`}function Xa(){const t=Ga(this.opacity);return`${1===t?"rgb(":"rgba("}${Ja(this.r)}, ${Ja(this.g)}, ${Ja(this.b)}${1===t?")":`, ${t})`}`}function Ga(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ja(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ka(t){return((t=Ja(t))<16?"0":"")+t.toString(16)}function Za(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ti(t,e,n,r)}function Qa(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);if(t instanceof Ca||(t=Fa(t)),!t)return new ti;if(t instanceof ti)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,a=Math.min(e,n,r),i=Math.max(e,n,r),o=NaN,s=i-a,c=(i+a)/2;return s?(o=e===i?(n-r)/s+6*(n<r):n===i?(r-e)/s+2:(e-n)/s+4,s/=c<.5?i+a:2-i-a,o*=60):s=c>0&&c<1?0:o,new ti(o,s,c,t.opacity)}function ti(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ei(t){return(t=(t||0)%360)<0?t+360:t}function ni(t){return Math.max(0,Math.min(1,t||0))}function ri(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Sa(Ca,Fa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ua,formatHex:Ua,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Qa(this).formatHsl()},formatRgb:Ba,toString:Ba}),Sa(Va,Ya,ka(Ca,{brighter(t){return t=null==t?Ta:Math.pow(Ta,t),new Va(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ja:Math.pow(ja,t),new Va(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Va(Ja(this.r),Ja(this.g),Ja(this.b),Ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wa,formatHex:Wa,formatHex8:function(){return`#${Ka(this.r)}${Ka(this.g)}${Ka(this.b)}${Ka(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Xa,toString:Xa})),Sa(ti,(function(t,e,n,r){return 1===arguments.length?Qa(t):new ti(t,e,n,null==r?1:r)}),ka(Ca,{brighter(t){return t=null==t?Ta:Math.pow(Ta,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ja:Math.pow(ja,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,a=2*n-r;return new Va(ri(t>=240?t-240:t+120,a,r),ri(t,a,r),ri(t<120?t+240:t-120,a,r),this.opacity)},clamp(){return new ti(ei(this.h),ni(this.s),ni(this.l),Ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ga(this.opacity);return`${1===t?"hsl(":"hsla("}${ei(this.h)}, ${100*ni(this.s)}%, ${100*ni(this.l)}%${1===t?")":`, ${t})`}`}}));var ai=t=>()=>t;function ii(t){return 1==(t=+t)?oi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):ai(isNaN(e)?n:e)}}function oi(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):ai(isNaN(t)?e:t)}var si=function t(e){var n=ii(e);function r(t,e){var r=n((t=Ya(t)).r,(e=Ya(e)).r),a=n(t.g,e.g),i=n(t.b,e.b),o=oi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=a(e),t.b=i(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function ci(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var li=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ui=new RegExp(li.source,"g");function fi(t,e){var n,r,a,i=li.lastIndex=ui.lastIndex=0,o=-1,s=[],c=[];for(t+="",e+="";(n=li.exec(t))&&(r=ui.exec(e));)(a=r.index)>i&&(a=e.slice(i,a),s[o]?s[o]+=a:s[++o]=a),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:ci(n,r)})),i=ui.lastIndex;return i<e.length&&(a=e.slice(i),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,r=0;r<e;++r)s[(n=c[r]).i]=n.x(t);return s.join("")})}var hi,pi=180/Math.PI,di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mi(t,e,n,r,a,i){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(e,t)*pi,skewX:Math.atan(c)*pi,scaleX:o,scaleY:s}}function yi(t,e,n,r){function a(t){return t.length?t.pop()+" ":""}return function(i,o){var s=[],c=[];return i=t(i),o=t(o),function(t,r,a,i,o,s){if(t!==a||r!==i){var c=o.push("translate(",null,e,null,n);s.push({i:c-4,x:ci(t,a)},{i:c-2,x:ci(r,i)})}else(a||i)&&o.push("translate("+a+e+i+n)}(i.translateX,i.translateY,o.translateX,o.translateY,s,c),function(t,e,n,i){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),i.push({i:n.push(a(n)+"rotate(",null,r)-2,x:ci(t,e)})):e&&n.push(a(n)+"rotate("+e+r)}(i.rotate,o.rotate,s,c),function(t,e,n,i){t!==e?i.push({i:n.push(a(n)+"skewX(",null,r)-2,x:ci(t,e)}):e&&n.push(a(n)+"skewX("+e+r)}(i.skewX,o.skewX,s,c),function(t,e,n,r,i,o){if(t!==n||e!==r){var s=i.push(a(i)+"scale(",null,",",null,")");o.push({i:s-4,x:ci(t,n)},{i:s-2,x:ci(e,r)})}else 1===n&&1===r||i.push(a(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,o.scaleX,o.scaleY,s,c),i=o=null,function(t){for(var e,n=-1,r=c.length;++n<r;)s[(e=c[n]).i]=e.x(t);return s.join("")}}}var gi,vi,_i=yi((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?di:mi(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),bi=yi((function(t){return null==t?di:(hi||(hi=document.createElementNS("http://www.w3.org/2000/svg","g")),hi.setAttribute("transform",t),(t=hi.transform.baseVal.consolidate())?mi((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):di)}),", ",")",")"),wi=0,xi=0,Ei=0,Si=1e3,ki=0,Ci=0,ji=0,Ti="object"==typeof performance&&performance.now?performance:Date,Oi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ni(){return Ci||(Oi(Ai),Ci=Ti.now()+ji)}function Ai(){Ci=0}function Ri(){this._call=this._time=this._next=null}function Di(t,e,n){var r=new Ri;return r.restart(t,e,n),r}function Mi(){Ci=(ki=Ti.now())+ji,wi=xi=0;try{!function(){Ni(),++wi;for(var t,e=gi;e;)(t=Ci-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wi}()}finally{wi=0,function(){var t,e,n=gi,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:gi=e);vi=t,$i(r)}(),Ci=0}}function Pi(){var t=Ti.now(),e=t-ki;e>Si&&(ji-=e,ki=t)}function $i(t){wi||(xi&&(xi=clearTimeout(xi)),t-Ci>24?(t<1/0&&(xi=setTimeout(Mi,t-Ti.now()-ji)),Ei&&(Ei=clearInterval(Ei))):(Ei||(ki=Ti.now(),Ei=setInterval(Pi,Si)),wi=1,Oi(Mi)))}function Ii(t,e,n){var r=new Ri;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Ri.prototype=Di.prototype={constructor:Ri,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ni():+n)+(null==e?0:+e),this._next||vi===this||(vi?vi._next=this:gi=this,vi=this),this._call=t,this._time=n,$i()},stop:function(){this._call&&(this._call=null,this._time=1/0,$i())}};var Li=sr("start","end","cancel","interrupt"),Hi=[],Ui=0,Bi=1,Fi=2,zi=3,qi=4,Yi=5,Vi=6;function Wi(t,e,n,r,a,i){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,a=t.__transition;function i(t){n.state=Bi,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(i){var l,u,f,h;if(n.state!==Bi)return c();for(l in a)if((h=a[l]).name===n.name){if(h.state===zi)return Ii(o);h.state===qi?(h.state=Vi,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete a[l]):+l<e&&(h.state=Vi,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete a[l])}if(Ii((function(){n.state===zi&&(n.state=qi,n.timer.restart(s,n.delay,n.time),s(i))})),n.state=Fi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fi){for(n.state=zi,r=new Array(f=n.tween.length),l=0,u=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function s(e){for(var a=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=Yi,1),i=-1,o=r.length;++i<o;)r[i].call(t,a);n.state===Yi&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var r in n.state=Vi,n.timer.stop(),delete a[e],a)return;delete t.__transition}a[e]=n,n.timer=Di(i,0,n.time)}(t,n,{name:e,index:r,group:a,on:Li,tween:Hi,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ui})}function Xi(t,e){var n=Ji(t,e);if(n.state>Ui)throw new Error("too late; already scheduled");return n}function Gi(t,e){var n=Ji(t,e);if(n.state>zi)throw new Error("too late; already running");return n}function Ji(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ki(t,e){var n,r;return function(){var a=Gi(this,t),i=a.tween;if(i!==n)for(var o=0,s=(r=n=i).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}a.tween=r}}function Zi(t,e,n){var r,a;if("function"!=typeof n)throw new Error;return function(){var i=Gi(this,t),o=i.tween;if(o!==r){a=(r=o).slice();for(var s={name:e,value:n},c=0,l=a.length;c<l;++c)if(a[c].name===e){a[c]=s;break}c===l&&a.push(s)}i.tween=a}}function Qi(t,e,n){var r=t._id;return t.each((function(){var t=Gi(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ji(t,r).value[e]}}function to(t,e){var n;return("number"==typeof e?ci:e instanceof Fa?si:(n=Fa(e))?(e=n,si):fi)(t,e)}function eo(t){return function(){this.removeAttribute(t)}}function no(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ro(t,e,n){var r,a,i=n+"";return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function ao(t,e,n){var r,a,i=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function io(t,e,n){var r,a,i;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttribute(t))===(s=c+"")?null:o===r&&s===a?i:(a=s,i=e(r=o,c));this.removeAttribute(t)}}function oo(t,e,n){var r,a,i;return function(){var o,s,c=n(this);if(null!=c)return(o=this.getAttributeNS(t.space,t.local))===(s=c+"")?null:o===r&&s===a?i:(a=s,i=e(r=o,c));this.removeAttributeNS(t.space,t.local)}}function so(t,e){var n,r;function a(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,a)),n}return a._value=e,a}function co(t,e){var n,r;function a(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,a)),n}return a._value=e,a}function lo(t,e){return function(){Xi(this,t).delay=+e.apply(this,arguments)}}function uo(t,e){return e=+e,function(){Xi(this,t).delay=e}}function fo(t,e){return function(){Gi(this,t).duration=+e.apply(this,arguments)}}function ho(t,e){return e=+e,function(){Gi(this,t).duration=e}}var po=xa.prototype.constructor;function mo(t){return function(){this.style.removeProperty(t)}}var yo=0;function go(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function vo(){return++yo}var _o=xa.prototype;go.prototype={constructor:go,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=vr(t));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,c,l=r[o],u=l.length,f=i[o]=new Array(u),h=0;h<u;++h)(s=l[h])&&(c=t.call(s,s.__data__,h,l))&&("__data__"in s&&(c.__data__=s.__data__),f[h]=c,Wi(f[h],e,n,h,f,Ji(s,n)));return new go(i,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=br(t));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var c,l=r[s],u=l.length,f=0;f<u;++f)if(c=l[f]){for(var h,p=t.call(c,c.__data__,f,l),d=Ji(c,n),m=0,y=p.length;m<y;++m)(h=p[m])&&Wi(h,e,n,m,p,d);i.push(p),o.push(c)}return new go(i,o,e,n)},selectChild:_o.selectChild,selectChildren:_o.selectChildren,filter:function(t){"function"!=typeof t&&(t=xr(t));for(var e=this._groups,n=e.length,r=new Array(n),a=0;a<n;++a)for(var i,o=e[a],s=o.length,c=r[a]=[],l=0;l<s;++l)(i=o[l])&&t.call(i,i.__data__,l,o)&&c.push(i);return new go(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,a=n.length,i=Math.min(r,a),o=new Array(r),s=0;s<i;++s)for(var c,l=e[s],u=n[s],f=l.length,h=o[s]=new Array(f),p=0;p<f;++p)(c=l[p]||u[p])&&(h[p]=c);for(;s<r;++s)o[s]=e[s];return new go(o,this._parents,this._name,this._id)},selection:function(){return new po(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=vo(),r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],c=s.length,l=0;l<c;++l)if(o=s[l]){var u=Ji(o,e);Wi(o,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new go(r,this._parents,t,n)},call:_o.call,nodes:_o.nodes,node:_o.node,size:_o.size,empty:_o.empty,each:_o.each,on:function(t,e){var n=this._id;return arguments.length<2?Ji(this.node(),n).on.on(t):this.each(function(t,e,n){var r,a,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Xi:Gi;return function(){var o=i(this,t),s=o.on;s!==r&&(a=(r=s).copy()).on(e,n),o.on=a}}(n,t,e))},attr:function(t,e){var n=pr(t),r="transform"===n?bi:to;return this.attrTween(t,"function"==typeof e?(n.local?oo:io)(n,r,Qi(this,"attr."+t,e)):null==e?(n.local?no:eo)(n):(n.local?ao:ro)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=pr(t);return this.tween(n,(r.local?so:co)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?_i:to;return null==e?this.styleTween(t,function(t,e){var n,r,a;return function(){var i=Yr(this,t),o=(this.style.removeProperty(t),Yr(this,t));return i===o?null:i===n&&o===r?a:a=e(n=i,r=o)}}(t,r)).on("end.style."+t,mo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,a,i;return function(){var o=Yr(this,t),s=n(this),c=s+"";return null==s&&(this.style.removeProperty(t),c=s=Yr(this,t)),o===c?null:o===r&&c===a?i:(a=c,i=e(r=o,s))}}(t,r,Qi(this,"style."+t,e))).each(function(t,e){var n,r,a,i,o="style."+e,s="end."+o;return function(){var c=Gi(this,t),l=c.on,u=null==c.value[o]?i||(i=mo(e)):void 0;l===n&&a===u||(r=(n=l).copy()).on(s,a=u),c.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,a,i=n+"";return function(){var o=Yr(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,a;function i(){var i=e.apply(this,arguments);return i!==a&&(r=(a=i)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,i,n)),r}return i._value=e,i}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Qi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,a=Ji(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===t)return r.value;return null}return this.each((null==e?Ki:Zi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?lo:uo)(e,t)):Ji(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?fo:ho)(e,t)):Ji(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Gi(this,t).ease=e}}(e,t)):Ji(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Gi(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,a=n.size();return new Promise((function(i,o){var s={value:o},c={value:function(){0==--a&&i()}};n.each((function(){var n=Gi(this,r),a=n.on;a!==t&&((e=(t=a).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),n.on=e})),0===a&&i()}))},[Symbol.iterator]:_o[Symbol.iterator]};var bo={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function wo(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}xa.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,a,i=t.__transition,o=!0;if(i){for(a in e=null==e?null:e+"",i)(n=i[a]).name===e?(r=n.state>Fi&&n.state<Yi,n.state=Vi,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete i[a]):o=!1;o&&delete t.__transition}}(this,t)}))},xa.prototype.transition=function(t){var e,n;t instanceof go?(e=t._id,t=t._name):(e=vo(),(n=bo).time=Ni(),t=null==t?null:t+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],c=s.length,l=0;l<c;++l)(o=s[l])&&Wi(o,t,e,l,s,n||wo(o,e));return new go(r,this._parents,t,e)};const xo=Math.PI,Eo=2*xo,So=1e-6,ko=Eo-So;function Co(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class jo{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Co:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Co;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,a,i){this._append`C${+t},${+e},${+n},${+r},${this._x1=+a},${this._y1=+i}`}arcTo(t,e,n,r,a){if(t=+t,e=+e,n=+n,r=+r,(a=+a)<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,s=n-t,c=r-e,l=i-t,u=o-e,f=l*l+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>So)if(Math.abs(u*s-c*l)>So&&a){let h=n-i,p=r-o,d=s*s+c*c,m=h*h+p*p,y=Math.sqrt(d),g=Math.sqrt(f),v=a*Math.tan((xo-Math.acos((d+f-m)/(2*y*g)))/2),_=v/g,b=v/y;Math.abs(_-1)>So&&this._append`L${t+_*l},${e+_*u}`,this._append`A${a},${a},0,0,${+(u*h>l*p)},${this._x1=t+b*s},${this._y1=e+b*c}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,a,i){if(t=+t,e=+e,i=!!i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),c=t+o,l=e+s,u=1^i,f=i?r-a:a-r;null===this._x1?this._append`M${c},${l}`:(Math.abs(this._x1-c)>So||Math.abs(this._y1-l)>So)&&this._append`L${c},${l}`,n&&(f<0&&(f=f%Eo+Eo),f>ko?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=c},${this._y1=l}`:f>So&&this._append`A${n},${n},0,${+(f>=xo)},${u},${this._x1=t+n*Math.cos(a)},${this._y1=e+n*Math.sin(a)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function To(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Oo(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Ao)):void 0===e&&(e=No);for(var n,r,a,i,o,s=new Mo(t),c=[s];n=c.pop();)if((a=e(n.data))&&(o=(a=Array.from(a)).length))for(n.children=a,i=o-1;i>=0;--i)c.push(r=a[i]=new Mo(a[i])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Do)}function No(t){return t.children}function Ao(t){return Array.isArray(t)?t[1]:null}function Ro(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Do(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Mo(t){this.data=t,this.depth=this.height=0,this.parent=null}function Po(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function $o(){var t=1,e=1,n=0,r=!1;function a(a){var i=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/i,a.eachBefore(function(t,e){return function(r){r.children&&function(t,e,n,r,a){for(var i,o=t.children,s=-1,c=o.length,l=t.value&&(r-e)/t.value;++s<c;)(i=o[s]).y0=n,i.y1=a,i.x0=e,i.x1=e+=i.value*l}(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var a=r.x0,i=r.y0,o=r.x1-n,s=r.y1-n;o<a&&(a=o=(a+o)/2),s<i&&(i=s=(i+s)/2),r.x0=a,r.y0=i,r.x1=o,r.y1=s}}(e,i)),r&&a.eachBefore(Po),a}return a.round=function(t){return arguments.length?(r=!!t,a):r},a.size=function(n){return arguments.length?(t=+n[0],e=+n[1],a):[t,e]},a.padding=function(t){return arguments.length?(n=+t,a):n},a}function Io(t){return function(){return t}}Mo.prototype=Oo.prototype={constructor:Mo,count:function(){return this.eachAfter(To)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,a,i=this,o=[i],s=[],c=-1;i=o.pop();)if(s.push(i),n=i.children)for(r=0,a=n.length;r<a;++r)o.push(n[r]);for(;i=s.pop();)t.call(e,i,++c,this);return this},eachBefore:function(t,e){for(var n,r,a=this,i=[a],o=-1;a=i.pop();)if(t.call(e,a,++o,this),n=a.children)for(r=n.length-1;r>=0;--r)i.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,a=r&&r.length;--a>=0;)n+=r[a].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),a=null;t=n.pop(),e=r.pop();for(;t===e;)a=t,t=n.pop(),e=r.pop();return a}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var a=r.length;t!==n;)r.splice(a,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Oo(this).eachBefore(Ro)},[Symbol.iterator]:function*(){var t,e,n,r,a=this,i=[a];do{for(t=i.reverse(),i=[];a=t.pop();)if(yield a,e=a.children)for(n=0,r=e.length;n<r;++n)i.push(e[n])}while(i.length)}};const Lo=Math.abs,Ho=Math.atan2,Uo=Math.cos,Bo=Math.max,Fo=Math.min,zo=Math.sin,qo=Math.sqrt,Yo=1e-12,Vo=Math.PI,Wo=Vo/2,Xo=2*Vo;function Go(t){return t>=1?Wo:t<=-1?-Wo:Math.asin(t)}function Jo(t){return t.innerRadius}function Ko(t){return t.outerRadius}function Zo(t){return t.startAngle}function Qo(t){return t.endAngle}function ts(t){return t&&t.padAngle}function es(t,e,n,r,a,i,o){var s=t-n,c=e-r,l=(o?i:-i)/qo(s*s+c*c),u=l*c,f=-l*s,h=t+u,p=e+f,d=n+u,m=r+f,y=(h+d)/2,g=(p+m)/2,v=d-h,_=m-p,b=v*v+_*_,w=a-i,x=h*m-d*p,E=(_<0?-1:1)*qo(Bo(0,w*w*b-x*x)),S=(x*_-v*E)/b,k=(-x*v-_*E)/b,C=(x*_+v*E)/b,j=(-x*v+_*E)/b,T=S-y,O=k-g,N=C-y,A=j-g;return T*T+O*O>N*N+A*A&&(S=C,k=j),{cx:S,cy:k,x01:-u,y01:-f,x11:S*(a/w-1),y11:k*(a/w-1)}}function ns(){var t=Jo,e=Ko,n=Io(0),r=null,a=Zo,i=Qo,o=ts,s=null,c=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new jo(e)}(l);function l(){var l,u,f,h=+t.apply(this,arguments),p=+e.apply(this,arguments),d=a.apply(this,arguments)-Wo,m=i.apply(this,arguments)-Wo,y=Lo(m-d),g=m>d;if(s||(s=l=c()),p<h&&(u=p,p=h,h=u),p>Yo)if(y>Xo-Yo)s.moveTo(p*Uo(d),p*zo(d)),s.arc(0,0,p,d,m,!g),h>Yo&&(s.moveTo(h*Uo(m),h*zo(m)),s.arc(0,0,h,m,d,g));else{var v,_,b=d,w=m,x=d,E=m,S=y,k=y,C=o.apply(this,arguments)/2,j=C>Yo&&(r?+r.apply(this,arguments):qo(h*h+p*p)),T=Fo(Lo(p-h)/2,+n.apply(this,arguments)),O=T,N=T;if(j>Yo){var A=Go(j/h*zo(C)),R=Go(j/p*zo(C));(S-=2*A)>Yo?(x+=A*=g?1:-1,E-=A):(S=0,x=E=(d+m)/2),(k-=2*R)>Yo?(b+=R*=g?1:-1,w-=R):(k=0,b=w=(d+m)/2)}var D=p*Uo(b),M=p*zo(b),P=h*Uo(E),$=h*zo(E);if(T>Yo){var I,L=p*Uo(w),H=p*zo(w),U=h*Uo(x),B=h*zo(x);if(y<Vo)if(I=function(t,e,n,r,a,i,o,s){var c=n-t,l=r-e,u=o-a,f=s-i,h=f*c-u*l;if(!(h*h<Yo))return[t+(h=(u*(e-i)-f*(t-a))/h)*c,e+h*l]}(D,M,U,B,L,H,P,$)){var F=D-I[0],z=M-I[1],q=L-I[0],Y=H-I[1],V=1/zo(((f=(F*q+z*Y)/(qo(F*F+z*z)*qo(q*q+Y*Y)))>1?0:f<-1?Vo:Math.acos(f))/2),W=qo(I[0]*I[0]+I[1]*I[1]);O=Fo(T,(h-W)/(V-1)),N=Fo(T,(p-W)/(V+1))}else O=N=0}k>Yo?N>Yo?(v=es(U,B,D,M,p,N,g),_=es(L,H,P,$,p,N,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),N<T?s.arc(v.cx,v.cy,N,Ho(v.y01,v.x01),Ho(_.y01,_.x01),!g):(s.arc(v.cx,v.cy,N,Ho(v.y01,v.x01),Ho(v.y11,v.x11),!g),s.arc(0,0,p,Ho(v.cy+v.y11,v.cx+v.x11),Ho(_.cy+_.y11,_.cx+_.x11),!g),s.arc(_.cx,_.cy,N,Ho(_.y11,_.x11),Ho(_.y01,_.x01),!g))):(s.moveTo(D,M),s.arc(0,0,p,b,w,!g)):s.moveTo(D,M),h>Yo&&S>Yo?O>Yo?(v=es(P,$,L,H,h,-O,g),_=es(D,M,U,B,h,-O,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),O<T?s.arc(v.cx,v.cy,O,Ho(v.y01,v.x01),Ho(_.y01,_.x01),!g):(s.arc(v.cx,v.cy,O,Ho(v.y01,v.x01),Ho(v.y11,v.x11),!g),s.arc(0,0,h,Ho(v.cy+v.y11,v.cx+v.x11),Ho(_.cy+_.y11,_.cx+_.x11),g),s.arc(_.cx,_.cy,O,Ho(_.y11,_.x11),Ho(_.y01,_.x01),!g))):s.arc(0,0,h,E,x,g):s.lineTo(P,$)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Vo/2;return[Uo(r)*n,zo(r)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Io(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Io(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Io(+t),l):n},l.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Io(+t),l):r},l.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Io(+t),l):a},l.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Io(+t),l):i},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Io(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}function rs(t,e,n){this.k=t,this.x=e,this.y=n}rs.prototype={constructor:rs,scale:function(t){return 1===t?this:new rs(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new rs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},rs.prototype;var as=/\s/;var is=function(t){for(var e=t.length;e--&&as.test(t.charAt(e)););return e},os=/^\s+/;var ss=function(t){return t?t.slice(0,is(t)+1).replace(os,""):t},cs=Dt,ls=bt,us=/^[-+]0x[0-9a-f]+$/i,fs=/^0b[01]+$/i,hs=/^0o[0-7]+$/i,ps=parseInt;var ds=function(t){if("number"==typeof t)return t;if(ls(t))return NaN;if(cs(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=cs(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ss(t);var n=fs.test(t);return n||hs.test(t)?ps(t.slice(2),n?2:8):us.test(t)?NaN:+t},ms=ds,ys=1/0;var gs=function(t){return t?(t=ms(t))===ys||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var vs=function(t){var e=gs(t),n=e%1;return e==e?n?e-n:e:0},_s=me,bs=Tn,ws=bt,xs=it?it.prototype:void 0,Es=xs?xs.toString:void 0;var Ss=function t(e){if("string"==typeof e)return e;if(bs(e))return _s(e,t)+"";if(ws(e))return Es?Es.call(e):"";var n=e+"";return"0"==n&&1/e==-Infinity?"-0":n},ks=Ss;var Cs=function(t){return null==t?"":ks(t)},js=vs,Ts=ds,Os=Cs,Ns=at.isFinite,As=Math.min;var Rs=r(function(t){var e=Math[t];return function(t,n){if(t=Ts(t),(n=null==n?0:As(js(n),292))&&Ns(t)){var r=(Os(t)+"e").split("e"),a=e(r[0]+"e"+(+r[1]+n));return+((r=(Os(a)+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("round"));function Ds(){const t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let n;return n=e<t?.45*e:.45*t,function(t){const e=document.getElementById("root-cell-tooltip");e&&e.setAttribute("style","top:".concat(.4*t,"px; width:").concat(.4*t,"px; height:").concat(.22*t,"px; font-size: ").concat(.004*t,"em;"))}(n),n}function Ms(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.captures?t.captures:[e,t.simhash]}function Ps(t){if(-1!==t.similarity)return"".concat(t.name," - Differences: ").concat(Rs(t.similarity,2),"%")}class $s extends h.Component{constructor(e){super(e),t(this,"state",{hint:""}),this.chartRef=h.createRef()}componentDidMount(){const{simhashData:t,urlPrefix:e,url:n}=this.props,r=Ds(),a=Ds(),i=Math.min(r,a)/2,o=Ea(this.chartRef.current).attr("width",r).attr("height",a).append("g").attr("transform","translate("+r/2+","+a/2+")"),s=$o().size([2*Math.PI,i]),c=Oo(t).sum((function(t){return 5}));s(c);const l=ns().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).innerRadius((function(t){return t.y0})).outerRadius((function(t){return t.y1}));o.selectAll("path").data(c.descendants()).enter().append("path").attr("display",(function(t){return t.depth?null:"none"})).attr("d",l).style("stroke","#fff").style("fill",(function(t){return t.data.clr})).on("mouseover",(function(t,e){Ea(this).style("cursor","pointer").style("stroke","black"),component.setState({hint:Ps(e.data)})})).on("mouseleave",(function(t,e){Ea(this).style("cursor","default").style("stroke",""),component.setState({hint:""})})).on("click",(function(n,r){if(r.data.timestamp!==t.timestamp){const n=e+r.data.timestamp+"/"+t.timestamp+"/"+n;window.open(n,"_blank")}}))}render(){return h.createElement(h.Fragment,null,h.createElement("p",{className:"text-center",style:{marginTop:"10px"}},this.state.hint,"  "),h.createElement("div",{className:"text-center"},h.createElement("svg",{ref:this.chartRef})))}}t($s,"propTypes",{simhashData:R.object,url:R.string,urlPrefix:R.string});var Is={exports:{}};Is.exports=function(){function t(t){return t.slice().sort((function(t,e){return t-e}))}function e(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}function n(t,e){for(var n=[],r=0;r<t;r++){for(var a=[],i=0;i<e;i++)a.push(0);n.push(a)}return n}function r(t,e,n,r){var a;if(t>0){var i=(n[e]-n[t-1])/(e-t+1);a=r[e]-r[t-1]-(e-t+1)*i*i}else a=r[e]-n[e]*n[e]/(e+1);return a<0?0:a}function a(t,e,n,i,o,s,c){if(!(t>e)){var l=Math.floor((t+e)/2);i[n][l]=i[n-1][l-1],o[n][l]=l;var u=n;t>n&&(u=Math.max(u,o[n][t-1]||0)),u=Math.max(u,o[n-1][l]||0);var f,h,p,d=l-1;e<i.length-1&&(d=Math.min(d,o[n][e+1]||0));for(var m=d;m>=u&&!((f=r(m,l,s,c))+i[n-1][u-1]>=i[n][l]);--m)(h=r(u,l,s,c)+i[n-1][u-1])<i[n][l]&&(i[n][l]=h,o[n][l]=u),u++,(p=f+i[n-1][m-1])<i[n][l]&&(i[n][l]=p,o[n][l]=m);a(t,l-1,n,i,o,s,c),a(l+1,e,n,i,o,s,c)}}function i(t,e,n){for(var i=e[0].length,o=new Array(i),s=new Array(i),c=t[Math.floor(i/2)],l=0;l<i;++l)0===l?(o[0]=t[0]-c,s[0]=(t[0]-c)*(t[0]-c)):(o[l]=o[l-1]+t[l]-c,s[l]=s[l-1]+(t[l]-c)*(t[l]-c)),e[0][l]=r(0,l,o,s),n[0][l]=0;for(var u=1;u<e.length;++u)a(u<e.length-1?u:i-1,i-1,u,e,n,o,s)}function o(r,a){if(a>r.length)throw new Error("Cannot generate more classes than there are data values");var o=r.length,s=t(r),c=e(s);if(1===c)return[s];var l=n(a=Math.min(c,a),o),u=n(a,o);i(s,l,u);for(var f=[],h=u[0].length-1,p=u.length-1;p>=0;p--){var d=u[p][h];f[p]=s[d],p>0&&(h=d-1)}return f}var s=o;function c(){var t=!1,e=[],n=[],r=[],a=function(e){if(t){for(var a=r.length-1;a>=0;a--)if(e>=r[a])return n[a];return n[0]}};function i(){if(!(n.length<=2)){var a=s(e,Math.min(e.length,n.length));t=0!==a.length,r=[];for(var i=0;i<a.length;i++)r.push(a[i])}}return a.domain=function(){return arguments.length?(e=arguments[0],i(),a):e},a.range=function(){if(arguments.length){var t=arguments[0],e=t.length!==n.length;return n=t,e&&i(),a}return n},a.invertExtent=function(t){for(var e=NaN,a=NaN,i=0;i<n.length;i++)if(n[i]===t){e=r[i],a=i+1<n.length?r[i+1]:NaN;break}return[e,a]},a.clusters=function(){return r.slice(1)},a.export=function(){return{isReady:t,domain:e,range:n,breakpoints:r}},a.import=function(i){if(!i)throw new Error("Import requires parameters");return t=i.isReady,e=i.domain,n=i.range,r=i.breakpoints,a},a.copy=function(){return c().domain(e).range(n)},a}return"object"==typeof d3&&(d3.scaleCluster=c),c}();var Ls=r(Is.exports);D(".heat-map-legend-bar {\n    width: 10px;\n    margin: 0 1px;\n    transition: height .2s;\n}\n\n.heat-map-legend-summary {\n    display: flex;\n    align-items: center;\n    height: 20px\n}\n\n.heat-map-legend {\n    align-self: flex-end;\n    display: flex;\n    align-items: baseline;\n    font-size: 12px;\n    float: right;\n}\n\n.heat-map-legend-summary-min-caption {\n    width: 32px;\n    text-align: right;\n}\n\n.heat-map-legend-caption {\n    margin: 0 8px;\n}\n\n.heat-map-legend-summary-graphics {\n    display: flex;\n    margin: 0 8px;\n    height: 20px;\n}\n\n.sunburst-container{\n    margin: auto;\n    width: 50%;\n}\n\n.rv-sunburst {\n    margin: 0 auto;\n}\n\n#calcButton {\n    margin-left: auto;\n    margin-right: auto;\n    display: block;\n}\n\n.rv-xy-plot__series, .rv-xy-plot__series--arc-path, .rv-sunburst__series--radial__arc {\n    cursor: pointer;\n}\n\n#root-cell-tooltip {\n    position: absolute;\n    display: inline-block;\n    margin: auto;\n    right: 0;\n    left: 0;\n    z-index: 10;\n    text-align: center;\n}\n\n.rv-hint {\n    z-index: 10;\n}\n");var Hs=function(t,e){for(var n=-1,r=e.length,a=t.length;++n<r;)t[a+n]=e[n];return t},Us=jn,Bs=Tn,Fs=it?it.isConcatSpreadable:void 0;var zs=Hs,qs=function(t){return Bs(t)||Us(t)||!!(Fs&&t&&t[Fs])};var Ys=function t(e,n,r,a,i){var o=-1,s=e.length;for(r||(r=qs),i||(i=[]);++o<s;){var c=e[o];n>0&&r(c)?n>1?t(c,n-1,r,a,i):zs(i,c):a||(i[i.length]=c)}return i},Vs=Tn,Ws=bt,Xs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gs=/^\w*$/;var Js=function(t,e){if(Vs(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Ws(t))||(Gs.test(t)||!Xs.test(t)||null!=e&&t in Object(e))},Ks=ee(Object,"create"),Zs=Ks;var Qs=function(){this.__data__=Zs?Zs(null):{},this.size=0};var tc=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ec=Ks,nc=Object.prototype.hasOwnProperty;var rc=function(t){var e=this.__data__;if(ec){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return nc.call(e,t)?e[t]:void 0},ac=Ks,ic=Object.prototype.hasOwnProperty;var oc=Ks;var sc=Qs,cc=tc,lc=rc,uc=function(t){var e=this.__data__;return ac?void 0!==e[t]:ic.call(e,t)},fc=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oc&&void 0===e?"__lodash_hash_undefined__":e,this};function hc(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hc.prototype.clear=sc,hc.prototype.delete=cc,hc.prototype.get=lc,hc.prototype.has=uc,hc.prototype.set=fc;var pc=hc;var dc=function(){this.__data__=[],this.size=0};var mc=function(t,e){return t===e||t!=t&&e!=e},yc=mc;var gc=function(t,e){for(var n=t.length;n--;)if(yc(t[n][0],e))return n;return-1},vc=gc,_c=Array.prototype.splice;var bc=gc;var wc=gc;var xc=gc;var Ec=dc,Sc=function(t){var e=this.__data__,n=vc(e,t);return!(n<0)&&(n==e.length-1?e.pop():_c.call(e,n,1),--this.size,!0)},kc=function(t){var e=this.__data__,n=bc(e,t);return n<0?void 0:e[n][1]},Cc=function(t){return wc(this.__data__,t)>-1},jc=function(t,e){var n=this.__data__,r=xc(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Tc(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Tc.prototype.clear=Ec,Tc.prototype.delete=Sc,Tc.prototype.get=kc,Tc.prototype.has=Cc,Tc.prototype.set=jc;var Oc=Tc,Nc=pc,Ac=Oc,Rc=Qe;var Dc=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Mc=function(t,e){var n=t.__data__;return Dc(e)?n["string"==typeof e?"string":"hash"]:n.map},Pc=Mc;var $c=Mc;var Ic=Mc;var Lc=Mc;var Hc=function(){this.size=0,this.__data__={hash:new Nc,map:new(Rc||Ac),string:new Nc}},Uc=function(t){var e=Pc(this,t).delete(t);return this.size-=e?1:0,e},Bc=function(t){return $c(this,t).get(t)},Fc=function(t){return Ic(this,t).has(t)},zc=function(t,e){var n=Lc(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function qc(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qc.prototype.clear=Hc,qc.prototype.delete=Uc,qc.prototype.get=Bc,qc.prototype.has=Fc,qc.prototype.set=zc;var Yc=qc,Vc=Yc;function Wc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,a=e?e.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=t.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(Wc.Cache||Vc),n}Wc.Cache=Vc;var Xc=Wc;var Gc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jc=/\\(\\)?/g,Kc=function(t){var e=Xc(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Gc,(function(t,n,r,a){e.push(r?a.replace(Jc,"$1"):n||t)})),e})),Zc=Tn,Qc=Js,tl=Kc,el=Cs;var nl=function(t,e){return Zc(t)?t:Qc(t,e)?[t]:tl(el(t))},rl=bt;var al=function(t){if("string"==typeof t||rl(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},il=nl,ol=al;var sl=function(t,e){for(var n=0,r=(e=il(e,t)).length;null!=t&&n<r;)t=t[ol(e[n++])];return n&&n==r?t:void 0},cl=Oc;var ll=Oc,ul=Qe,fl=Yc;var hl=Oc,pl=function(){this.__data__=new cl,this.size=0},dl=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ml=function(t){return this.__data__.get(t)},yl=function(t){return this.__data__.has(t)},gl=function(t,e){var n=this.__data__;if(n instanceof ll){var r=n.__data__;if(!ul||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new fl(r)}return n.set(t,e),this.size=n.size,this};function vl(t){var e=this.__data__=new hl(t);this.size=e.size}vl.prototype.clear=pl,vl.prototype.delete=dl,vl.prototype.get=ml,vl.prototype.has=yl,vl.prototype.set=gl;var _l=vl;var bl=Yc,wl=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},xl=function(t){return this.__data__.has(t)};function El(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bl;++e<n;)this.add(t[e])}El.prototype.add=El.prototype.push=wl,El.prototype.has=xl;var Sl=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var kl=El,Cl=Sl,jl=function(t,e){return t.has(e)};var Tl=function(t,e,n,r,a,i){var o=1&n,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;var f=-1,h=!0,p=2&n?new kl:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],m=e[f];if(r)var y=o?r(m,d,f,e,t,i):r(d,m,f,t,e,i);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!Cl(e,(function(t,e){if(!jl(p,e)&&(d===t||a(d,t,n,r,i)))return p.push(e)}))){h=!1;break}}else if(d!==m&&!a(d,m,n,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h};var Ol=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Nl=at.Uint8Array,Al=mc,Rl=Tl,Dl=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Ml=Ol,Pl=it?it.prototype:void 0,$l=Pl?Pl.valueOf:void 0;var Il=function(t,e,n,r,a,i,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Nl(t),new Nl(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Al(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Dl;case"[object Set]":var c=1&r;if(s||(s=Ml),t.size!=e.size&&!c)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var u=Rl(s(t),s(e),r,a,i,o);return o.delete(t),u;case"[object Symbol]":if($l)return $l.call(t)==$l.call(e)}return!1},Ll=Hs,Hl=Tn;var Ul=function(t,e,n){var r=e(t);return Hl(t)?r:Ll(r,n(t))};var Bl=de,Fl=function(){return[]},zl=Object.prototype.propertyIsEnumerable,ql=Object.getOwnPropertySymbols,Yl=ql?function(t){return null==t?[]:(t=Object(t),Bl(ql(t),(function(e){return zl.call(t,e)})))}:Fl,Vl=/^(?:0|[1-9]\d*)$/;var Wl=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Vl.test(t))&&t>-1&&t%1==0&&t<e},Xl=ge,Gl=jn,Jl=Tn,Kl=An,Zl=Wl,Ql=zn,tu=Object.prototype.hasOwnProperty;var eu=function(t,e){var n=Jl(t),r=!n&&Gl(t),a=!n&&!r&&Kl(t),i=!n&&!r&&!a&&Ql(t),o=n||r||a||i,s=o?Xl(t.length,String):[],c=s.length;for(var l in t)!e&&!tu.call(t,l)||o&&("length"==l||a&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Zl(l,c))||s.push(l);return s},nu=Ke,ru=we;var au=function(t){return ru(t)?eu(t):nu(t)},iu=Ul,ou=Yl,su=au;var cu=function(t){return iu(t,su,ou)},lu=Object.prototype.hasOwnProperty;var uu=_l,fu=Tl,hu=Il,pu=function(t,e,n,r,a,i){var o=1&n,s=cu(t),c=s.length;if(c!=cu(e).length&&!o)return!1;for(var l=c;l--;){var u=s[l];if(!(o?u in e:lu.call(e,u)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=o;++l<c;){var m=t[u=s[l]],y=e[u];if(r)var g=o?r(y,m,u,e,t,i):r(m,y,u,t,e,i);if(!(void 0===g?m===y||a(m,y,n,r,i):g)){p=!1;break}d||(d="constructor"==u)}if(p&&!d){var v=t.constructor,_=e.constructor;v==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(p=!1)}return i.delete(t),i.delete(e),p},du=_n,mu=Tn,yu=An,gu=zn,vu="[object Arguments]",_u="[object Array]",bu="[object Object]",wu=Object.prototype.hasOwnProperty;var xu=function(t,e,n,r,a,i){var o=mu(t),s=mu(e),c=o?_u:du(t),l=s?_u:du(e),u=(c=c==vu?bu:c)==bu,f=(l=l==vu?bu:l)==bu,h=c==l;if(h&&yu(t)){if(!yu(e))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new uu),o||gu(t)?fu(t,e,n,r,a,i):hu(t,e,c,n,r,a,i);if(!(1&n)){var p=u&&wu.call(t,"__wrapped__"),d=f&&wu.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,y=d?e.value():e;return i||(i=new uu),a(m,y,n,r,i)}}return!!h&&(i||(i=new uu),pu(t,e,n,r,a,i))},Eu=gt;var Su=function t(e,n,r,a,i){return e===n||(null==e||null==n||!Eu(e)&&!Eu(n)?e!=e&&n!=n:xu(e,n,r,a,t,i))},ku=_l,Cu=Su;var ju=Dt;var Tu=function(t){return t==t&&!ju(t)},Ou=Tu,Nu=au;var Au=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}},Ru=function(t,e,n,r){var a=n.length,i=a,o=!r;if(null==t)return!i;for(t=Object(t);a--;){var s=n[a];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<i;){var c=(s=n[a])[0],l=t[c],u=s[1];if(o&&s[2]){if(void 0===l&&!(c in t))return!1}else{var f=new ku;if(r)var h=r(l,u,c,t,e,f);if(!(void 0===h?Cu(u,l,3,r,f):h))return!1}}return!0},Du=function(t){for(var e=Nu(t),n=e.length;n--;){var r=e[n],a=t[r];e[n]=[r,a,Ou(a)]}return e},Mu=Au;var Pu=sl;var $u=nl,Iu=jn,Lu=Tn,Hu=Wl,Uu=ve,Bu=al;var Fu=function(t,e){return null!=t&&e in Object(t)},zu=function(t,e,n){for(var r=-1,a=(e=$u(e,t)).length,i=!1;++r<a;){var o=Bu(e[r]);if(!(i=null!=t&&n(t,o)))break;t=t[o]}return i||++r!=a?i:!!(a=null==t?0:t.length)&&Uu(a)&&Hu(o,a)&&(Lu(t)||Iu(t))};var qu=Su,Yu=function(t,e,n){var r=null==t?void 0:Pu(t,e);return void 0===r?n:r},Vu=function(t,e){return null!=t&&zu(t,e,Fu)},Wu=Js,Xu=Tu,Gu=Au,Ju=al;var Ku=sl;var Zu=ye,Qu=function(t){return function(e){return Ku(e,t)}},tf=Js,ef=al;var nf=function(t){var e=Du(t);return 1==e.length&&e[0][2]?Mu(e[0][0],e[0][1]):function(n){return n===t||Ru(n,t,e)}},rf=function(t,e){return Wu(t)&&Xu(e)?Gu(Ju(t),e):function(n){var r=Yu(n,t);return void 0===r&&r===e?Vu(n,t):qu(e,r,3)}},af=Et,of=Tn,sf=function(t){return tf(t)?Zu(ef(t)):Qu(t)};var cf=function(t){return"function"==typeof t?t:null==t?af:"object"==typeof t?of(t)?rf(t[0],t[1]):nf(t):sf(t)};var lf=function(t){return function(e,n,r){for(var a=-1,i=Object(e),o=r(e),s=o.length;s--;){var c=o[t?s:++a];if(!1===n(i[c],c,i))break}return e}}(),uf=au;var ff=we;var hf=function(t,e){return function(n,r){if(null==n)return n;if(!ff(n))return t(n,r);for(var a=n.length,i=e?a:-1,o=Object(n);(e?i--:++i<a)&&!1!==r(o[i],i,o););return n}}((function(t,e){return t&&lf(t,e,uf)})),pf=we;var df=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t},mf=bt;var yf=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,a=t==t,i=mf(t),o=void 0!==e,s=null===e,c=e==e,l=mf(e);if(!s&&!l&&!i&&t>e||i&&o&&c&&!s&&!l||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!l&&t<e||l&&n&&a&&!r&&!i||s&&n&&a||!o&&a||!c)return-1}return 0};var gf=me,vf=sl,_f=cf,bf=function(t,e){var n=-1,r=pf(t)?Array(t.length):[];return hf(t,(function(t,a,i){r[++n]=e(t,a,i)})),r},wf=df,xf=In,Ef=function(t,e,n){for(var r=-1,a=t.criteria,i=e.criteria,o=a.length,s=n.length;++r<o;){var c=yf(a[r],i[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return t.index-e.index},Sf=Et,kf=Tn;var Cf=mc,jf=we,Tf=Wl,Of=Dt;var Nf=Ys,Af=function(t,e,n){e=e.length?gf(e,(function(t){return kf(t)?function(e){return vf(e,1===t.length?t[0]:t)}:t})):[Sf];var r=-1;e=gf(e,xf(_f));var a=bf(t,(function(t,n,a){return{criteria:gf(e,(function(e){return e(t)})),index:++r,value:t}}));return wf(a,(function(t,e){return Ef(t,e,n)}))},Rf=function(t,e,n){if(!Of(n))return!1;var r=typeof e;return!!("number"==r?jf(n)&&Tf(e,n.length):"string"==r&&e in n)&&Cf(n[e],t)},Df=r(pe((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Rf(t,e[0],e[1])?e=[]:n>2&&Rf(e[0],e[1],e[2])&&(e=[e[0]]),Af(t,Nf(e,1),[])})));const Mf={backgroundColor:"rgb(241, 231, 119)",height:"4px"},Pf={backgroundColor:"rgb(197, 213, 108)",height:"6px"},$f={backgroundColor:"rgb(159, 197, 99)",height:"8px"},If={backgroundColor:"rgb(141, 184, 101)",height:"10px"},Lf={backgroundColor:"rgb(107, 151, 117)",height:"12px"};class Hf extends h.Component{constructor(t){super(t),this.state={isUpdate:0,isPending:!1,simhashData:null},this._clusters=[]}componentDidUpdate(){this.state.isUpdate<2&&(Ds(),this.setState({isUpdate:this.state.isUpdate+1}))}render(){const{url:t,conf:e}=this.props;if(this.state.error)return h.createElement(ar,{url:t,code:this.state.error,timestamp:this.state.timestamp?this.state.timestamp:this.props.timestamp,conf:e,errorHandledCallback:this.errorHandled});if(this.state.simhashData)return h.createElement("div",{className:"sunburst-container"},this.state.isPending&&h.createElement("p",null,"The Simhash data for ",t," and year ",this.state.timestamp.substring(0,4)," are still being generated. For more results please try again in a moment."),h.createElement("div",null,"This diagram illustrates the differences of ",h.createElement("a",{href:"/web/*/".concat(t)},t)," capture ",h.createElement("a",{href:e.snapshotsPrefix+this.state.timestamp+"/"+t},Be(this.state.timestamp))," compared to"," ",this.state.countCaptures," other captures of the same URL for ",this.state.timestamp.substring(0,4),"."),h.createElement($s,{urlPrefix:e.urlPrefix,url:t,simhashData:this.state.simhashData}),h.createElement("div",{style:{clear:"both"}},h.createElement("div",{className:"heat-map-legend"},h.createElement("div",{className:"heat-map-legend-caption"},"Variation"),h.createElement("div",{className:"heat-map-legend-summary"},h.createElement("div",{className:"heat-map-legend-summary-min-caption"},"Low"),h.createElement("div",{className:"heat-map-legend-summary-graphics"},h.createElement("div",{className:"heat-map-legend-bar",style:Mf}),h.createElement("div",{className:"heat-map-legend-bar",style:Pf}),h.createElement("div",{className:"heat-map-legend-bar",style:$f}),h.createElement("div",{className:"heat-map-legend-bar",style:If}),h.createElement("div",{className:"heat-map-legend-bar",style:Lf})),h.createElement("div",{className:"heat-map-legend-summary-max-caption"},"High")))));const n=()=>U(this.props.loader)?h.createElement(B,null):this.props.loader;return this.state.timestamp?this._fetchTimestampSimhashData():this._validateTimestamp(),h.createElement("div",{className:"loading"},h.createElement(n,null))}_validateTimestamp(){const{url:t,conf:e,timestamp:n}=this.props,r=new URL(e.cdxServer,window.location.origin);r.searchParams.append("url",t),r.searchParams.append("closest",n),r.searchParams.append("filter","!mimetype:warc/revisit"),r.searchParams.append("sort","closest"),r.searchParams.append("limit","1"),r.searchParams.append("fl","timestamp"),Le(r).then($e).then((t=>t.json())).then((r=>{const a=r.toString(),i=n!==a?a:n,o="".concat(e.diffgraphPrefix).concat(a,"/").concat(t);window.history.pushState({},"",o),this.setState({timestamp:i})})).catch((t=>{"Unexpected end of JSON input"===t.message?this.errorHandled("NO_CAPTURES"):this.errorHandled(t.message)}))}errorHandled(t){this.setState({error:t})}_fetchTimestampSimhashData(){const{url:t,conf:e}=this.props;Le(e.waybackDiscoverDiff+"/simhash?url="+encodeURIComponent(t)+"&timestamp="+this.state.timestamp).then($e).then((t=>t.json())).then((t=>{if(t.status)throw Error(t.message);this._fetchSimhashData(Ms(t,this.state.timestamp))})).catch((t=>{this.errorHandled(t.message)}))}_fetchSimhashData(t){const{url:e,conf:n}=this.props;let r=n.waybackDiscoverDiff+"/simhash?url="+encodeURIComponent(e)+"&year="+this.state.timestamp.substring(0,4);n.compressedSimhash&&(r+="&compress=1"),Le(r).then($e).then((t=>t.json())).then((e=>{this.setState({isPending:"PENDING"===e.status});const r=n.compressedSimhash?function(t){const e=[],n=t.captures[0][0];for(let r=1;r<t.captures[0].length;r++){const a=t.captures[0][r][0];for(let i=1;i<t.captures[0][r].length;i++){const o=t.captures[0][r][i][0];for(let s=1;s<t.captures[0][r][i].length;s++){const[c,l]=t.captures[0][r][i][s],u=t.hashes[l],f="".concat(n).concat(He(a)).concat(He(o)).concat(c);e.push([f,u])}}}return e}(e):Ms(e),a=this._calcDistanceAndScales(r,t);Qn(a)||this._createLevels(a,t)})).catch((t=>{this.errorHandled(t.message)}))}_calcDistanceAndScales(t,e){const n=t.map((t=>{const n=Me(e[1],t[1]);return t[1]=100*n,0!==n?100*n:null})).filter(Boolean);if(0!==n.length){for(this.setState({countCaptures:n.length}),this._clusters=Ls().domain(n).range([1,2,3,4,5]).clusters();this._clusters.length<5;)this._clusters.push(101);return t}this.errorHandled("NO_DIFFERENT_CAPTURES")}_createLevels(t,e){let n=[],r=[],a=[],i=[],o=[];const s=["#dddddd","#f1e777","#c5d56c","#8db865","#6b9775","#4d7a83"];for(let e=0;e<t.length;e++)0!==t[e][1]&&(t[e][1]<=this._clusters[0]?n.push({name:Be(t[e][0]),timestamp:t[e][0],similarity:t[e][1],clr:s[1],children:[]}):t[e][1]<=this._clusters[1]?r.push({name:Be(t[e][0]),timestamp:t[e][0],similarity:t[e][1],clr:s[2],children:[]}):t[e][1]<=this._clusters[2]?a.push({name:Be(t[e][0]),timestamp:t[e][0],similarity:t[e][1],clr:s[3],children:[]}):t[e][1]<=this._clusters[3]?i.push({name:Be(t[e][0]),timestamp:t[e][0],similarity:t[e][1],clr:s[4],children:[]}):t[e][1]<=this._clusters[4]&&o.push({name:Be(t[e][0]),timestamp:t[e][0],similarity:t[e][1],clr:s[5],children:[]}));let c=4;for(;0===n.length&&c>0;)n=r,r=a,a=i,i=o,o=[],c-=1;for(c=3;0===r.length&&c>0;)r=a,a=i,i=o,o=[],c-=1;for(c=2;0===a.length&&c>0;)a=i,i=o,o=[],c-=1;0===i.length&&(i=o,o=[]),n=Df(n,[function(t){return t.timestamp}]),r=Df(r,[function(t){return t.timestamp}]),a=Df(a,[function(t){return t.timestamp}]),i=Df(i,[function(t){return t.timestamp}]),o=Df(o,[function(t){return t.timestamp}]),n.length>this.props.conf.maxSunburstLevelLength&&(n.length=this.props.conf.maxSunburstLevelLength),r.length>this.props.conf.maxSunburstLevelLength&&(r.length=this.props.conf.maxSunburstLevelLength),a.length>this.props.conf.maxSunburstLevelLength&&(a.length=this.props.conf.maxSunburstLevelLength),i.length>this.props.conf.maxSunburstLevelLength&&(i.length=this.props.conf.maxSunburstLevelLength),o.length>this.props.conf.maxSunburstLevelLength&&(o.length=this.props.conf.maxSunburstLevelLength);for(let t=0;t<o.length;t++){const e=t%i.length;i[e].children.push(o[t]),i[e].bigness=""}for(let t=0;t<i.length;t++){const e=t%a.length;a[e].children.push(i[t]),a[e].bigness=""}for(let t=0;t<a.length;t++){const e=t%r.length;r[e].children.push(a[t]),r[e].bigness=""}for(let t=0;t<r.length;t++){const e=t%n.length;n[e].children.push(r[t]),n[e].bigness=""}this.setState({simhashData:{name:Be(e[0]),timestamp:e[0],clr:s[0],children:n,similarity:-1}})}}t(Hf,"displayName","SunburstContainer"),t(Hf,"propTypes",{timestamp:R.string.isRequired,url:R.string.isRequired,conf:R.object.isRequired,loader:R.element});export{ir as DiffContainer,Hf as SunburstContainer};
//# sourceMappingURL=app.js.map
